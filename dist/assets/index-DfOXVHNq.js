(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const h of o.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&n(h)}).observe(document,{childList:!0,subtree:!0});function i(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(l){if(l.ep)return;l.ep=!0;const o=i(l);fetch(l.href,o)}})();var fu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function x_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function sE(s){if(Object.prototype.hasOwnProperty.call(s,"__esModule"))return s;var t=s.default;if(typeof t=="function"){var i=function n(){var l=!1;try{l=this instanceof n}catch{}return l?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(s).forEach(function(n){var l=Object.getOwnPropertyDescriptor(s,n);Object.defineProperty(i,n,l.get?l:{enumerable:!0,get:function(){return s[n]}})}),i}var Yc={exports:{}},tl={};var sv;function aE(){if(sv)return tl;sv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(n,l,o){var h=null;if(o!==void 0&&(h=""+o),l.key!==void 0&&(h=""+l.key),"key"in l){o={};for(var c in l)c!=="key"&&(o[c]=l[c])}else o=l;return l=o.ref,{$$typeof:s,type:n,key:h,ref:l!==void 0?l:null,props:o}}return tl.Fragment=t,tl.jsx=i,tl.jsxs=i,tl}var av;function lE(){return av||(av=1,Yc.exports=aE()),Yc.exports}var ue=lE(),$c={exports:{}},Nt={};var lv;function oE(){if(lv)return Nt;lv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),h=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),_=Symbol.iterator;function x(T){return T===null||typeof T!="object"?null:(T=_&&T[_]||T["@@iterator"],typeof T=="function"?T:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(T,N,F){this.props=T,this.context=N,this.refs=S,this.updater=F||b}C.prototype.isReactComponent={},C.prototype.setState=function(T,N){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,N,"setState")},C.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=C.prototype;function O(T,N,F){this.props=T,this.context=N,this.refs=S,this.updater=F||b}var P=O.prototype=new U;P.constructor=O,w(P,C.prototype),P.isPureReactComponent=!0;var B=Array.isArray;function j(){}var D={H:null,A:null,T:null,S:null},$=Object.prototype.hasOwnProperty;function nt(T,N,F){var X=F.ref;return{$$typeof:s,type:T,key:N,ref:X!==void 0?X:null,props:F}}function lt(T,N){return nt(T.type,N,T.props)}function it(T){return typeof T=="object"&&T!==null&&T.$$typeof===s}function H(T){var N={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(F){return N[F]})}var J=/\/+/g;function Q(T,N){return typeof T=="object"&&T!==null&&T.key!=null?H(""+T.key):N.toString(36)}function pt(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(j,j):(T.status="pending",T.then(function(N){T.status==="pending"&&(T.status="fulfilled",T.value=N)},function(N){T.status==="pending"&&(T.status="rejected",T.reason=N)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function E(T,N,F,X,tt){var at=typeof T;(at==="undefined"||at==="boolean")&&(T=null);var ot=!1;if(T===null)ot=!0;else switch(at){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(T.$$typeof){case s:case t:ot=!0;break;case g:return ot=T._init,E(ot(T._payload),N,F,X,tt)}}if(ot)return tt=tt(T),ot=X===""?"."+Q(T,0):X,B(tt)?(F="",ot!=null&&(F=ot.replace(J,"$&/")+"/"),E(tt,N,F,"",function(ut){return ut})):tt!=null&&(it(tt)&&(tt=lt(tt,F+(tt.key==null||T&&T.key===tt.key?"":(""+tt.key).replace(J,"$&/")+"/")+ot)),N.push(tt)),1;ot=0;var ft=X===""?".":X+":";if(B(T))for(var ct=0;ct<T.length;ct++)X=T[ct],at=ft+Q(X,ct),ot+=E(X,N,F,at,tt);else if(ct=x(T),typeof ct=="function")for(T=ct.call(T),ct=0;!(X=T.next()).done;)X=X.value,at=ft+Q(X,ct++),ot+=E(X,N,F,at,tt);else if(at==="object"){if(typeof T.then=="function")return E(pt(T),N,F,X,tt);throw N=String(T),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.")}return ot}function R(T,N,F){if(T==null)return T;var X=[],tt=0;return E(T,X,"","",function(at){return N.call(F,at,tt++)}),X}function M(T){if(T._status===-1){var N=T._result;N=N(),N.then(function(F){(T._status===0||T._status===-1)&&(T._status=1,T._result=F)},function(F){(T._status===0||T._status===-1)&&(T._status=2,T._result=F)}),T._status===-1&&(T._status=0,T._result=N)}if(T._status===1)return T._result.default;throw T._result}var z=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var N=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(N))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},I={map:R,forEach:function(T,N,F){R(T,function(){N.apply(this,arguments)},F)},count:function(T){var N=0;return R(T,function(){N++}),N},toArray:function(T){return R(T,function(N){return N})||[]},only:function(T){if(!it(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return Nt.Activity=y,Nt.Children=I,Nt.Component=C,Nt.Fragment=i,Nt.Profiler=l,Nt.PureComponent=O,Nt.StrictMode=n,Nt.Suspense=p,Nt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Nt.__COMPILER_RUNTIME={__proto__:null,c:function(T){return D.H.useMemoCache(T)}},Nt.cache=function(T){return function(){return T.apply(null,arguments)}},Nt.cacheSignal=function(){return null},Nt.cloneElement=function(T,N,F){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var X=w({},T.props),tt=T.key;if(N!=null)for(at in N.key!==void 0&&(tt=""+N.key),N)!$.call(N,at)||at==="key"||at==="__self"||at==="__source"||at==="ref"&&N.ref===void 0||(X[at]=N[at]);var at=arguments.length-2;if(at===1)X.children=F;else if(1<at){for(var ot=Array(at),ft=0;ft<at;ft++)ot[ft]=arguments[ft+2];X.children=ot}return nt(T.type,tt,X)},Nt.createContext=function(T){return T={$$typeof:h,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:o,_context:T},T},Nt.createElement=function(T,N,F){var X,tt={},at=null;if(N!=null)for(X in N.key!==void 0&&(at=""+N.key),N)$.call(N,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(tt[X]=N[X]);var ot=arguments.length-2;if(ot===1)tt.children=F;else if(1<ot){for(var ft=Array(ot),ct=0;ct<ot;ct++)ft[ct]=arguments[ct+2];tt.children=ft}if(T&&T.defaultProps)for(X in ot=T.defaultProps,ot)tt[X]===void 0&&(tt[X]=ot[X]);return nt(T,at,tt)},Nt.createRef=function(){return{current:null}},Nt.forwardRef=function(T){return{$$typeof:c,render:T}},Nt.isValidElement=it,Nt.lazy=function(T){return{$$typeof:g,_payload:{_status:-1,_result:T},_init:M}},Nt.memo=function(T,N){return{$$typeof:m,type:T,compare:N===void 0?null:N}},Nt.startTransition=function(T){var N=D.T,F={};D.T=F;try{var X=T(),tt=D.S;tt!==null&&tt(F,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(j,z)}catch(at){z(at)}finally{N!==null&&F.types!==null&&(N.types=F.types),D.T=N}},Nt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Nt.use=function(T){return D.H.use(T)},Nt.useActionState=function(T,N,F){return D.H.useActionState(T,N,F)},Nt.useCallback=function(T,N){return D.H.useCallback(T,N)},Nt.useContext=function(T){return D.H.useContext(T)},Nt.useDebugValue=function(){},Nt.useDeferredValue=function(T,N){return D.H.useDeferredValue(T,N)},Nt.useEffect=function(T,N){return D.H.useEffect(T,N)},Nt.useEffectEvent=function(T){return D.H.useEffectEvent(T)},Nt.useId=function(){return D.H.useId()},Nt.useImperativeHandle=function(T,N,F){return D.H.useImperativeHandle(T,N,F)},Nt.useInsertionEffect=function(T,N){return D.H.useInsertionEffect(T,N)},Nt.useLayoutEffect=function(T,N){return D.H.useLayoutEffect(T,N)},Nt.useMemo=function(T,N){return D.H.useMemo(T,N)},Nt.useOptimistic=function(T,N){return D.H.useOptimistic(T,N)},Nt.useReducer=function(T,N,F){return D.H.useReducer(T,N,F)},Nt.useRef=function(T){return D.H.useRef(T)},Nt.useState=function(T){return D.H.useState(T)},Nt.useSyncExternalStore=function(T,N,F){return D.H.useSyncExternalStore(T,N,F)},Nt.useTransition=function(){return D.H.useTransition()},Nt.version="19.2.3",Nt}var ov;function rp(){return ov||(ov=1,$c.exports=oE()),$c.exports}var al=rp(),Wc={exports:{}},el={},Zc={exports:{}},Kc={};var uv;function uE(){return uv||(uv=1,(function(s){function t(E,R){var M=E.length;E.push(R);t:for(;0<M;){var z=M-1>>>1,I=E[z];if(0<l(I,R))E[z]=R,E[M]=I,M=z;else break t}}function i(E){return E.length===0?null:E[0]}function n(E){if(E.length===0)return null;var R=E[0],M=E.pop();if(M!==R){E[0]=M;t:for(var z=0,I=E.length,T=I>>>1;z<T;){var N=2*(z+1)-1,F=E[N],X=N+1,tt=E[X];if(0>l(F,M))X<I&&0>l(tt,F)?(E[z]=tt,E[X]=M,z=X):(E[z]=F,E[N]=M,z=N);else if(X<I&&0>l(tt,M))E[z]=tt,E[X]=M,z=X;else break t}}return R}function l(E,R){var M=E.sortIndex-R.sortIndex;return M!==0?M:E.id-R.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;s.unstable_now=function(){return o.now()}}else{var h=Date,c=h.now();s.unstable_now=function(){return h.now()-c}}var p=[],m=[],g=1,y=null,_=3,x=!1,b=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,U=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(E){for(var R=i(m);R!==null;){if(R.callback===null)n(m);else if(R.startTime<=E)n(m),R.sortIndex=R.expirationTime,t(p,R);else break;R=i(m)}}function B(E){if(w=!1,P(E),!b)if(i(p)!==null)b=!0,j||(j=!0,H());else{var R=i(m);R!==null&&pt(B,R.startTime-E)}}var j=!1,D=-1,$=5,nt=-1;function lt(){return S?!0:!(s.unstable_now()-nt<$)}function it(){if(S=!1,j){var E=s.unstable_now();nt=E;var R=!0;try{t:{b=!1,w&&(w=!1,U(D),D=-1),x=!0;var M=_;try{e:{for(P(E),y=i(p);y!==null&&!(y.expirationTime>E&&lt());){var z=y.callback;if(typeof z=="function"){y.callback=null,_=y.priorityLevel;var I=z(y.expirationTime<=E);if(E=s.unstable_now(),typeof I=="function"){y.callback=I,P(E),R=!0;break e}y===i(p)&&n(p),P(E)}else n(p);y=i(p)}if(y!==null)R=!0;else{var T=i(m);T!==null&&pt(B,T.startTime-E),R=!1}}break t}finally{y=null,_=M,x=!1}R=void 0}}finally{R?H():j=!1}}}var H;if(typeof O=="function")H=function(){O(it)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,Q=J.port2;J.port1.onmessage=it,H=function(){Q.postMessage(null)}}else H=function(){C(it,0)};function pt(E,R){D=C(function(){E(s.unstable_now())},R)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(E){E.callback=null},s.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<E?Math.floor(1e3/E):5},s.unstable_getCurrentPriorityLevel=function(){return _},s.unstable_next=function(E){switch(_){case 1:case 2:case 3:var R=3;break;default:R=_}var M=_;_=R;try{return E()}finally{_=M}},s.unstable_requestPaint=function(){S=!0},s.unstable_runWithPriority=function(E,R){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var M=_;_=E;try{return R()}finally{_=M}},s.unstable_scheduleCallback=function(E,R,M){var z=s.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?z+M:z):M=z,E){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=M+I,E={id:g++,callback:R,priorityLevel:E,startTime:M,expirationTime:I,sortIndex:-1},M>z?(E.sortIndex=M,t(m,E),i(p)===null&&E===i(m)&&(w?(U(D),D=-1):w=!0,pt(B,M-z))):(E.sortIndex=I,t(p,E),b||x||(b=!0,j||(j=!0,H()))),E},s.unstable_shouldYield=lt,s.unstable_wrapCallback=function(E){var R=_;return function(){var M=_;_=R;try{return E.apply(this,arguments)}finally{_=M}}}})(Kc)),Kc}var hv;function hE(){return hv||(hv=1,Zc.exports=uE()),Zc.exports}var Qc={exports:{}},ze={};var cv;function cE(){if(cv)return ze;cv=1;var s=rp();function t(p){var m="https://react.dev/errors/"+p;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)m+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var n={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(p,m,g){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:y==null?null:""+y,children:p,containerInfo:m,implementation:g}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(p,m){if(p==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return ze.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ze.createPortal=function(p,m){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(t(299));return o(p,m,null,g)},ze.flushSync=function(p){var m=h.T,g=n.p;try{if(h.T=null,n.p=2,p)return p()}finally{h.T=m,n.p=g,n.d.f()}},ze.preconnect=function(p,m){typeof p=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,n.d.C(p,m))},ze.prefetchDNS=function(p){typeof p=="string"&&n.d.D(p)},ze.preinit=function(p,m){if(typeof p=="string"&&m&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin),_=typeof m.integrity=="string"?m.integrity:void 0,x=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;g==="style"?n.d.S(p,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:y,integrity:_,fetchPriority:x}):g==="script"&&n.d.X(p,{crossOrigin:y,integrity:_,fetchPriority:x,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},ze.preinitModule=function(p,m){if(typeof p=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var g=c(m.as,m.crossOrigin);n.d.M(p,{crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&n.d.M(p)},ze.preload=function(p,m){if(typeof p=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var g=m.as,y=c(g,m.crossOrigin);n.d.L(p,g,{crossOrigin:y,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},ze.preloadModule=function(p,m){if(typeof p=="string")if(m){var g=c(m.as,m.crossOrigin);n.d.m(p,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:g,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else n.d.m(p)},ze.requestFormReset=function(p){n.d.r(p)},ze.unstable_batchedUpdates=function(p,m){return p(m)},ze.useFormState=function(p,m,g){return h.H.useFormState(p,m,g)},ze.useFormStatus=function(){return h.H.useHostTransitionStatus()},ze.version="19.2.3",ze}var fv;function fE(){if(fv)return Qc.exports;fv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Qc.exports=cE(),Qc.exports}var dv;function dE(){if(dv)return el;dv=1;var s=hE(),t=rp(),i=fE();function n(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function o(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function h(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function c(e){if(e.tag===31){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function p(e){if(o(e)!==e)throw Error(n(188))}function m(e){var r=e.alternate;if(!r){if(r=o(e),r===null)throw Error(n(188));return r!==e?null:e}for(var a=e,u=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(u=f.return,u!==null){a=u;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return p(f),e;if(d===u)return p(f),r;d=d.sibling}throw Error(n(188))}if(a.return!==u.return)a=f,u=d;else{for(var v=!1,A=f.child;A;){if(A===a){v=!0,a=f,u=d;break}if(A===u){v=!0,u=f,a=d;break}A=A.sibling}if(!v){for(A=d.child;A;){if(A===a){v=!0,a=d,u=f;break}if(A===u){v=!0,u=d,a=f;break}A=A.sibling}if(!v)throw Error(n(189))}}if(a.alternate!==u)throw Error(n(190))}if(a.tag!==3)throw Error(n(188));return a.stateNode.current===a?e:r}function g(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=g(e),r!==null)return r;e=e.sibling}return null}var y=Object.assign,_=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),U=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),B=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),$=Symbol.for("react.lazy"),nt=Symbol.for("react.activity"),lt=Symbol.for("react.memo_cache_sentinel"),it=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=it&&e[it]||e["@@iterator"],typeof e=="function"?e:null)}var J=Symbol.for("react.client.reference");function Q(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===J?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case B:return"Suspense";case j:return"SuspenseList";case nt:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case b:return"Portal";case O:return e.displayName||"Context";case U:return(e._context.displayName||"Context")+".Consumer";case P:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return r=e.displayName||null,r!==null?r:Q(e.type)||"Memo";case $:r=e._payload,e=e._init;try{return Q(e(r))}catch{}}return null}var pt=Array.isArray,E=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M={pending:!1,data:null,method:null,action:null},z=[],I=-1;function T(e){return{current:e}}function N(e){0>I||(e.current=z[I],z[I]=null,I--)}function F(e,r){I++,z[I]=e.current,e.current=r}var X=T(null),tt=T(null),at=T(null),ot=T(null);function ft(e,r){switch(F(at,r),F(tt,e),F(X,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?Ry(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=Ry(r),e=My(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}N(X),F(X,e)}function ct(){N(X),N(tt),N(at)}function ut(e){e.memoizedState!==null&&F(ot,e);var r=X.current,a=My(r,e.type);r!==a&&(F(tt,e),F(X,a))}function vt(e){tt.current===e&&(N(X),N(tt)),ot.current===e&&(N(ot),Za._currentValue=M)}var xt,Dt;function Ot(e){if(xt===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);xt=r&&r[1]||"",Dt=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+xt+e+Dt}var _t=!1;function bt(e,r){if(!e||_t)return"";_t=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(r){var st=function(){throw Error()};if(Object.defineProperty(st.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(st,[])}catch(K){var W=K}Reflect.construct(e,[],st)}else{try{st.call()}catch(K){W=K}e.call(st.prototype)}}else{try{throw Error()}catch(K){W=K}(st=e())&&typeof st.catch=="function"&&st.catch(function(){})}}catch(K){if(K&&W&&typeof K.stack=="string")return[K.stack,W.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=u.DetermineComponentFrameRoot(),v=d[0],A=d[1];if(v&&A){var L=v.split(`
`),Y=A.split(`
`);for(f=u=0;u<L.length&&!L[u].includes("DetermineComponentFrameRoot");)u++;for(;f<Y.length&&!Y[f].includes("DetermineComponentFrameRoot");)f++;if(u===L.length||f===Y.length)for(u=L.length-1,f=Y.length-1;1<=u&&0<=f&&L[u]!==Y[f];)f--;for(;1<=u&&0<=f;u--,f--)if(L[u]!==Y[f]){if(u!==1||f!==1)do if(u--,f--,0>f||L[u]!==Y[f]){var et=`
`+L[u].replace(" at new "," at ");return e.displayName&&et.includes("<anonymous>")&&(et=et.replace("<anonymous>",e.displayName)),et}while(1<=u&&0<=f);break}}}finally{_t=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Ot(a):""}function oe(e,r){switch(e.tag){case 26:case 27:case 5:return Ot(e.type);case 16:return Ot("Lazy");case 13:return e.child!==r&&r!==null?Ot("Suspense Fallback"):Ot("Suspense");case 19:return Ot("SuspenseList");case 0:case 15:return bt(e.type,!1);case 11:return bt(e.type.render,!1);case 1:return bt(e.type,!0);case 31:return Ot("Activity");default:return""}}function fe(e){try{var r="",a=null;do r+=oe(e,a),a=e,e=e.return;while(e);return r}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Gi=Object.prototype.hasOwnProperty,ci=s.unstable_scheduleCallback,He=s.unstable_cancelCallback,Br=s.unstable_shouldYield,Nr=s.unstable_requestPaint,_e=s.unstable_now,Pu=s.unstable_getCurrentPriorityLevel,xl=s.unstable_ImmediatePriority,aa=s.unstable_UserBlockingPriority,ts=s.unstable_NormalPriority,vn=s.unstable_LowPriority,es=s.unstable_IdlePriority,bl=s.log,Fu=s.unstable_setDisableYieldValue,_n=null,Be=null;function ti(e){if(typeof bl=="function"&&Fu(e),Be&&typeof Be.setStrictMode=="function")try{Be.setStrictMode(_n,e)}catch{}}var V=Math.clz32?Math.clz32:Qt,Z=Math.log,jt=Math.LN2;function Qt(e){return e>>>=0,e===0?32:31-(Z(e)/jt|0)|0}var Wt=256,Bt=262144,ei=4194304;function ke(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ce(e,r,a){var u=e.pendingLanes;if(u===0)return 0;var f=0,d=e.suspendedLanes,v=e.pingedLanes;e=e.warmLanes;var A=u&134217727;return A!==0?(u=A&~d,u!==0?f=ke(u):(v&=A,v!==0?f=ke(v):a||(a=A&~e,a!==0&&(f=ke(a))))):(A=u&~d,A!==0?f=ke(A):v!==0?f=ke(v):a||(a=u&~e,a!==0&&(f=ke(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function qe(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function la(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rr(){var e=ei;return ei<<=1,(ei&62914560)===0&&(ei=4194304),e}function Xe(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Ir(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function El(e,r,a,u,f,d){var v=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var A=e.entanglements,L=e.expirationTimes,Y=e.hiddenUpdates;for(a=v&~a;0<a;){var et=31-V(a),st=1<<et;A[et]=0,L[et]=-1;var W=Y[et];if(W!==null)for(Y[et]=null,et=0;et<W.length;et++){var K=W[et];K!==null&&(K.lane&=-536870913)}a&=~st}u!==0&&oa(e,u,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(v&~r))}function oa(e,r,a){e.pendingLanes|=r,e.suspendedLanes&=~r;var u=31-V(r);e.entangledLanes|=r,e.entanglements[u]=e.entanglements[u]|1073741824|a&261930}function Ur(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var u=31-V(a),f=1<<u;f&r|e[u]&r&&(e[u]|=r),a&=~f}}function is(e,r){var a=r&-r;return a=(a&42)!==0?1:Lr(a),(a&(e.suspendedLanes|r))!==0?0:a}function Lr(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function xn(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function rs(){var e=R.p;return e!==0?e:(e=window.event,e===void 0?32:Qy(e.type))}function ua(e,r){var a=R.p;try{return R.p=e,r()}finally{R.p=a}}var wi=Math.random().toString(36).slice(2),me="__reactFiber$"+wi,Ne="__reactProps$"+wi,zi="__reactContainer$"+wi,ns="__reactEvents$"+wi,Gu="__reactListeners$"+wi,ha="__reactHandles$"+wi,nr="__reactResources$"+wi,Hi="__reactMarker$"+wi;function ca(e){delete e[me],delete e[Ne],delete e[ns],delete e[Gu],delete e[ha]}function sr(e){var r=e[me];if(r)return r;for(var a=e.parentNode;a;){if(r=a[zi]||a[me]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=Ly(e);e!==null;){if(a=e[me])return a;e=Ly(e)}return r}e=a,a=e.parentNode}return null}function ss(e){if(e=e[me]||e[zi]){var r=e.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return e}return null}function fa(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(n(33))}function as(e){var r=e[nr];return r||(r=e[nr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Re(e){e[Hi]=!0}var gp=new Set,yp={};function bn(e,r){ls(e,r),ls(e+"Capture",r)}function ls(e,r){for(yp[e]=r,e=0;e<r.length;e++)gp.add(r[e])}var Zx=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),vp={},_p={};function Kx(e){return Gi.call(_p,e)?!0:Gi.call(vp,e)?!1:Zx.test(e)?_p[e]=!0:(vp[e]=!0,!1)}function Tl(e,r,a){if(Kx(r))if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var u=r.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+a)}}function Sl(e,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+a)}}function ar(e,r,a,u){if(u===null)e.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(r,a,""+u)}}function fi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xp(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Qx(e,r,a){var u=Object.getOwnPropertyDescriptor(e.constructor.prototype,r);if(!e.hasOwnProperty(r)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var f=u.get,d=u.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(e,r,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function zu(e){if(!e._valueTracker){var r=xp(e)?"checked":"value";e._valueTracker=Qx(e,r,""+e[r])}}function bp(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),u="";return e&&(u=xp(e)?e.checked?"true":"false":e.value),e=u,e!==a?(r.setValue(e),!0):!1}function Al(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Jx=/[\n"\\]/g;function di(e){return e.replace(Jx,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Hu(e,r,a,u,f,d,v,A){e.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?e.type=v:e.removeAttribute("type"),r!=null?v==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+fi(r)):e.value!==""+fi(r)&&(e.value=""+fi(r)):v!=="submit"&&v!=="reset"||e.removeAttribute("value"),r!=null?ku(e,v,fi(r)):a!=null?ku(e,v,fi(a)):u!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?e.name=""+fi(A):e.removeAttribute("name")}function Ep(e,r,a,u,f,d,v,A){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){zu(e);return}a=a!=null?""+fi(a):"",r=r!=null?""+fi(r):a,A||r===e.value||(e.value=r),e.defaultValue=r}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,e.checked=A?e.checked:!!u,e.defaultChecked=!!u,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(e.name=v),zu(e)}function ku(e,r,a){r==="number"&&Al(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function os(e,r,a,u){if(e=e.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=r.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&u&&(e[a].defaultSelected=!0)}else{for(a=""+fi(a),r=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,u&&(e[f].defaultSelected=!0);return}r!==null||e[f].disabled||(r=e[f])}r!==null&&(r.selected=!0)}}function Tp(e,r,a){if(r!=null&&(r=""+fi(r),r!==e.value&&(e.value=r),a==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=a!=null?""+fi(a):""}function Sp(e,r,a,u){if(r==null){if(u!=null){if(a!=null)throw Error(n(92));if(pt(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),r=a}a=fi(r),e.defaultValue=a,u=e.textContent,u===a&&u!==""&&u!==null&&(e.value=u),zu(e)}function us(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var tb=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ap(e,r,a){var u=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":u?e.setProperty(r,a):typeof a!="number"||a===0||tb.has(r)?r==="float"?e.cssFloat=a:e[r]=(""+a).trim():e[r]=a+"px"}function wp(e,r,a){if(r!=null&&typeof r!="object")throw Error(n(62));if(e=e.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||r!=null&&r.hasOwnProperty(u)||(u.indexOf("--")===0?e.setProperty(u,""):u==="float"?e.cssFloat="":e[u]="");for(var f in r)u=r[f],r.hasOwnProperty(f)&&a[f]!==u&&Ap(e,f,u)}else for(var d in r)r.hasOwnProperty(d)&&Ap(e,d,r[d])}function Xu(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var eb=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ib=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wl(e){return ib.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function lr(){}var Vu=null;function ju(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hs=null,cs=null;function Cp(e){var r=ss(e);if(r&&(e=r.stateNode)){var a=e[Ne]||null;t:switch(e=r.stateNode,r.type){case"input":if(Hu(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+di(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var u=a[r];if(u!==e&&u.form===e.form){var f=u[Ne]||null;if(!f)throw Error(n(90));Hu(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)u=a[r],u.form===e.form&&bp(u)}break t;case"textarea":Tp(e,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&os(e,!!a.multiple,r,!1)}}}var qu=!1;function Rp(e,r,a){if(qu)return e(r,a);qu=!0;try{var u=e(r);return u}finally{if(qu=!1,(hs!==null||cs!==null)&&(po(),hs&&(r=hs,e=cs,cs=hs=null,Cp(r),e)))for(r=0;r<e.length;r++)Cp(e[r])}}function da(e,r){var a=e.stateNode;if(a===null)return null;var u=a[Ne]||null;if(u===null)return null;a=u[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(n(231,r,typeof a));return a}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yu=!1;if(or)try{var pa={};Object.defineProperty(pa,"passive",{get:function(){Yu=!0}}),window.addEventListener("test",pa,pa),window.removeEventListener("test",pa,pa)}catch{Yu=!1}var Pr=null,$u=null,Cl=null;function Mp(){if(Cl)return Cl;var e,r=$u,a=r.length,u,f="value"in Pr?Pr.value:Pr.textContent,d=f.length;for(e=0;e<a&&r[e]===f[e];e++);var v=a-e;for(u=1;u<=v&&r[a-u]===f[d-u];u++);return Cl=f.slice(e,1<u?1-u:void 0)}function Rl(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Ml(){return!0}function Dp(){return!1}function Ye(e){function r(a,u,f,d,v){this._reactName=a,this._targetInst=f,this.type=u,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var A in e)e.hasOwnProperty(A)&&(a=e[A],this[A]=a?a(d):d[A]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Ml:Dp,this.isPropagationStopped=Dp,this}return y(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),r}var En={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dl=Ye(En),ma=y({},En,{view:0,detail:0}),rb=Ye(ma),Wu,Zu,ga,Ol=y({},ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Qu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ga&&(ga&&e.type==="mousemove"?(Wu=e.screenX-ga.screenX,Zu=e.screenY-ga.screenY):Zu=Wu=0,ga=e),Wu)},movementY:function(e){return"movementY"in e?e.movementY:Zu}}),Op=Ye(Ol),nb=y({},Ol,{dataTransfer:0}),sb=Ye(nb),ab=y({},ma,{relatedTarget:0}),Ku=Ye(ab),lb=y({},En,{animationName:0,elapsedTime:0,pseudoElement:0}),ob=Ye(lb),ub=y({},En,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),hb=Ye(ub),cb=y({},En,{data:0}),Bp=Ye(cb),fb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},db={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mb(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=pb[e])?!!r[e]:!1}function Qu(){return mb}var gb=y({},ma,{key:function(e){if(e.key){var r=fb[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Rl(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?db[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Qu,charCode:function(e){return e.type==="keypress"?Rl(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rl(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),yb=Ye(gb),vb=y({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Np=Ye(vb),_b=y({},ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Qu}),xb=Ye(_b),bb=y({},En,{propertyName:0,elapsedTime:0,pseudoElement:0}),Eb=Ye(bb),Tb=y({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Sb=Ye(Tb),Ab=y({},En,{newState:0,oldState:0}),wb=Ye(Ab),Cb=[9,13,27,32],Ju=or&&"CompositionEvent"in window,ya=null;or&&"documentMode"in document&&(ya=document.documentMode);var Rb=or&&"TextEvent"in window&&!ya,Ip=or&&(!Ju||ya&&8<ya&&11>=ya),Up=" ",Lp=!1;function Pp(e,r){switch(e){case"keyup":return Cb.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fs=!1;function Mb(e,r){switch(e){case"compositionend":return Fp(r);case"keypress":return r.which!==32?null:(Lp=!0,Up);case"textInput":return e=r.data,e===Up&&Lp?null:e;default:return null}}function Db(e,r){if(fs)return e==="compositionend"||!Ju&&Pp(e,r)?(e=Mp(),Cl=$u=Pr=null,fs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Ip&&r.locale!=="ko"?null:r.data;default:return null}}var Ob={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gp(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!Ob[e.type]:r==="textarea"}function zp(e,r,a,u){hs?cs?cs.push(u):cs=[u]:hs=u,r=bo(r,"onChange"),0<r.length&&(a=new Dl("onChange","change",null,a,u),e.push({event:a,listeners:r}))}var va=null,_a=null;function Bb(e){Ey(e,0)}function Bl(e){var r=fa(e);if(bp(r))return e}function Hp(e,r){if(e==="change")return r}var kp=!1;if(or){var th;if(or){var eh="oninput"in document;if(!eh){var Xp=document.createElement("div");Xp.setAttribute("oninput","return;"),eh=typeof Xp.oninput=="function"}th=eh}else th=!1;kp=th&&(!document.documentMode||9<document.documentMode)}function Vp(){va&&(va.detachEvent("onpropertychange",jp),_a=va=null)}function jp(e){if(e.propertyName==="value"&&Bl(_a)){var r=[];zp(r,_a,e,ju(e)),Rp(Bb,r)}}function Nb(e,r,a){e==="focusin"?(Vp(),va=r,_a=a,va.attachEvent("onpropertychange",jp)):e==="focusout"&&Vp()}function Ib(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bl(_a)}function Ub(e,r){if(e==="click")return Bl(r)}function Lb(e,r){if(e==="input"||e==="change")return Bl(r)}function Pb(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ii=typeof Object.is=="function"?Object.is:Pb;function xa(e,r){if(ii(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),u=Object.keys(r);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var f=a[u];if(!Gi.call(r,f)||!ii(e[f],r[f]))return!1}return!0}function qp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Yp(e,r){var a=qp(e);e=0;for(var u;a;){if(a.nodeType===3){if(u=e+a.textContent.length,e<=r&&u>=r)return{node:a,offset:r-e};e=u}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=qp(a)}}function $p(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?$p(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Wp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=Al(e.document);r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=Al(e.document)}return r}function ih(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Fb=or&&"documentMode"in document&&11>=document.documentMode,ds=null,rh=null,ba=null,nh=!1;function Zp(e,r,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;nh||ds==null||ds!==Al(u)||(u=ds,"selectionStart"in u&&ih(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),ba&&xa(ba,u)||(ba=u,u=bo(rh,"onSelect"),0<u.length&&(r=new Dl("onSelect","select",null,r,a),e.push({event:r,listeners:u}),r.target=ds)))}function Tn(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var ps={animationend:Tn("Animation","AnimationEnd"),animationiteration:Tn("Animation","AnimationIteration"),animationstart:Tn("Animation","AnimationStart"),transitionrun:Tn("Transition","TransitionRun"),transitionstart:Tn("Transition","TransitionStart"),transitioncancel:Tn("Transition","TransitionCancel"),transitionend:Tn("Transition","TransitionEnd")},sh={},Kp={};or&&(Kp=document.createElement("div").style,"AnimationEvent"in window||(delete ps.animationend.animation,delete ps.animationiteration.animation,delete ps.animationstart.animation),"TransitionEvent"in window||delete ps.transitionend.transition);function Sn(e){if(sh[e])return sh[e];if(!ps[e])return e;var r=ps[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in Kp)return sh[e]=r[a];return e}var Qp=Sn("animationend"),Jp=Sn("animationiteration"),tm=Sn("animationstart"),Gb=Sn("transitionrun"),zb=Sn("transitionstart"),Hb=Sn("transitioncancel"),em=Sn("transitionend"),im=new Map,ah="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ah.push("scrollEnd");function Ci(e,r){im.set(e,r),bn(r,[e])}var Nl=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pi=[],ms=0,lh=0;function Il(){for(var e=ms,r=lh=ms=0;r<e;){var a=pi[r];pi[r++]=null;var u=pi[r];pi[r++]=null;var f=pi[r];pi[r++]=null;var d=pi[r];if(pi[r++]=null,u!==null&&f!==null){var v=u.pending;v===null?f.next=f:(f.next=v.next,v.next=f),u.pending=f}d!==0&&rm(a,f,d)}}function Ul(e,r,a,u){pi[ms++]=e,pi[ms++]=r,pi[ms++]=a,pi[ms++]=u,lh|=u,e.lanes|=u,e=e.alternate,e!==null&&(e.lanes|=u)}function oh(e,r,a,u){return Ul(e,r,a,u),Ll(e)}function An(e,r){return Ul(e,null,null,r),Ll(e)}function rm(e,r,a){e.lanes|=a;var u=e.alternate;u!==null&&(u.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,u=d.alternate,u!==null&&(u.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&r!==null&&(f=31-V(a),e=d.hiddenUpdates,u=e[f],u===null?e[f]=[r]:u.push(r),r.lane=a|536870912),d):null}function Ll(e){if(50<Xa)throw Xa=0,yc=null,Error(n(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var gs={};function kb(e,r,a,u){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(e,r,a,u){return new kb(e,r,a,u)}function uh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ur(e,r){var a=e.alternate;return a===null?(a=ri(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function nm(e,r){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,r=a.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Pl(e,r,a,u,f,d){var v=0;if(u=e,typeof e=="function")uh(e)&&(v=1);else if(typeof e=="string")v=Y1(e,a,X.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case nt:return e=ri(31,a,r,f),e.elementType=nt,e.lanes=d,e;case w:return wn(a.children,f,d,r);case S:v=8,f|=24;break;case C:return e=ri(12,a,r,f|2),e.elementType=C,e.lanes=d,e;case B:return e=ri(13,a,r,f),e.elementType=B,e.lanes=d,e;case j:return e=ri(19,a,r,f),e.elementType=j,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:v=10;break t;case U:v=9;break t;case P:v=11;break t;case D:v=14;break t;case $:v=16,u=null;break t}v=29,a=Error(n(130,e===null?"null":typeof e,"")),u=null}return r=ri(v,a,r,f),r.elementType=e,r.type=u,r.lanes=d,r}function wn(e,r,a,u){return e=ri(7,e,u,r),e.lanes=a,e}function hh(e,r,a){return e=ri(6,e,null,r),e.lanes=a,e}function sm(e){var r=ri(18,null,null,0);return r.stateNode=e,r}function ch(e,r,a){return r=ri(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var am=new WeakMap;function mi(e,r){if(typeof e=="object"&&e!==null){var a=am.get(e);return a!==void 0?a:(r={value:e,source:r,stack:fe(r)},am.set(e,r),r)}return{value:e,source:r,stack:fe(r)}}var ys=[],vs=0,Fl=null,Ea=0,gi=[],yi=0,Fr=null,ki=1,Xi="";function hr(e,r){ys[vs++]=Ea,ys[vs++]=Fl,Fl=e,Ea=r}function lm(e,r,a){gi[yi++]=ki,gi[yi++]=Xi,gi[yi++]=Fr,Fr=e;var u=ki;e=Xi;var f=32-V(u)-1;u&=~(1<<f),a+=1;var d=32-V(r)+f;if(30<d){var v=f-f%5;d=(u&(1<<v)-1).toString(32),u>>=v,f-=v,ki=1<<32-V(r)+f|a<<f|u,Xi=d+e}else ki=1<<d|a<<f|u,Xi=e}function fh(e){e.return!==null&&(hr(e,1),lm(e,1,0))}function dh(e){for(;e===Fl;)Fl=ys[--vs],ys[vs]=null,Ea=ys[--vs],ys[vs]=null;for(;e===Fr;)Fr=gi[--yi],gi[yi]=null,Xi=gi[--yi],gi[yi]=null,ki=gi[--yi],gi[yi]=null}function om(e,r){gi[yi++]=ki,gi[yi++]=Xi,gi[yi++]=Fr,ki=r.id,Xi=r.overflow,Fr=e}var Ie=null,re=null,Xt=!1,Gr=null,vi=!1,ph=Error(n(519));function zr(e){var r=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ta(mi(r,e)),ph}function um(e){var r=e.stateNode,a=e.type,u=e.memoizedProps;switch(r[me]=e,r[Ne]=u,a){case"dialog":Gt("cancel",r),Gt("close",r);break;case"iframe":case"object":case"embed":Gt("load",r);break;case"video":case"audio":for(a=0;a<ja.length;a++)Gt(ja[a],r);break;case"source":Gt("error",r);break;case"img":case"image":case"link":Gt("error",r),Gt("load",r);break;case"details":Gt("toggle",r);break;case"input":Gt("invalid",r),Ep(r,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Gt("invalid",r);break;case"textarea":Gt("invalid",r),Sp(r,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||u.suppressHydrationWarning===!0||wy(r.textContent,a)?(u.popover!=null&&(Gt("beforetoggle",r),Gt("toggle",r)),u.onScroll!=null&&Gt("scroll",r),u.onScrollEnd!=null&&Gt("scrollend",r),u.onClick!=null&&(r.onclick=lr),r=!0):r=!1,r||zr(e,!0)}function hm(e){for(Ie=e.return;Ie;)switch(Ie.tag){case 5:case 31:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:Ie=Ie.return}}function _s(e){if(e!==Ie)return!1;if(!Xt)return hm(e),Xt=!0,!1;var r=e.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||Bc(e.type,e.memoizedProps)),a=!a),a&&re&&zr(e),hm(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));re=Uy(e)}else if(r===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));re=Uy(e)}else r===27?(r=re,tn(e.type)?(e=Pc,Pc=null,re=e):re=r):re=Ie?xi(e.stateNode.nextSibling):null;return!0}function Cn(){re=Ie=null,Xt=!1}function mh(){var e=Gr;return e!==null&&(Ke===null?Ke=e:Ke.push.apply(Ke,e),Gr=null),e}function Ta(e){Gr===null?Gr=[e]:Gr.push(e)}var gh=T(null),Rn=null,cr=null;function Hr(e,r,a){F(gh,r._currentValue),r._currentValue=a}function fr(e){e._currentValue=gh.current,N(gh)}function yh(e,r,a){for(;e!==null;){var u=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,u!==null&&(u.childLanes|=r)):u!==null&&(u.childLanes&r)!==r&&(u.childLanes|=r),e===a)break;e=e.return}}function vh(e,r,a,u){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;t:for(;d!==null;){var A=d;d=f;for(var L=0;L<r.length;L++)if(A.context===r[L]){d.lanes|=a,A=d.alternate,A!==null&&(A.lanes|=a),yh(d.return,a,e),u||(v=null);break t}d=A.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(n(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),yh(v,a,e),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===e){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function xs(e,r,a,u){e=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(n(387));if(v=v.memoizedProps,v!==null){var A=f.type;ii(f.pendingProps.value,v.value)||(e!==null?e.push(A):e=[A])}}else if(f===ot.current){if(v=f.alternate,v===null)throw Error(n(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Za):e=[Za])}f=f.return}e!==null&&vh(r,e,a,u),r.flags|=262144}function Gl(e){for(e=e.firstContext;e!==null;){if(!ii(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mn(e){Rn=e,cr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ue(e){return cm(Rn,e)}function zl(e,r){return Rn===null&&Mn(e),cm(e,r)}function cm(e,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},cr===null){if(e===null)throw Error(n(308));cr=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else cr=cr.next=r;return a}var Xb=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(a,u){e.push(u)}};this.abort=function(){r.aborted=!0,e.forEach(function(a){return a()})}},Vb=s.unstable_scheduleCallback,jb=s.unstable_NormalPriority,xe={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function _h(){return{controller:new Xb,data:new Map,refCount:0}}function Sa(e){e.refCount--,e.refCount===0&&Vb(jb,function(){e.controller.abort()})}var Aa=null,xh=0,bs=0,Es=null;function qb(e,r){if(Aa===null){var a=Aa=[];xh=0,bs=Tc(),Es={status:"pending",value:void 0,then:function(u){a.push(u)}}}return xh++,r.then(fm,fm),r}function fm(){if(--xh===0&&Aa!==null){Es!==null&&(Es.status="fulfilled");var e=Aa;Aa=null,bs=0,Es=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function Yb(e,r){var a=[],u={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){u.status="fulfilled",u.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(u.status="rejected",u.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),u}var dm=E.S;E.S=function(e,r){Zg=_e(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&qb(e,r),dm!==null&&dm(e,r)};var Dn=T(null);function bh(){var e=Dn.current;return e!==null?e:ie.pooledCache}function Hl(e,r){r===null?F(Dn,Dn.current):F(Dn,r.pool)}function pm(){var e=bh();return e===null?null:{parent:xe._currentValue,pool:e}}var Ts=Error(n(460)),Eh=Error(n(474)),kl=Error(n(542)),Xl={then:function(){}};function mm(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gm(e,r,a){switch(a=e[a],a===void 0?e.push(r):a!==r&&(r.then(lr,lr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,vm(e),e;default:if(typeof r.status=="string")r.then(lr,lr);else{if(e=ie,e!==null&&100<e.shellSuspendCounter)throw Error(n(482));e=r,e.status="pending",e.then(function(u){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=u}},function(u){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=u}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,vm(e),e}throw Bn=r,Ts}}function On(e){try{var r=e._init;return r(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Bn=a,Ts):a}}var Bn=null;function ym(){if(Bn===null)throw Error(n(459));var e=Bn;return Bn=null,e}function vm(e){if(e===Ts||e===kl)throw Error(n(483))}var Ss=null,wa=0;function Vl(e){var r=wa;return wa+=1,Ss===null&&(Ss=[]),gm(Ss,e,r)}function Ca(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function jl(e,r){throw r.$$typeof===_?Error(n(525)):(e=Object.prototype.toString.call(r),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function _m(e){function r(k,G){if(e){var q=k.deletions;q===null?(k.deletions=[G],k.flags|=16):q.push(G)}}function a(k,G){if(!e)return null;for(;G!==null;)r(k,G),G=G.sibling;return null}function u(k){for(var G=new Map;k!==null;)k.key!==null?G.set(k.key,k):G.set(k.index,k),k=k.sibling;return G}function f(k,G){return k=ur(k,G),k.index=0,k.sibling=null,k}function d(k,G,q){return k.index=q,e?(q=k.alternate,q!==null?(q=q.index,q<G?(k.flags|=67108866,G):q):(k.flags|=67108866,G)):(k.flags|=1048576,G)}function v(k){return e&&k.alternate===null&&(k.flags|=67108866),k}function A(k,G,q,rt){return G===null||G.tag!==6?(G=hh(q,k.mode,rt),G.return=k,G):(G=f(G,q),G.return=k,G)}function L(k,G,q,rt){var Ct=q.type;return Ct===w?et(k,G,q.props.children,rt,q.key):G!==null&&(G.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$&&On(Ct)===G.type)?(G=f(G,q.props),Ca(G,q),G.return=k,G):(G=Pl(q.type,q.key,q.props,null,k.mode,rt),Ca(G,q),G.return=k,G)}function Y(k,G,q,rt){return G===null||G.tag!==4||G.stateNode.containerInfo!==q.containerInfo||G.stateNode.implementation!==q.implementation?(G=ch(q,k.mode,rt),G.return=k,G):(G=f(G,q.children||[]),G.return=k,G)}function et(k,G,q,rt,Ct){return G===null||G.tag!==7?(G=wn(q,k.mode,rt,Ct),G.return=k,G):(G=f(G,q),G.return=k,G)}function st(k,G,q){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=hh(""+G,k.mode,q),G.return=k,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case x:return q=Pl(G.type,G.key,G.props,null,k.mode,q),Ca(q,G),q.return=k,q;case b:return G=ch(G,k.mode,q),G.return=k,G;case $:return G=On(G),st(k,G,q)}if(pt(G)||H(G))return G=wn(G,k.mode,q,null),G.return=k,G;if(typeof G.then=="function")return st(k,Vl(G),q);if(G.$$typeof===O)return st(k,zl(k,G),q);jl(k,G)}return null}function W(k,G,q,rt){var Ct=G!==null?G.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return Ct!==null?null:A(k,G,""+q,rt);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return q.key===Ct?L(k,G,q,rt):null;case b:return q.key===Ct?Y(k,G,q,rt):null;case $:return q=On(q),W(k,G,q,rt)}if(pt(q)||H(q))return Ct!==null?null:et(k,G,q,rt,null);if(typeof q.then=="function")return W(k,G,Vl(q),rt);if(q.$$typeof===O)return W(k,G,zl(k,q),rt);jl(k,q)}return null}function K(k,G,q,rt,Ct){if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return k=k.get(q)||null,A(G,k,""+rt,Ct);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case x:return k=k.get(rt.key===null?q:rt.key)||null,L(G,k,rt,Ct);case b:return k=k.get(rt.key===null?q:rt.key)||null,Y(G,k,rt,Ct);case $:return rt=On(rt),K(k,G,q,rt,Ct)}if(pt(rt)||H(rt))return k=k.get(q)||null,et(G,k,rt,Ct,null);if(typeof rt.then=="function")return K(k,G,q,Vl(rt),Ct);if(rt.$$typeof===O)return K(k,G,q,zl(G,rt),Ct);jl(G,rt)}return null}function yt(k,G,q,rt){for(var Ct=null,qt=null,Et=G,Pt=G=0,kt=null;Et!==null&&Pt<q.length;Pt++){Et.index>Pt?(kt=Et,Et=null):kt=Et.sibling;var Yt=W(k,Et,q[Pt],rt);if(Yt===null){Et===null&&(Et=kt);break}e&&Et&&Yt.alternate===null&&r(k,Et),G=d(Yt,G,Pt),qt===null?Ct=Yt:qt.sibling=Yt,qt=Yt,Et=kt}if(Pt===q.length)return a(k,Et),Xt&&hr(k,Pt),Ct;if(Et===null){for(;Pt<q.length;Pt++)Et=st(k,q[Pt],rt),Et!==null&&(G=d(Et,G,Pt),qt===null?Ct=Et:qt.sibling=Et,qt=Et);return Xt&&hr(k,Pt),Ct}for(Et=u(Et);Pt<q.length;Pt++)kt=K(Et,k,Pt,q[Pt],rt),kt!==null&&(e&&kt.alternate!==null&&Et.delete(kt.key===null?Pt:kt.key),G=d(kt,G,Pt),qt===null?Ct=kt:qt.sibling=kt,qt=kt);return e&&Et.forEach(function(an){return r(k,an)}),Xt&&hr(k,Pt),Ct}function Rt(k,G,q,rt){if(q==null)throw Error(n(151));for(var Ct=null,qt=null,Et=G,Pt=G=0,kt=null,Yt=q.next();Et!==null&&!Yt.done;Pt++,Yt=q.next()){Et.index>Pt?(kt=Et,Et=null):kt=Et.sibling;var an=W(k,Et,Yt.value,rt);if(an===null){Et===null&&(Et=kt);break}e&&Et&&an.alternate===null&&r(k,Et),G=d(an,G,Pt),qt===null?Ct=an:qt.sibling=an,qt=an,Et=kt}if(Yt.done)return a(k,Et),Xt&&hr(k,Pt),Ct;if(Et===null){for(;!Yt.done;Pt++,Yt=q.next())Yt=st(k,Yt.value,rt),Yt!==null&&(G=d(Yt,G,Pt),qt===null?Ct=Yt:qt.sibling=Yt,qt=Yt);return Xt&&hr(k,Pt),Ct}for(Et=u(Et);!Yt.done;Pt++,Yt=q.next())Yt=K(Et,k,Pt,Yt.value,rt),Yt!==null&&(e&&Yt.alternate!==null&&Et.delete(Yt.key===null?Pt:Yt.key),G=d(Yt,G,Pt),qt===null?Ct=Yt:qt.sibling=Yt,qt=Yt);return e&&Et.forEach(function(nE){return r(k,nE)}),Xt&&hr(k,Pt),Ct}function ee(k,G,q,rt){if(typeof q=="object"&&q!==null&&q.type===w&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case x:t:{for(var Ct=q.key;G!==null;){if(G.key===Ct){if(Ct=q.type,Ct===w){if(G.tag===7){a(k,G.sibling),rt=f(G,q.props.children),rt.return=k,k=rt;break t}}else if(G.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===$&&On(Ct)===G.type){a(k,G.sibling),rt=f(G,q.props),Ca(rt,q),rt.return=k,k=rt;break t}a(k,G);break}else r(k,G);G=G.sibling}q.type===w?(rt=wn(q.props.children,k.mode,rt,q.key),rt.return=k,k=rt):(rt=Pl(q.type,q.key,q.props,null,k.mode,rt),Ca(rt,q),rt.return=k,k=rt)}return v(k);case b:t:{for(Ct=q.key;G!==null;){if(G.key===Ct)if(G.tag===4&&G.stateNode.containerInfo===q.containerInfo&&G.stateNode.implementation===q.implementation){a(k,G.sibling),rt=f(G,q.children||[]),rt.return=k,k=rt;break t}else{a(k,G);break}else r(k,G);G=G.sibling}rt=ch(q,k.mode,rt),rt.return=k,k=rt}return v(k);case $:return q=On(q),ee(k,G,q,rt)}if(pt(q))return yt(k,G,q,rt);if(H(q)){if(Ct=H(q),typeof Ct!="function")throw Error(n(150));return q=Ct.call(q),Rt(k,G,q,rt)}if(typeof q.then=="function")return ee(k,G,Vl(q),rt);if(q.$$typeof===O)return ee(k,G,zl(k,q),rt);jl(k,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,G!==null&&G.tag===6?(a(k,G.sibling),rt=f(G,q),rt.return=k,k=rt):(a(k,G),rt=hh(q,k.mode,rt),rt.return=k,k=rt),v(k)):a(k,G)}return function(k,G,q,rt){try{wa=0;var Ct=ee(k,G,q,rt);return Ss=null,Ct}catch(Et){if(Et===Ts||Et===kl)throw Et;var qt=ri(29,Et,null,k.mode);return qt.lanes=rt,qt.return=k,qt}}}var Nn=_m(!0),xm=_m(!1),kr=!1;function Th(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Sh(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Xr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Vr(e,r,a){var u=e.updateQueue;if(u===null)return null;if(u=u.shared,($t&2)!==0){var f=u.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),u.pending=r,r=Ll(e),rm(e,null,a),r}return Ul(e,u,r,a),Ll(e)}function Ra(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Ur(e,a)}}function Ah(e,r){var a=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:u.shared,callbacks:u.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}var wh=!1;function Ma(){if(wh){var e=Es;if(e!==null)throw e}}function Da(e,r,a,u){wh=!1;var f=e.updateQueue;kr=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,Y=L.next;L.next=null,v===null?d=Y:v.next=Y,v=L;var et=e.alternate;et!==null&&(et=et.updateQueue,A=et.lastBaseUpdate,A!==v&&(A===null?et.firstBaseUpdate=Y:A.next=Y,et.lastBaseUpdate=L))}if(d!==null){var st=f.baseState;v=0,et=Y=L=null,A=d;do{var W=A.lane&-536870913,K=W!==A.lane;if(K?(Ht&W)===W:(u&W)===W){W!==0&&W===bs&&(wh=!0),et!==null&&(et=et.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});t:{var yt=e,Rt=A;W=r;var ee=a;switch(Rt.tag){case 1:if(yt=Rt.payload,typeof yt=="function"){st=yt.call(ee,st,W);break t}st=yt;break t;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=Rt.payload,W=typeof yt=="function"?yt.call(ee,st,W):yt,W==null)break t;st=y({},st,W);break t;case 2:kr=!0}}W=A.callback,W!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[W]:K.push(W))}else K={lane:W,tag:A.tag,payload:A.payload,callback:A.callback,next:null},et===null?(Y=et=K,L=st):et=et.next=K,v|=W;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;K=A,A=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);et===null&&(L=st),f.baseState=L,f.firstBaseUpdate=Y,f.lastBaseUpdate=et,d===null&&(f.shared.lanes=0),Wr|=v,e.lanes=v,e.memoizedState=st}}function bm(e,r){if(typeof e!="function")throw Error(n(191,e));e.call(r)}function Em(e,r){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)bm(a[e],r)}var As=T(null),ql=T(0);function Tm(e,r){e=br,F(ql,e),F(As,r),br=e|r.baseLanes}function Ch(){F(ql,br),F(As,As.current)}function Rh(){br=ql.current,N(As),N(ql)}var ni=T(null),_i=null;function jr(e){var r=e.alternate;F(ge,ge.current&1),F(ni,e),_i===null&&(r===null||As.current!==null||r.memoizedState!==null)&&(_i=e)}function Mh(e){F(ge,ge.current),F(ni,e),_i===null&&(_i=e)}function Sm(e){e.tag===22?(F(ge,ge.current),F(ni,e),_i===null&&(_i=e)):qr()}function qr(){F(ge,ge.current),F(ni,ni.current)}function si(e){N(ni),_i===e&&(_i=null),N(ge)}var ge=T(0);function Yl(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||Uc(a)||Lc(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var dr=0,Lt=null,Jt=null,be=null,$l=!1,ws=!1,In=!1,Wl=0,Oa=0,Cs=null,$b=0;function de(){throw Error(n(321))}function Dh(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!ii(e[a],r[a]))return!1;return!0}function Oh(e,r,a,u,f,d){return dr=d,Lt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,E.H=e===null||e.memoizedState===null?lg:qh,In=!1,d=a(u,f),In=!1,ws&&(d=wm(r,a,u,f)),Am(e),d}function Am(e){E.H=Ia;var r=Jt!==null&&Jt.next!==null;if(dr=0,be=Jt=Lt=null,$l=!1,Oa=0,Cs=null,r)throw Error(n(300));e===null||Ee||(e=e.dependencies,e!==null&&Gl(e)&&(Ee=!0))}function wm(e,r,a,u){Lt=e;var f=0;do{if(ws&&(Cs=null),Oa=0,ws=!1,25<=f)throw Error(n(301));if(f+=1,be=Jt=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}E.H=og,d=r(a,u)}while(ws);return d}function Wb(){var e=E.H,r=e.useState()[0];return r=typeof r.then=="function"?Ba(r):r,e=e.useState()[0],(Jt!==null?Jt.memoizedState:null)!==e&&(Lt.flags|=1024),r}function Bh(){var e=Wl!==0;return Wl=0,e}function Nh(e,r,a){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a}function Ih(e){if($l){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}$l=!1}dr=0,be=Jt=Lt=null,ws=!1,Oa=Wl=0,Cs=null}function Ve(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Lt.memoizedState=be=e:be=be.next=e,be}function ye(){if(Jt===null){var e=Lt.alternate;e=e!==null?e.memoizedState:null}else e=Jt.next;var r=be===null?Lt.memoizedState:be.next;if(r!==null)be=r,Jt=e;else{if(e===null)throw Lt.alternate===null?Error(n(467)):Error(n(310));Jt=e,e={memoizedState:Jt.memoizedState,baseState:Jt.baseState,baseQueue:Jt.baseQueue,queue:Jt.queue,next:null},be===null?Lt.memoizedState=be=e:be=be.next=e}return be}function Zl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ba(e){var r=Oa;return Oa+=1,Cs===null&&(Cs=[]),e=gm(Cs,e,r),r=Lt,(be===null?r.memoizedState:be.next)===null&&(r=r.alternate,E.H=r===null||r.memoizedState===null?lg:qh),e}function Kl(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Ba(e);if(e.$$typeof===O)return Ue(e)}throw Error(n(438,String(e)))}function Uh(e){var r=null,a=Lt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var u=Lt.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(r={data:u.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Zl(),Lt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(e),u=0;u<e;u++)a[u]=lt;return r.index++,a}function pr(e,r){return typeof r=="function"?r(e):r}function Ql(e){var r=ye();return Lh(r,Jt,e)}function Lh(e,r,a){var u=e.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=a;var f=e.baseQueue,d=u.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}r.baseQueue=f=d,u.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{r=f.next;var A=v=null,L=null,Y=r,et=!1;do{var st=Y.lane&-536870913;if(st!==Y.lane?(Ht&st)===st:(dr&st)===st){var W=Y.revertLane;if(W===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),st===bs&&(et=!0);else if((dr&W)===W){Y=Y.next,W===bs&&(et=!0);continue}else st={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(A=L=st,v=d):L=L.next=st,Lt.lanes|=W,Wr|=W;st=Y.action,In&&a(d,st),d=Y.hasEagerState?Y.eagerState:a(d,st)}else W={lane:st,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(A=L=W,v=d):L=L.next=W,Lt.lanes|=st,Wr|=st;Y=Y.next}while(Y!==null&&Y!==r);if(L===null?v=d:L.next=A,!ii(d,e.memoizedState)&&(Ee=!0,et&&(a=Es,a!==null)))throw a;e.memoizedState=d,e.baseState=v,e.baseQueue=L,u.lastRenderedState=d}return f===null&&(u.lanes=0),[e.memoizedState,u.dispatch]}function Ph(e){var r=ye(),a=r.queue;if(a===null)throw Error(n(311));a.lastRenderedReducer=e;var u=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=e(d,v.action),v=v.next;while(v!==f);ii(d,r.memoizedState)||(Ee=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,u]}function Cm(e,r,a){var u=Lt,f=ye(),d=Xt;if(d){if(a===void 0)throw Error(n(407));a=a()}else a=r();var v=!ii((Jt||f).memoizedState,a);if(v&&(f.memoizedState=a,Ee=!0),f=f.queue,zh(Dm.bind(null,u,f,e),[e]),f.getSnapshot!==r||v||be!==null&&be.memoizedState.tag&1){if(u.flags|=2048,Rs(9,{destroy:void 0},Mm.bind(null,u,f,a,r),null),ie===null)throw Error(n(349));d||(dr&127)!==0||Rm(u,r,a)}return a}function Rm(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Lt.updateQueue,r===null?(r=Zl(),Lt.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function Mm(e,r,a,u){r.value=a,r.getSnapshot=u,Om(r)&&Bm(e)}function Dm(e,r,a){return a(function(){Om(r)&&Bm(e)})}function Om(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!ii(e,a)}catch{return!0}}function Bm(e){var r=An(e,2);r!==null&&Qe(r,e,2)}function Fh(e){var r=Ve();if(typeof e=="function"){var a=e;if(e=a(),In){ti(!0);try{a()}finally{ti(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:e},r}function Nm(e,r,a,u){return e.baseState=a,Lh(e,Jt,typeof u=="function"?u:pr)}function Zb(e,r,a,u,f){if(eo(e))throw Error(n(485));if(e=r.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};E.T!==null?a(!0):d.isTransition=!1,u(d),a=r.pending,a===null?(d.next=r.pending=d,Im(r,d)):(d.next=a.next,r.pending=a.next=d)}}function Im(e,r){var a=r.action,u=r.payload,f=e.state;if(r.isTransition){var d=E.T,v={};E.T=v;try{var A=a(f,u),L=E.S;L!==null&&L(v,A),Um(e,r,A)}catch(Y){Gh(e,r,Y)}finally{d!==null&&v.types!==null&&(d.types=v.types),E.T=d}}else try{d=a(f,u),Um(e,r,d)}catch(Y){Gh(e,r,Y)}}function Um(e,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){Lm(e,r,u)},function(u){return Gh(e,r,u)}):Lm(e,r,a)}function Lm(e,r,a){r.status="fulfilled",r.value=a,Pm(r),e.state=a,r=e.pending,r!==null&&(a=r.next,a===r?e.pending=null:(a=a.next,r.next=a,Im(e,a)))}function Gh(e,r,a){var u=e.pending;if(e.pending=null,u!==null){u=u.next;do r.status="rejected",r.reason=a,Pm(r),r=r.next;while(r!==u)}e.action=null}function Pm(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function Fm(e,r){return r}function Gm(e,r){if(Xt){var a=ie.formState;if(a!==null){t:{var u=Lt;if(Xt){if(re){e:{for(var f=re,d=vi;f.nodeType!==8;){if(!d){f=null;break e}if(f=xi(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){re=xi(f.nextSibling),u=f.data==="F!";break t}}zr(u)}u=!1}u&&(r=a[0])}}return a=Ve(),a.memoizedState=a.baseState=r,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Fm,lastRenderedState:r},a.queue=u,a=ng.bind(null,Lt,u),u.dispatch=a,u=Fh(!1),d=jh.bind(null,Lt,!1,u.queue),u=Ve(),f={state:r,dispatch:null,action:e,pending:null},u.queue=f,a=Zb.bind(null,Lt,f,d,a),f.dispatch=a,u.memoizedState=e,[r,a,!1]}function zm(e){var r=ye();return Hm(r,Jt,e)}function Hm(e,r,a){if(r=Lh(e,r,Fm)[0],e=Ql(pr)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var u=Ba(r)}catch(v){throw v===Ts?kl:v}else u=r;r=ye();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(Lt.flags|=2048,Rs(9,{destroy:void 0},Kb.bind(null,f,a),null)),[u,d,e]}function Kb(e,r){e.action=r}function km(e){var r=ye(),a=Jt;if(a!==null)return Hm(r,a,e);ye(),r=r.memoizedState,a=ye();var u=a.queue.dispatch;return a.memoizedState=e,[r,u,!1]}function Rs(e,r,a,u){return e={tag:e,create:a,deps:u,inst:r,next:null},r=Lt.updateQueue,r===null&&(r=Zl(),Lt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=e.next=e:(u=a.next,a.next=e,e.next=u,r.lastEffect=e),e}function Xm(){return ye().memoizedState}function Jl(e,r,a,u){var f=Ve();Lt.flags|=e,f.memoizedState=Rs(1|r,{destroy:void 0},a,u===void 0?null:u)}function to(e,r,a,u){var f=ye();u=u===void 0?null:u;var d=f.memoizedState.inst;Jt!==null&&u!==null&&Dh(u,Jt.memoizedState.deps)?f.memoizedState=Rs(r,d,a,u):(Lt.flags|=e,f.memoizedState=Rs(1|r,d,a,u))}function Vm(e,r){Jl(8390656,8,e,r)}function zh(e,r){to(2048,8,e,r)}function Qb(e){Lt.flags|=4;var r=Lt.updateQueue;if(r===null)r=Zl(),Lt.updateQueue=r,r.events=[e];else{var a=r.events;a===null?r.events=[e]:a.push(e)}}function jm(e){var r=ye().memoizedState;return Qb({ref:r,nextImpl:e}),function(){if(($t&2)!==0)throw Error(n(440));return r.impl.apply(void 0,arguments)}}function qm(e,r){return to(4,2,e,r)}function Ym(e,r){return to(4,4,e,r)}function $m(e,r){if(typeof r=="function"){e=e();var a=r(e);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function Wm(e,r,a){a=a!=null?a.concat([e]):null,to(4,4,$m.bind(null,r,e),a)}function Hh(){}function Zm(e,r){var a=ye();r=r===void 0?null:r;var u=a.memoizedState;return r!==null&&Dh(r,u[1])?u[0]:(a.memoizedState=[e,r],e)}function Km(e,r){var a=ye();r=r===void 0?null:r;var u=a.memoizedState;if(r!==null&&Dh(r,u[1]))return u[0];if(u=e(),In){ti(!0);try{e()}finally{ti(!1)}}return a.memoizedState=[u,r],u}function kh(e,r,a){return a===void 0||(dr&1073741824)!==0&&(Ht&261930)===0?e.memoizedState=r:(e.memoizedState=a,e=Qg(),Lt.lanes|=e,Wr|=e,a)}function Qm(e,r,a,u){return ii(a,r)?a:As.current!==null?(e=kh(e,a,u),ii(e,r)||(Ee=!0),e):(dr&42)===0||(dr&1073741824)!==0&&(Ht&261930)===0?(Ee=!0,e.memoizedState=a):(e=Qg(),Lt.lanes|=e,Wr|=e,r)}function Jm(e,r,a,u,f){var d=R.p;R.p=d!==0&&8>d?d:8;var v=E.T,A={};E.T=A,jh(e,!1,r,a);try{var L=f(),Y=E.S;if(Y!==null&&Y(A,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var et=Yb(L,u);Na(e,r,et,oi(e))}else Na(e,r,u,oi(e))}catch(st){Na(e,r,{then:function(){},status:"rejected",reason:st},oi())}finally{R.p=d,v!==null&&A.types!==null&&(v.types=A.types),E.T=v}}function Jb(){}function Xh(e,r,a,u){if(e.tag!==5)throw Error(n(476));var f=tg(e).queue;Jm(e,f,r,M,a===null?Jb:function(){return eg(e),a(u)})}function tg(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:M,baseState:M,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:M},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:a},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function eg(e){var r=tg(e);r.next===null&&(r=e.alternate.memoizedState),Na(e,r.next.queue,{},oi())}function Vh(){return Ue(Za)}function ig(){return ye().memoizedState}function rg(){return ye().memoizedState}function t1(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var a=oi();e=Xr(a);var u=Vr(r,e,a);u!==null&&(Qe(u,r,a),Ra(u,r,a)),r={cache:_h()},e.payload=r;return}r=r.return}}function e1(e,r,a){var u=oi();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},eo(e)?sg(r,a):(a=oh(e,r,a,u),a!==null&&(Qe(a,e,u),ag(a,r,u)))}function ng(e,r,a){var u=oi();Na(e,r,a,u)}function Na(e,r,a,u){var f={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(eo(e))sg(r,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,A=d(v,a);if(f.hasEagerState=!0,f.eagerState=A,ii(A,v))return Ul(e,r,f,0),ie===null&&Il(),!1}catch{}if(a=oh(e,r,f,u),a!==null)return Qe(a,e,u),ag(a,r,u),!0}return!1}function jh(e,r,a,u){if(u={lane:2,revertLane:Tc(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},eo(e)){if(r)throw Error(n(479))}else r=oh(e,a,u,2),r!==null&&Qe(r,e,2)}function eo(e){var r=e.alternate;return e===Lt||r!==null&&r===Lt}function sg(e,r){ws=$l=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function ag(e,r,a){if((a&4194048)!==0){var u=r.lanes;u&=e.pendingLanes,a|=u,r.lanes=a,Ur(e,a)}}var Ia={readContext:Ue,use:Kl,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useLayoutEffect:de,useInsertionEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useSyncExternalStore:de,useId:de,useHostTransitionStatus:de,useFormState:de,useActionState:de,useOptimistic:de,useMemoCache:de,useCacheRefresh:de};Ia.useEffectEvent=de;var lg={readContext:Ue,use:Kl,useCallback:function(e,r){return Ve().memoizedState=[e,r===void 0?null:r],e},useContext:Ue,useEffect:Vm,useImperativeHandle:function(e,r,a){a=a!=null?a.concat([e]):null,Jl(4194308,4,$m.bind(null,r,e),a)},useLayoutEffect:function(e,r){return Jl(4194308,4,e,r)},useInsertionEffect:function(e,r){Jl(4,2,e,r)},useMemo:function(e,r){var a=Ve();r=r===void 0?null:r;var u=e();if(In){ti(!0);try{e()}finally{ti(!1)}}return a.memoizedState=[u,r],u},useReducer:function(e,r,a){var u=Ve();if(a!==void 0){var f=a(r);if(In){ti(!0);try{a(r)}finally{ti(!1)}}}else f=r;return u.memoizedState=u.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},u.queue=e,e=e.dispatch=e1.bind(null,Lt,e),[u.memoizedState,e]},useRef:function(e){var r=Ve();return e={current:e},r.memoizedState=e},useState:function(e){e=Fh(e);var r=e.queue,a=ng.bind(null,Lt,r);return r.dispatch=a,[e.memoizedState,a]},useDebugValue:Hh,useDeferredValue:function(e,r){var a=Ve();return kh(a,e,r)},useTransition:function(){var e=Fh(!1);return e=Jm.bind(null,Lt,e.queue,!0,!1),Ve().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,a){var u=Lt,f=Ve();if(Xt){if(a===void 0)throw Error(n(407));a=a()}else{if(a=r(),ie===null)throw Error(n(349));(Ht&127)!==0||Rm(u,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,Vm(Dm.bind(null,u,d,e),[e]),u.flags|=2048,Rs(9,{destroy:void 0},Mm.bind(null,u,d,a,r),null),a},useId:function(){var e=Ve(),r=ie.identifierPrefix;if(Xt){var a=Xi,u=ki;a=(u&~(1<<32-V(u)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Wl++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=$b++,r="_"+r+"r_"+a.toString(32)+"_";return e.memoizedState=r},useHostTransitionStatus:Vh,useFormState:Gm,useActionState:Gm,useOptimistic:function(e){var r=Ve();r.memoizedState=r.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=jh.bind(null,Lt,!0,a),a.dispatch=r,[e,r]},useMemoCache:Uh,useCacheRefresh:function(){return Ve().memoizedState=t1.bind(null,Lt)},useEffectEvent:function(e){var r=Ve(),a={impl:e};return r.memoizedState=a,function(){if(($t&2)!==0)throw Error(n(440));return a.impl.apply(void 0,arguments)}}},qh={readContext:Ue,use:Kl,useCallback:Zm,useContext:Ue,useEffect:zh,useImperativeHandle:Wm,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Km,useReducer:Ql,useRef:Xm,useState:function(){return Ql(pr)},useDebugValue:Hh,useDeferredValue:function(e,r){var a=ye();return Qm(a,Jt.memoizedState,e,r)},useTransition:function(){var e=Ql(pr)[0],r=ye().memoizedState;return[typeof e=="boolean"?e:Ba(e),r]},useSyncExternalStore:Cm,useId:ig,useHostTransitionStatus:Vh,useFormState:zm,useActionState:zm,useOptimistic:function(e,r){var a=ye();return Nm(a,Jt,e,r)},useMemoCache:Uh,useCacheRefresh:rg};qh.useEffectEvent=jm;var og={readContext:Ue,use:Kl,useCallback:Zm,useContext:Ue,useEffect:zh,useImperativeHandle:Wm,useInsertionEffect:qm,useLayoutEffect:Ym,useMemo:Km,useReducer:Ph,useRef:Xm,useState:function(){return Ph(pr)},useDebugValue:Hh,useDeferredValue:function(e,r){var a=ye();return Jt===null?kh(a,e,r):Qm(a,Jt.memoizedState,e,r)},useTransition:function(){var e=Ph(pr)[0],r=ye().memoizedState;return[typeof e=="boolean"?e:Ba(e),r]},useSyncExternalStore:Cm,useId:ig,useHostTransitionStatus:Vh,useFormState:km,useActionState:km,useOptimistic:function(e,r){var a=ye();return Jt!==null?Nm(a,Jt,e,r):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:Uh,useCacheRefresh:rg};og.useEffectEvent=jm;function Yh(e,r,a,u){r=e.memoizedState,a=a(u,r),a=a==null?r:y({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var $h={enqueueSetState:function(e,r,a){e=e._reactInternals;var u=oi(),f=Xr(u);f.payload=r,a!=null&&(f.callback=a),r=Vr(e,f,u),r!==null&&(Qe(r,e,u),Ra(r,e,u))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var u=oi(),f=Xr(u);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=Vr(e,f,u),r!==null&&(Qe(r,e,u),Ra(r,e,u))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=oi(),u=Xr(a);u.tag=2,r!=null&&(u.callback=r),r=Vr(e,u,a),r!==null&&(Qe(r,e,a),Ra(r,e,a))}};function ug(e,r,a,u,f,d,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,d,v):r.prototype&&r.prototype.isPureReactComponent?!xa(a,u)||!xa(f,d):!0}function hg(e,r,a,u){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,u),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,u),r.state!==e&&$h.enqueueReplaceState(r,r.state,null)}function Un(e,r){var a=r;if("ref"in r){a={};for(var u in r)u!=="ref"&&(a[u]=r[u])}if(e=e.defaultProps){a===r&&(a=y({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function cg(e){Nl(e)}function fg(e){console.error(e)}function dg(e){Nl(e)}function io(e,r){try{var a=e.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(u){setTimeout(function(){throw u})}}function pg(e,r,a){try{var u=e.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Wh(e,r,a){return a=Xr(a),a.tag=3,a.payload={element:null},a.callback=function(){io(e,r)},a}function mg(e){return e=Xr(e),e.tag=3,e}function gg(e,r,a,u){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=u.value;e.payload=function(){return f(d)},e.callback=function(){pg(r,a,u)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(e.callback=function(){pg(r,a,u),typeof f!="function"&&(Zr===null?Zr=new Set([this]):Zr.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function i1(e,r,a,u,f){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(r=a.alternate,r!==null&&xs(r,a,f,!0),a=ni.current,a!==null){switch(a.tag){case 31:case 13:return _i===null?mo():a.alternate===null&&pe===0&&(pe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,u===Xl?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([u]):r.add(u),xc(e,u,f)),!1;case 22:return a.flags|=65536,u===Xl?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([u]):a.add(u)),xc(e,u,f)),!1}throw Error(n(435,a.tag))}return xc(e,u,f),mo(),!1}if(Xt)return r=ni.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,u!==ph&&(e=Error(n(422),{cause:u}),Ta(mi(e,a)))):(u!==ph&&(r=Error(n(423),{cause:u}),Ta(mi(r,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,u=mi(u,a),f=Wh(e.stateNode,u,f),Ah(e,f),pe!==4&&(pe=2)),!1;var d=Error(n(520),{cause:u});if(d=mi(d,a),ka===null?ka=[d]:ka.push(d),pe!==4&&(pe=2),r===null)return!0;u=mi(u,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Wh(a.stateNode,u,e),Ah(a,e),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Zr===null||!Zr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=mg(f),gg(f,e,a,u),Ah(a,f),!1}a=a.return}while(a!==null);return!1}var Zh=Error(n(461)),Ee=!1;function Le(e,r,a,u){r.child=e===null?xm(r,null,a,u):Nn(r,e.child,a,u)}function yg(e,r,a,u,f){a=a.render;var d=r.ref;if("ref"in u){var v={};for(var A in u)A!=="ref"&&(v[A]=u[A])}else v=u;return Mn(r),u=Oh(e,r,a,v,d,f),A=Bh(),e!==null&&!Ee?(Nh(e,r,f),mr(e,r,f)):(Xt&&A&&fh(r),r.flags|=1,Le(e,r,u,f),r.child)}function vg(e,r,a,u,f){if(e===null){var d=a.type;return typeof d=="function"&&!uh(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,_g(e,r,d,u,f)):(e=Pl(a.type,null,u,r,r.mode,f),e.ref=r.ref,e.return=r,r.child=e)}if(d=e.child,!nc(e,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:xa,a(v,u)&&e.ref===r.ref)return mr(e,r,f)}return r.flags|=1,e=ur(d,u),e.ref=r.ref,e.return=r,r.child=e}function _g(e,r,a,u,f){if(e!==null){var d=e.memoizedProps;if(xa(d,u)&&e.ref===r.ref)if(Ee=!1,r.pendingProps=u=d,nc(e,f))(e.flags&131072)!==0&&(Ee=!0);else return r.lanes=e.lanes,mr(e,r,f)}return Kh(e,r,a,u,f)}function xg(e,r,a,u){var f=u.children,d=e!==null?e.memoizedState:null;if(e===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(u=r.child=e.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;u=f&~d}else u=0,r.child=null;return bg(e,r,d,a,u)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&Hl(r,d!==null?d.cachePool:null),d!==null?Tm(r,d):Ch(),Sm(r);else return u=r.lanes=536870912,bg(e,r,d!==null?d.baseLanes|a:a,a,u)}else d!==null?(Hl(r,d.cachePool),Tm(r,d),qr(),r.memoizedState=null):(e!==null&&Hl(r,null),Ch(),qr());return Le(e,r,f,a),r.child}function Ua(e,r){return e!==null&&e.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function bg(e,r,a,u,f){var d=bh();return d=d===null?null:{parent:xe._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},e!==null&&Hl(r,null),Ch(),Sm(r),e!==null&&xs(e,r,u,!0),r.childLanes=f,null}function ro(e,r){return r=so({mode:r.mode,children:r.children},e.mode),r.ref=e.ref,e.child=r,r.return=e,r}function Eg(e,r,a){return Nn(r,e.child,null,a),e=ro(r,r.pendingProps),e.flags|=2,si(r),r.memoizedState=null,e}function r1(e,r,a){var u=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,e===null){if(Xt){if(u.mode==="hidden")return e=ro(r,u),r.lanes=536870912,Ua(null,e);if(Mh(r),(e=re)?(e=Iy(e,vi),e=e!==null&&e.data==="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:Fr!==null?{id:ki,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=sm(e),a.return=r,r.child=a,Ie=r,re=null)):e=null,e===null)throw zr(r);return r.lanes=536870912,null}return ro(r,u)}var d=e.memoizedState;if(d!==null){var v=d.dehydrated;if(Mh(r),f)if(r.flags&256)r.flags&=-257,r=Eg(e,r,a);else if(r.memoizedState!==null)r.child=e.child,r.flags|=128,r=null;else throw Error(n(558));else if(Ee||xs(e,r,a,!1),f=(a&e.childLanes)!==0,Ee||f){if(u=ie,u!==null&&(v=is(u,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,An(e,v),Qe(u,e,v),Zh;mo(),r=Eg(e,r,a)}else e=d.treeContext,re=xi(v.nextSibling),Ie=r,Xt=!0,Gr=null,vi=!1,e!==null&&om(r,e),r=ro(r,u),r.flags|=4096;return r}return e=ur(e.child,{mode:u.mode,children:u.children}),e.ref=r.ref,r.child=e,e.return=r,e}function no(e,r){var a=r.ref;if(a===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(n(284));(e===null||e.ref!==a)&&(r.flags|=4194816)}}function Kh(e,r,a,u,f){return Mn(r),a=Oh(e,r,a,u,void 0,f),u=Bh(),e!==null&&!Ee?(Nh(e,r,f),mr(e,r,f)):(Xt&&u&&fh(r),r.flags|=1,Le(e,r,a,f),r.child)}function Tg(e,r,a,u,f,d){return Mn(r),r.updateQueue=null,a=wm(r,u,a,f),Am(e),u=Bh(),e!==null&&!Ee?(Nh(e,r,d),mr(e,r,d)):(Xt&&u&&fh(r),r.flags|=1,Le(e,r,a,d),r.child)}function Sg(e,r,a,u,f){if(Mn(r),r.stateNode===null){var d=gs,v=a.contextType;typeof v=="object"&&v!==null&&(d=Ue(v)),d=new a(u,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=$h,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=u,d.state=r.memoizedState,d.refs={},Th(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?Ue(v):gs,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(Yh(r,a,v,u),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&$h.enqueueReplaceState(d,d.state,null),Da(r,u,d,f),Ma(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),u=!0}else if(e===null){d=r.stateNode;var A=r.memoizedProps,L=Un(a,A);d.props=L;var Y=d.context,et=a.contextType;v=gs,typeof et=="object"&&et!==null&&(v=Ue(et));var st=a.getDerivedStateFromProps;et=typeof st=="function"||typeof d.getSnapshotBeforeUpdate=="function",A=r.pendingProps!==A,et||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(A||Y!==v)&&hg(r,d,u,v),kr=!1;var W=r.memoizedState;d.state=W,Da(r,u,d,f),Ma(),Y=r.memoizedState,A||W!==Y||kr?(typeof st=="function"&&(Yh(r,a,st,u),Y=r.memoizedState),(L=kr||ug(r,a,L,u,W,Y,v))?(et||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=u,r.memoizedState=Y),d.props=u,d.state=Y,d.context=v,u=L):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),u=!1)}else{d=r.stateNode,Sh(e,r),v=r.memoizedProps,et=Un(a,v),d.props=et,st=r.pendingProps,W=d.context,Y=a.contextType,L=gs,typeof Y=="object"&&Y!==null&&(L=Ue(Y)),A=a.getDerivedStateFromProps,(Y=typeof A=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==st||W!==L)&&hg(r,d,u,L),kr=!1,W=r.memoizedState,d.state=W,Da(r,u,d,f),Ma();var K=r.memoizedState;v!==st||W!==K||kr||e!==null&&e.dependencies!==null&&Gl(e.dependencies)?(typeof A=="function"&&(Yh(r,a,A,u),K=r.memoizedState),(et=kr||ug(r,a,et,u,W,K,L)||e!==null&&e.dependencies!==null&&Gl(e.dependencies))?(Y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(u,K,L),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(u,K,L)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),r.memoizedProps=u,r.memoizedState=K),d.props=u,d.state=K,d.context=L,u=et):(typeof d.componentDidUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),u=!1)}return d=u,no(e,r),u=(r.flags&128)!==0,d||u?(d=r.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,e!==null&&u?(r.child=Nn(r,e.child,null,f),r.child=Nn(r,null,a,f)):Le(e,r,a,f),r.memoizedState=d.state,e=r.child):e=mr(e,r,f),e}function Ag(e,r,a,u){return Cn(),r.flags|=256,Le(e,r,a,u),r.child}var Qh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jh(e){return{baseLanes:e,cachePool:pm()}}function tc(e,r,a){return e=e!==null?e.childLanes&~a:0,r&&(e|=li),e}function wg(e,r,a){var u=r.pendingProps,f=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=e!==null&&e.memoizedState===null?!1:(ge.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,e===null){if(Xt){if(f?jr(r):qr(),(e=re)?(e=Iy(e,vi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(r.memoizedState={dehydrated:e,treeContext:Fr!==null?{id:ki,overflow:Xi}:null,retryLane:536870912,hydrationErrors:null},a=sm(e),a.return=r,r.child=a,Ie=r,re=null)):e=null,e===null)throw zr(r);return Lc(e)?r.lanes=32:r.lanes=536870912,null}var A=u.children;return u=u.fallback,f?(qr(),f=r.mode,A=so({mode:"hidden",children:A},f),u=wn(u,f,a,null),A.return=r,u.return=r,A.sibling=u,r.child=A,u=r.child,u.memoizedState=Jh(a),u.childLanes=tc(e,v,a),r.memoizedState=Qh,Ua(null,u)):(jr(r),ec(r,A))}var L=e.memoizedState;if(L!==null&&(A=L.dehydrated,A!==null)){if(d)r.flags&256?(jr(r),r.flags&=-257,r=ic(e,r,a)):r.memoizedState!==null?(qr(),r.child=e.child,r.flags|=128,r=null):(qr(),A=u.fallback,f=r.mode,u=so({mode:"visible",children:u.children},f),A=wn(A,f,a,null),A.flags|=2,u.return=r,A.return=r,u.sibling=A,r.child=u,Nn(r,e.child,null,a),u=r.child,u.memoizedState=Jh(a),u.childLanes=tc(e,v,a),r.memoizedState=Qh,r=Ua(null,u));else if(jr(r),Lc(A)){if(v=A.nextSibling&&A.nextSibling.dataset,v)var Y=v.dgst;v=Y,u=Error(n(419)),u.stack="",u.digest=v,Ta({value:u,source:null,stack:null}),r=ic(e,r,a)}else if(Ee||xs(e,r,a,!1),v=(a&e.childLanes)!==0,Ee||v){if(v=ie,v!==null&&(u=is(v,a),u!==0&&u!==L.retryLane))throw L.retryLane=u,An(e,u),Qe(v,e,u),Zh;Uc(A)||mo(),r=ic(e,r,a)}else Uc(A)?(r.flags|=192,r.child=e.child,r=null):(e=L.treeContext,re=xi(A.nextSibling),Ie=r,Xt=!0,Gr=null,vi=!1,e!==null&&om(r,e),r=ec(r,u.children),r.flags|=4096);return r}return f?(qr(),A=u.fallback,f=r.mode,L=e.child,Y=L.sibling,u=ur(L,{mode:"hidden",children:u.children}),u.subtreeFlags=L.subtreeFlags&65011712,Y!==null?A=ur(Y,A):(A=wn(A,f,a,null),A.flags|=2),A.return=r,u.return=r,u.sibling=A,r.child=u,Ua(null,u),u=r.child,A=e.child.memoizedState,A===null?A=Jh(a):(f=A.cachePool,f!==null?(L=xe._currentValue,f=f.parent!==L?{parent:L,pool:L}:f):f=pm(),A={baseLanes:A.baseLanes|a,cachePool:f}),u.memoizedState=A,u.childLanes=tc(e,v,a),r.memoizedState=Qh,Ua(e.child,u)):(jr(r),a=e.child,e=a.sibling,a=ur(a,{mode:"visible",children:u.children}),a.return=r,a.sibling=null,e!==null&&(v=r.deletions,v===null?(r.deletions=[e],r.flags|=16):v.push(e)),r.child=a,r.memoizedState=null,a)}function ec(e,r){return r=so({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function so(e,r){return e=ri(22,e,null,r),e.lanes=0,e}function ic(e,r,a){return Nn(r,e.child,null,a),e=ec(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function Cg(e,r,a){e.lanes|=r;var u=e.alternate;u!==null&&(u.lanes|=r),yh(e.return,r,a)}function rc(e,r,a,u,f,d){var v=e.memoizedState;v===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=u,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function Rg(e,r,a){var u=r.pendingProps,f=u.revealOrder,d=u.tail;u=u.children;var v=ge.current,A=(v&2)!==0;if(A?(v=v&1|2,r.flags|=128):v&=1,F(ge,v),Le(e,r,u,a),u=Xt?Ea:0,!A&&e!==null&&(e.flags&128)!==0)t:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cg(e,a,r);else if(e.tag===19)Cg(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break t;for(;e.sibling===null;){if(e.return===null||e.return===r)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)e=a.alternate,e!==null&&Yl(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),rc(r,!1,f,a,d,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(e=f.alternate,e!==null&&Yl(e)===null){r.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}rc(r,!0,a,null,d,u);break;case"together":rc(r,!1,null,null,void 0,u);break;default:r.memoizedState=null}return r.child}function mr(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),Wr|=r.lanes,(a&r.childLanes)===0)if(e!==null){if(xs(e,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(n(153));if(r.child!==null){for(e=r.child,a=ur(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=ur(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function nc(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&Gl(e)))}function n1(e,r,a){switch(r.tag){case 3:ft(r,r.stateNode.containerInfo),Hr(r,xe,e.memoizedState.cache),Cn();break;case 27:case 5:ut(r);break;case 4:ft(r,r.stateNode.containerInfo);break;case 10:Hr(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Mh(r),null;break;case 13:var u=r.memoizedState;if(u!==null)return u.dehydrated!==null?(jr(r),r.flags|=128,null):(a&r.child.childLanes)!==0?wg(e,r,a):(jr(r),e=mr(e,r,a),e!==null?e.sibling:null);jr(r);break;case 19:var f=(e.flags&128)!==0;if(u=(a&r.childLanes)!==0,u||(xs(e,r,a,!1),u=(a&r.childLanes)!==0),f){if(u)return Rg(e,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),F(ge,ge.current),u)break;return null;case 22:return r.lanes=0,xg(e,r,a,r.pendingProps);case 24:Hr(r,xe,e.memoizedState.cache)}return mr(e,r,a)}function Mg(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps)Ee=!0;else{if(!nc(e,a)&&(r.flags&128)===0)return Ee=!1,n1(e,r,a);Ee=(e.flags&131072)!==0}else Ee=!1,Xt&&(r.flags&1048576)!==0&&lm(r,Ea,r.index);switch(r.lanes=0,r.tag){case 16:t:{var u=r.pendingProps;if(e=On(r.elementType),r.type=e,typeof e=="function")uh(e)?(u=Un(e,u),r.tag=1,r=Sg(null,r,e,u,a)):(r.tag=0,r=Kh(null,r,e,u,a));else{if(e!=null){var f=e.$$typeof;if(f===P){r.tag=11,r=yg(null,r,e,u,a);break t}else if(f===D){r.tag=14,r=vg(null,r,e,u,a);break t}}throw r=Q(e)||e,Error(n(306,r,""))}}return r;case 0:return Kh(e,r,r.type,r.pendingProps,a);case 1:return u=r.type,f=Un(u,r.pendingProps),Sg(e,r,u,f,a);case 3:t:{if(ft(r,r.stateNode.containerInfo),e===null)throw Error(n(387));u=r.pendingProps;var d=r.memoizedState;f=d.element,Sh(e,r),Da(r,u,null,a);var v=r.memoizedState;if(u=v.cache,Hr(r,xe,u),u!==d.cache&&vh(r,[xe],a,!0),Ma(),u=v.element,d.isDehydrated)if(d={element:u,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=Ag(e,r,u,a);break t}else if(u!==f){f=mi(Error(n(424)),r),Ta(f),r=Ag(e,r,u,a);break t}else for(e=r.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,re=xi(e.firstChild),Ie=r,Xt=!0,Gr=null,vi=!0,a=xm(r,null,u,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Cn(),u===f){r=mr(e,r,a);break t}Le(e,r,u,a)}r=r.child}return r;case 26:return no(e,r),e===null?(a=zy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Xt||(a=r.type,e=r.pendingProps,u=Eo(at.current).createElement(a),u[me]=r,u[Ne]=e,Pe(u,a,e),Re(u),r.stateNode=u):r.memoizedState=zy(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return ut(r),e===null&&Xt&&(u=r.stateNode=Py(r.type,r.pendingProps,at.current),Ie=r,vi=!0,f=re,tn(r.type)?(Pc=f,re=xi(u.firstChild)):re=f),Le(e,r,r.pendingProps.children,a),no(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&Xt&&((f=u=re)&&(u=I1(u,r.type,r.pendingProps,vi),u!==null?(r.stateNode=u,Ie=r,re=xi(u.firstChild),vi=!1,f=!0):f=!1),f||zr(r)),ut(r),f=r.type,d=r.pendingProps,v=e!==null?e.memoizedProps:null,u=d.children,Bc(f,d)?u=null:v!==null&&Bc(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=Oh(e,r,Wb,null,null,a),Za._currentValue=f),no(e,r),Le(e,r,u,a),r.child;case 6:return e===null&&Xt&&((e=a=re)&&(a=U1(a,r.pendingProps,vi),a!==null?(r.stateNode=a,Ie=r,re=null,e=!0):e=!1),e||zr(r)),null;case 13:return wg(e,r,a);case 4:return ft(r,r.stateNode.containerInfo),u=r.pendingProps,e===null?r.child=Nn(r,null,u,a):Le(e,r,u,a),r.child;case 11:return yg(e,r,r.type,r.pendingProps,a);case 7:return Le(e,r,r.pendingProps,a),r.child;case 8:return Le(e,r,r.pendingProps.children,a),r.child;case 12:return Le(e,r,r.pendingProps.children,a),r.child;case 10:return u=r.pendingProps,Hr(r,r.type,u.value),Le(e,r,u.children,a),r.child;case 9:return f=r.type._context,u=r.pendingProps.children,Mn(r),f=Ue(f),u=u(f),r.flags|=1,Le(e,r,u,a),r.child;case 14:return vg(e,r,r.type,r.pendingProps,a);case 15:return _g(e,r,r.type,r.pendingProps,a);case 19:return Rg(e,r,a);case 31:return r1(e,r,a);case 22:return xg(e,r,a,r.pendingProps);case 24:return Mn(r),u=Ue(xe),e===null?(f=bh(),f===null&&(f=ie,d=_h(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:u,cache:f},Th(r),Hr(r,xe,f)):((e.lanes&a)!==0&&(Sh(e,r),Da(r,null,null,a),Ma()),f=e.memoizedState,d=r.memoizedState,f.parent!==u?(f={parent:u,cache:u},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),Hr(r,xe,u)):(u=d.cache,Hr(r,xe,u),u!==f.cache&&vh(r,[xe],a,!0))),Le(e,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(n(156,r.tag))}function gr(e){e.flags|=4}function sc(e,r,a,u,f){if((r=(e.mode&32)!==0)&&(r=!1),r){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(iy())e.flags|=8192;else throw Bn=Xl,Eh}else e.flags&=-16777217}function Dg(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!jy(r))if(iy())e.flags|=8192;else throw Bn=Xl,Eh}function ao(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?rr():536870912,e.lanes|=r,Bs|=r)}function La(e,r){if(!Xt)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function ne(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,u=0;if(r)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=u,e.childLanes=a,r}function s1(e,r,a){var u=r.pendingProps;switch(dh(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ne(r),null;case 1:return ne(r),null;case 3:return a=r.stateNode,u=null,e!==null&&(u=e.memoizedState.cache),r.memoizedState.cache!==u&&(r.flags|=2048),fr(xe),ct(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(_s(r)?gr(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,mh())),ne(r),null;case 26:var f=r.type,d=r.memoizedState;return e===null?(gr(r),d!==null?(ne(r),Dg(r,d)):(ne(r),sc(r,f,null,u,a))):d?d!==e.memoizedState?(gr(r),ne(r),Dg(r,d)):(ne(r),r.flags&=-16777217):(e=e.memoizedProps,e!==u&&gr(r),ne(r),sc(r,f,e,u,a)),null;case 27:if(vt(r),a=at.current,f=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==u&&gr(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return ne(r),null}e=X.current,_s(r)?um(r):(e=Py(f,u,a),r.stateNode=e,gr(r))}return ne(r),null;case 5:if(vt(r),f=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==u&&gr(r);else{if(!u){if(r.stateNode===null)throw Error(n(166));return ne(r),null}if(d=X.current,_s(r))um(r);else{var v=Eo(at.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof u.is=="string"?v.createElement("select",{is:u.is}):v.createElement("select"),u.multiple?d.multiple=!0:u.size&&(d.size=u.size);break;default:d=typeof u.is=="string"?v.createElement(f,{is:u.is}):v.createElement(f)}}d[me]=r,d[Ne]=u;t:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break t;for(;v.sibling===null;){if(v.return===null||v.return===r)break t;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=d;t:switch(Pe(d,f,u),f){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break t;case"img":u=!0;break t;default:u=!1}u&&gr(r)}}return ne(r),sc(r,r.type,e===null?null:e.memoizedProps,r.pendingProps,a),null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==u&&gr(r);else{if(typeof u!="string"&&r.stateNode===null)throw Error(n(166));if(e=at.current,_s(r)){if(e=r.stateNode,a=r.memoizedProps,u=null,f=Ie,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}e[me]=r,e=!!(e.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||wy(e.nodeValue,a)),e||zr(r,!0)}else e=Eo(e).createTextNode(u),e[me]=r,r.stateNode=e}return ne(r),null;case 31:if(a=r.memoizedState,e===null||e.memoizedState!==null){if(u=_s(r),a!==null){if(e===null){if(!u)throw Error(n(318));if(e=r.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(557));e[me]=r}else Cn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ne(r),e=!1}else a=mh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return r.flags&256?(si(r),r):(si(r),null);if((r.flags&128)!==0)throw Error(n(558))}return ne(r),null;case 13:if(u=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=_s(r),u!==null&&u.dehydrated!==null){if(e===null){if(!f)throw Error(n(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(n(317));f[me]=r}else Cn(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ne(r),f=!1}else f=mh(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(si(r),r):(si(r),null)}return si(r),(r.flags&128)!==0?(r.lanes=a,r):(a=u!==null,e=e!==null&&e.memoizedState!==null,a&&(u=r.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool),d=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(d=u.memoizedState.cachePool.pool),d!==f&&(u.flags|=2048)),a!==e&&a&&(r.child.flags|=8192),ao(r,r.updateQueue),ne(r),null);case 4:return ct(),e===null&&Cc(r.stateNode.containerInfo),ne(r),null;case 10:return fr(r.type),ne(r),null;case 19:if(N(ge),u=r.memoizedState,u===null)return ne(r),null;if(f=(r.flags&128)!==0,d=u.rendering,d===null)if(f)La(u,!1);else{if(pe!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(d=Yl(e),d!==null){for(r.flags|=128,La(u,!1),e=d.updateQueue,r.updateQueue=e,ao(r,e),r.subtreeFlags=0,e=a,a=r.child;a!==null;)nm(a,e),a=a.sibling;return F(ge,ge.current&1|2),Xt&&hr(r,u.treeForkCount),r.child}e=e.sibling}u.tail!==null&&_e()>co&&(r.flags|=128,f=!0,La(u,!1),r.lanes=4194304)}else{if(!f)if(e=Yl(d),e!==null){if(r.flags|=128,f=!0,e=e.updateQueue,r.updateQueue=e,ao(r,e),La(u,!0),u.tail===null&&u.tailMode==="hidden"&&!d.alternate&&!Xt)return ne(r),null}else 2*_e()-u.renderingStartTime>co&&a!==536870912&&(r.flags|=128,f=!0,La(u,!1),r.lanes=4194304);u.isBackwards?(d.sibling=r.child,r.child=d):(e=u.last,e!==null?e.sibling=d:r.child=d,u.last=d)}return u.tail!==null?(e=u.tail,u.rendering=e,u.tail=e.sibling,u.renderingStartTime=_e(),e.sibling=null,a=ge.current,F(ge,f?a&1|2:a&1),Xt&&hr(r,u.treeForkCount),e):(ne(r),null);case 22:case 23:return si(r),Rh(),u=r.memoizedState!==null,e!==null?e.memoizedState!==null!==u&&(r.flags|=8192):u&&(r.flags|=8192),u?(a&536870912)!==0&&(r.flags&128)===0&&(ne(r),r.subtreeFlags&6&&(r.flags|=8192)):ne(r),a=r.updateQueue,a!==null&&ao(r,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),u=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),u!==a&&(r.flags|=2048),e!==null&&N(Dn),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),fr(xe),ne(r),null;case 25:return null;case 30:return null}throw Error(n(156,r.tag))}function a1(e,r){switch(dh(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return fr(xe),ct(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return vt(r),null;case 31:if(r.memoizedState!==null){if(si(r),r.alternate===null)throw Error(n(340));Cn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 13:if(si(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(n(340));Cn()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return N(ge),null;case 4:return ct(),null;case 10:return fr(r.type),null;case 22:case 23:return si(r),Rh(),e!==null&&N(Dn),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return fr(xe),null;case 25:return null;default:return null}}function Og(e,r){switch(dh(r),r.tag){case 3:fr(xe),ct();break;case 26:case 27:case 5:vt(r);break;case 4:ct();break;case 31:r.memoizedState!==null&&si(r);break;case 13:si(r);break;case 19:N(ge);break;case 10:fr(r.type);break;case 22:case 23:si(r),Rh(),e!==null&&N(Dn);break;case 24:fr(xe)}}function Pa(e,r){try{var a=r.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var f=u.next;a=f;do{if((a.tag&e)===e){u=void 0;var d=a.create,v=a.inst;u=d(),v.destroy=u}a=a.next}while(a!==f)}}catch(A){Kt(r,r.return,A)}}function Yr(e,r,a){try{var u=r.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var d=f.next;u=d;do{if((u.tag&e)===e){var v=u.inst,A=v.destroy;if(A!==void 0){v.destroy=void 0,f=r;var L=a,Y=A;try{Y()}catch(et){Kt(f,L,et)}}}u=u.next}while(u!==d)}}catch(et){Kt(r,r.return,et)}}function Bg(e){var r=e.updateQueue;if(r!==null){var a=e.stateNode;try{Em(r,a)}catch(u){Kt(e,e.return,u)}}}function Ng(e,r,a){a.props=Un(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(u){Kt(e,r,u)}}function Fa(e,r){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var u=e.stateNode;break;case 30:u=e.stateNode;break;default:u=e.stateNode}typeof a=="function"?e.refCleanup=a(u):a.current=u}}catch(f){Kt(e,r,f)}}function Vi(e,r){var a=e.ref,u=e.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(f){Kt(e,r,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Kt(e,r,f)}else a.current=null}function Ig(e){var r=e.type,a=e.memoizedProps,u=e.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break t;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(f){Kt(e,e.return,f)}}function ac(e,r,a){try{var u=e.stateNode;R1(u,e.type,a,r),u[Ne]=r}catch(f){Kt(e,e.return,f)}}function Ug(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&tn(e.type)||e.tag===4}function lc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Ug(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&tn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oc(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(e),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=lr));else if(u!==4&&(u===27&&tn(e.type)&&(a=e.stateNode,r=null),e=e.child,e!==null))for(oc(e,r,a),e=e.sibling;e!==null;)oc(e,r,a),e=e.sibling}function lo(e,r,a){var u=e.tag;if(u===5||u===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(u!==4&&(u===27&&tn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(lo(e,r,a),e=e.sibling;e!==null;)lo(e,r,a),e=e.sibling}function Lg(e){var r=e.stateNode,a=e.memoizedProps;try{for(var u=e.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);Pe(r,u,a),r[me]=e,r[Ne]=a}catch(d){Kt(e,e.return,d)}}var yr=!1,Te=!1,uc=!1,Pg=typeof WeakSet=="function"?WeakSet:Set,Me=null;function l1(e,r){if(e=e.containerInfo,Dc=Mo,e=Wp(e),ih(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var f=u.anchorOffset,d=u.focusNode;u=u.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var v=0,A=-1,L=-1,Y=0,et=0,st=e,W=null;e:for(;;){for(var K;st!==a||f!==0&&st.nodeType!==3||(A=v+f),st!==d||u!==0&&st.nodeType!==3||(L=v+u),st.nodeType===3&&(v+=st.nodeValue.length),(K=st.firstChild)!==null;)W=st,st=K;for(;;){if(st===e)break e;if(W===a&&++Y===f&&(A=v),W===d&&++et===u&&(L=v),(K=st.nextSibling)!==null)break;st=W,W=st.parentNode}st=K}a=A===-1||L===-1?null:{start:A,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Oc={focusedElem:e,selectionRange:a},Mo=!1,Me=r;Me!==null;)if(r=Me,e=r.child,(r.subtreeFlags&1028)!==0&&e!==null)e.return=r,Me=e;else for(;Me!==null;){switch(r=Me,d=r.alternate,e=r.flags,r.tag){case 0:if((e&4)!==0&&(e=r.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,u=a.stateNode;try{var yt=Un(a.type,f);e=u.getSnapshotBeforeUpdate(yt,d),u.__reactInternalSnapshotBeforeUpdate=e}catch(Rt){Kt(a,a.return,Rt)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,a=e.nodeType,a===9)Ic(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Ic(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(n(163))}if(e=r.sibling,e!==null){e.return=r.return,Me=e;break}Me=r.return}}function Fg(e,r,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:_r(e,a),u&4&&Pa(5,a);break;case 1:if(_r(e,a),u&4)if(e=a.stateNode,r===null)try{e.componentDidMount()}catch(v){Kt(a,a.return,v)}else{var f=Un(a.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(f,r,e.__reactInternalSnapshotBeforeUpdate)}catch(v){Kt(a,a.return,v)}}u&64&&Bg(a),u&512&&Fa(a,a.return);break;case 3:if(_r(e,a),u&64&&(e=a.updateQueue,e!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Em(e,r)}catch(v){Kt(a,a.return,v)}}break;case 27:r===null&&u&4&&Lg(a);case 26:case 5:_r(e,a),r===null&&u&4&&Ig(a),u&512&&Fa(a,a.return);break;case 12:_r(e,a);break;case 31:_r(e,a),u&4&&Hg(e,a);break;case 13:_r(e,a),u&4&&kg(e,a),u&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=g1.bind(null,a),L1(e,a))));break;case 22:if(u=a.memoizedState!==null||yr,!u){r=r!==null&&r.memoizedState!==null||Te,f=yr;var d=Te;yr=u,(Te=r)&&!d?xr(e,a,(a.subtreeFlags&8772)!==0):_r(e,a),yr=f,Te=d}break;case 30:break;default:_r(e,a)}}function Gg(e){var r=e.alternate;r!==null&&(e.alternate=null,Gg(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&ca(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var le=null,$e=!1;function vr(e,r,a){for(a=a.child;a!==null;)zg(e,r,a),a=a.sibling}function zg(e,r,a){if(Be&&typeof Be.onCommitFiberUnmount=="function")try{Be.onCommitFiberUnmount(_n,a)}catch{}switch(a.tag){case 26:Te||Vi(a,r),vr(e,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Te||Vi(a,r);var u=le,f=$e;tn(a.type)&&(le=a.stateNode,$e=!1),vr(e,r,a),Ya(a.stateNode),le=u,$e=f;break;case 5:Te||Vi(a,r);case 6:if(u=le,f=$e,le=null,vr(e,r,a),le=u,$e=f,le!==null)if($e)try{(le.nodeType===9?le.body:le.nodeName==="HTML"?le.ownerDocument.body:le).removeChild(a.stateNode)}catch(d){Kt(a,r,d)}else try{le.removeChild(a.stateNode)}catch(d){Kt(a,r,d)}break;case 18:le!==null&&($e?(e=le,By(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),zs(e)):By(le,a.stateNode));break;case 4:u=le,f=$e,le=a.stateNode.containerInfo,$e=!0,vr(e,r,a),le=u,$e=f;break;case 0:case 11:case 14:case 15:Yr(2,a,r),Te||Yr(4,a,r),vr(e,r,a);break;case 1:Te||(Vi(a,r),u=a.stateNode,typeof u.componentWillUnmount=="function"&&Ng(a,r,u)),vr(e,r,a);break;case 21:vr(e,r,a);break;case 22:Te=(u=Te)||a.memoizedState!==null,vr(e,r,a),Te=u;break;default:vr(e,r,a)}}function Hg(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{zs(e)}catch(a){Kt(r,r.return,a)}}}function kg(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{zs(e)}catch(a){Kt(r,r.return,a)}}function o1(e){switch(e.tag){case 31:case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new Pg),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new Pg),r;default:throw Error(n(435,e.tag))}}function oo(e,r){var a=o1(e);r.forEach(function(u){if(!a.has(u)){a.add(u);var f=y1.bind(null,e,u);u.then(f,f)}})}function We(e,r){var a=r.deletions;if(a!==null)for(var u=0;u<a.length;u++){var f=a[u],d=e,v=r,A=v;t:for(;A!==null;){switch(A.tag){case 27:if(tn(A.type)){le=A.stateNode,$e=!1;break t}break;case 5:le=A.stateNode,$e=!1;break t;case 3:case 4:le=A.stateNode.containerInfo,$e=!0;break t}A=A.return}if(le===null)throw Error(n(160));zg(d,v,f),le=null,$e=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)Xg(r,e),r=r.sibling}var Ri=null;function Xg(e,r){var a=e.alternate,u=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:We(r,e),Ze(e),u&4&&(Yr(3,e,e.return),Pa(3,e),Yr(5,e,e.return));break;case 1:We(r,e),Ze(e),u&512&&(Te||a===null||Vi(a,a.return)),u&64&&yr&&(e=e.updateQueue,e!==null&&(u=e.callbacks,u!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var f=Ri;if(We(r,e),Ze(e),u&512&&(Te||a===null||Vi(a,a.return)),u&4){var d=a!==null?a.memoizedState:null;if(u=e.memoizedState,a===null)if(u===null)if(e.stateNode===null){t:{u=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(u){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Hi]||d[me]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(u),f.head.insertBefore(d,f.querySelector("head > title"))),Pe(d,u,a),d[me]=e,Re(d),u=d;break t;case"link":var v=Xy("link","href",f).get(u+(a.href||""));if(v){for(var A=0;A<v.length;A++)if(d=v[A],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(A,1);break e}}d=f.createElement(u),Pe(d,u,a),f.head.appendChild(d);break;case"meta":if(v=Xy("meta","content",f).get(u+(a.content||""))){for(A=0;A<v.length;A++)if(d=v[A],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(A,1);break e}}d=f.createElement(u),Pe(d,u,a),f.head.appendChild(d);break;default:throw Error(n(468,u))}d[me]=e,Re(d),u=d}e.stateNode=u}else Vy(f,e.type,e.stateNode);else e.stateNode=ky(f,u,e.memoizedProps);else d!==u?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,u===null?Vy(f,e.type,e.stateNode):ky(f,u,e.memoizedProps)):u===null&&e.stateNode!==null&&ac(e,e.memoizedProps,a.memoizedProps)}break;case 27:We(r,e),Ze(e),u&512&&(Te||a===null||Vi(a,a.return)),a!==null&&u&4&&ac(e,e.memoizedProps,a.memoizedProps);break;case 5:if(We(r,e),Ze(e),u&512&&(Te||a===null||Vi(a,a.return)),e.flags&32){f=e.stateNode;try{us(f,"")}catch(yt){Kt(e,e.return,yt)}}u&4&&e.stateNode!=null&&(f=e.memoizedProps,ac(e,f,a!==null?a.memoizedProps:f)),u&1024&&(uc=!0);break;case 6:if(We(r,e),Ze(e),u&4){if(e.stateNode===null)throw Error(n(162));u=e.memoizedProps,a=e.stateNode;try{a.nodeValue=u}catch(yt){Kt(e,e.return,yt)}}break;case 3:if(Ao=null,f=Ri,Ri=To(r.containerInfo),We(r,e),Ri=f,Ze(e),u&4&&a!==null&&a.memoizedState.isDehydrated)try{zs(r.containerInfo)}catch(yt){Kt(e,e.return,yt)}uc&&(uc=!1,Vg(e));break;case 4:u=Ri,Ri=To(e.stateNode.containerInfo),We(r,e),Ze(e),Ri=u;break;case 12:We(r,e),Ze(e);break;case 31:We(r,e),Ze(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,oo(e,u)));break;case 13:We(r,e),Ze(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(ho=_e()),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,oo(e,u)));break;case 22:f=e.memoizedState!==null;var L=a!==null&&a.memoizedState!==null,Y=yr,et=Te;if(yr=Y||f,Te=et||L,We(r,e),Te=et,yr=Y,Ze(e),u&8192)t:for(r=e.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||L||yr||Te||Ln(e)),a=null,r=e;;){if(r.tag===5||r.tag===26){if(a===null){L=a=r;try{if(d=L.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{A=L.stateNode;var st=L.memoizedProps.style,W=st!=null&&st.hasOwnProperty("display")?st.display:null;A.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(yt){Kt(L,L.return,yt)}}}else if(r.tag===6){if(a===null){L=r;try{L.stateNode.nodeValue=f?"":L.memoizedProps}catch(yt){Kt(L,L.return,yt)}}}else if(r.tag===18){if(a===null){L=r;try{var K=L.stateNode;f?Ny(K,!0):Ny(L.stateNode,!1)}catch(yt){Kt(L,L.return,yt)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;r.sibling===null;){if(r.return===null||r.return===e)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}u&4&&(u=e.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,oo(e,a))));break;case 19:We(r,e),Ze(e),u&4&&(u=e.updateQueue,u!==null&&(e.updateQueue=null,oo(e,u)));break;case 30:break;case 21:break;default:We(r,e),Ze(e)}}function Ze(e){var r=e.flags;if(r&2){try{for(var a,u=e.return;u!==null;){if(Ug(u)){a=u;break}u=u.return}if(a==null)throw Error(n(160));switch(a.tag){case 27:var f=a.stateNode,d=lc(e);lo(e,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(us(v,""),a.flags&=-33);var A=lc(e);lo(e,A,v);break;case 3:case 4:var L=a.stateNode.containerInfo,Y=lc(e);oc(e,Y,L);break;default:throw Error(n(161))}}catch(et){Kt(e,e.return,et)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function Vg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;Vg(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function _r(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Fg(e,r.alternate,r),r=r.sibling}function Ln(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:Yr(4,r,r.return),Ln(r);break;case 1:Vi(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Ng(r,r.return,a),Ln(r);break;case 27:Ya(r.stateNode);case 26:case 5:Vi(r,r.return),Ln(r);break;case 22:r.memoizedState===null&&Ln(r);break;case 30:Ln(r);break;default:Ln(r)}e=e.sibling}}function xr(e,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var u=r.alternate,f=e,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:xr(f,d,a),Pa(4,d);break;case 1:if(xr(f,d,a),u=d,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(Y){Kt(u,u.return,Y)}if(u=d,f=u.updateQueue,f!==null){var A=u.stateNode;try{var L=f.shared.hiddenCallbacks;if(L!==null)for(f.shared.hiddenCallbacks=null,f=0;f<L.length;f++)bm(L[f],A)}catch(Y){Kt(u,u.return,Y)}}a&&v&64&&Bg(d),Fa(d,d.return);break;case 27:Lg(d);case 26:case 5:xr(f,d,a),a&&u===null&&v&4&&Ig(d),Fa(d,d.return);break;case 12:xr(f,d,a);break;case 31:xr(f,d,a),a&&v&4&&Hg(f,d);break;case 13:xr(f,d,a),a&&v&4&&kg(f,d);break;case 22:d.memoizedState===null&&xr(f,d,a),Fa(d,d.return);break;case 30:break;default:xr(f,d,a)}r=r.sibling}}function hc(e,r){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Sa(a))}function cc(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Sa(e))}function Mi(e,r,a,u){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)jg(e,r,a,u),r=r.sibling}function jg(e,r,a,u){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Mi(e,r,a,u),f&2048&&Pa(9,r);break;case 1:Mi(e,r,a,u);break;case 3:Mi(e,r,a,u),f&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&Sa(e)));break;case 12:if(f&2048){Mi(e,r,a,u),e=r.stateNode;try{var d=r.memoizedProps,v=d.id,A=d.onPostCommit;typeof A=="function"&&A(v,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(L){Kt(r,r.return,L)}}else Mi(e,r,a,u);break;case 31:Mi(e,r,a,u);break;case 13:Mi(e,r,a,u);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?Mi(e,r,a,u):Ga(e,r):d._visibility&2?Mi(e,r,a,u):(d._visibility|=2,Ms(e,r,a,u,(r.subtreeFlags&10256)!==0||!1)),f&2048&&hc(v,r);break;case 24:Mi(e,r,a,u),f&2048&&cc(r.alternate,r);break;default:Mi(e,r,a,u)}}function Ms(e,r,a,u,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=e,v=r,A=a,L=u,Y=v.flags;switch(v.tag){case 0:case 11:case 15:Ms(d,v,A,L,f),Pa(8,v);break;case 23:break;case 22:var et=v.stateNode;v.memoizedState!==null?et._visibility&2?Ms(d,v,A,L,f):Ga(d,v):(et._visibility|=2,Ms(d,v,A,L,f)),f&&Y&2048&&hc(v.alternate,v);break;case 24:Ms(d,v,A,L,f),f&&Y&2048&&cc(v.alternate,v);break;default:Ms(d,v,A,L,f)}r=r.sibling}}function Ga(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=e,u=r,f=u.flags;switch(u.tag){case 22:Ga(a,u),f&2048&&hc(u.alternate,u);break;case 24:Ga(a,u),f&2048&&cc(u.alternate,u);break;default:Ga(a,u)}r=r.sibling}}var za=8192;function Ds(e,r,a){if(e.subtreeFlags&za)for(e=e.child;e!==null;)qg(e,r,a),e=e.sibling}function qg(e,r,a){switch(e.tag){case 26:Ds(e,r,a),e.flags&za&&e.memoizedState!==null&&$1(a,Ri,e.memoizedState,e.memoizedProps);break;case 5:Ds(e,r,a);break;case 3:case 4:var u=Ri;Ri=To(e.stateNode.containerInfo),Ds(e,r,a),Ri=u;break;case 22:e.memoizedState===null&&(u=e.alternate,u!==null&&u.memoizedState!==null?(u=za,za=16777216,Ds(e,r,a),za=u):Ds(e,r,a));break;default:Ds(e,r,a)}}function Yg(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function Ha(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Me=u,Wg(u,e)}Yg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)$g(e),e=e.sibling}function $g(e){switch(e.tag){case 0:case 11:case 15:Ha(e),e.flags&2048&&Yr(9,e,e.return);break;case 3:Ha(e);break;case 12:Ha(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,uo(e)):Ha(e);break;default:Ha(e)}}function uo(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var u=r[a];Me=u,Wg(u,e)}Yg(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:Yr(8,r,r.return),uo(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,uo(r));break;default:uo(r)}e=e.sibling}}function Wg(e,r){for(;Me!==null;){var a=Me;switch(a.tag){case 0:case 11:case 15:Yr(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Sa(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Me=u;else t:for(a=e;Me!==null;){u=Me;var f=u.sibling,d=u.return;if(Gg(u),u===a){Me=null;break t}if(f!==null){f.return=d,Me=f;break t}Me=d}}}var u1={getCacheForType:function(e){var r=Ue(xe),a=r.data.get(e);return a===void 0&&(a=e(),r.data.set(e,a)),a},cacheSignal:function(){return Ue(xe).controller.signal}},h1=typeof WeakMap=="function"?WeakMap:Map,$t=0,ie=null,Ft=null,Ht=0,Zt=0,ai=null,$r=!1,Os=!1,fc=!1,br=0,pe=0,Wr=0,Pn=0,dc=0,li=0,Bs=0,ka=null,Ke=null,pc=!1,ho=0,Zg=0,co=1/0,fo=null,Zr=null,Ae=0,Kr=null,Ns=null,Er=0,mc=0,gc=null,Kg=null,Xa=0,yc=null;function oi(){return($t&2)!==0&&Ht!==0?Ht&-Ht:E.T!==null?Tc():rs()}function Qg(){if(li===0)if((Ht&536870912)===0||Xt){var e=Bt;Bt<<=1,(Bt&3932160)===0&&(Bt=262144),li=e}else li=536870912;return e=ni.current,e!==null&&(e.flags|=32),li}function Qe(e,r,a){(e===ie&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)&&(Is(e,0),Qr(e,Ht,li,!1)),Ir(e,a),(($t&2)===0||e!==ie)&&(e===ie&&(($t&2)===0&&(Pn|=a),pe===4&&Qr(e,Ht,li,!1)),ji(e))}function Jg(e,r,a){if(($t&6)!==0)throw Error(n(327));var u=!a&&(r&127)===0&&(r&e.expiredLanes)===0||qe(e,r),f=u?d1(e,r):_c(e,r,!0),d=u;do{if(f===0){Os&&!u&&Qr(e,r,0,!1);break}else{if(a=e.current.alternate,d&&!c1(a)){f=_c(e,r,!1),d=!1;continue}if(f===2){if(d=r,e.errorRecoveryDisabledLanes&d)var v=0;else v=e.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;t:{var A=e;f=ka;var L=A.current.memoizedState.isDehydrated;if(L&&(Is(A,v).flags|=256),v=_c(A,v,!1),v!==2){if(fc&&!L){A.errorRecoveryDisabledLanes|=d,Pn|=d,f=4;break t}d=Ke,Ke=f,d!==null&&(Ke===null?Ke=d:Ke.push.apply(Ke,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){Is(e,0),Qr(e,r,0,!0);break}t:{switch(u=e,d=f,d){case 0:case 1:throw Error(n(345));case 4:if((r&4194048)!==r)break;case 6:Qr(u,r,li,!$r);break t;case 2:Ke=null;break;case 3:case 5:break;default:throw Error(n(329))}if((r&62914560)===r&&(f=ho+300-_e(),10<f)){if(Qr(u,r,li,!$r),Ce(u,0,!0)!==0)break t;Er=r,u.timeoutHandle=Dy(ty.bind(null,u,a,Ke,fo,pc,r,li,Pn,Bs,$r,d,"Throttled",-0,0),f);break t}ty(u,a,Ke,fo,pc,r,li,Pn,Bs,$r,d,null,-0,0)}}break}while(!0);ji(e)}function ty(e,r,a,u,f,d,v,A,L,Y,et,st,W,K){if(e.timeoutHandle=-1,st=r.subtreeFlags,st&8192||(st&16785408)===16785408){st={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:lr},qg(r,d,st);var yt=(d&62914560)===d?ho-_e():(d&4194048)===d?Zg-_e():0;if(yt=W1(st,yt),yt!==null){Er=d,e.cancelPendingCommit=yt(oy.bind(null,e,r,d,a,u,f,v,A,L,et,st,null,W,K)),Qr(e,d,v,!Y);return}}oy(e,r,d,a,u,f,v,A,L)}function c1(e){for(var r=e;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var f=a[u],d=f.getSnapshot;f=f.value;try{if(!ii(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qr(e,r,a,u){r&=~dc,r&=~Pn,e.suspendedLanes|=r,e.pingedLanes&=~r,u&&(e.warmLanes|=r),u=e.expirationTimes;for(var f=r;0<f;){var d=31-V(f),v=1<<d;u[d]=-1,f&=~v}a!==0&&oa(e,a,r)}function po(){return($t&6)===0?(Va(0),!1):!0}function vc(){if(Ft!==null){if(Zt===0)var e=Ft.return;else e=Ft,cr=Rn=null,Ih(e),Ss=null,wa=0,e=Ft;for(;e!==null;)Og(e.alternate,e),e=e.return;Ft=null}}function Is(e,r){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,O1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Er=0,vc(),ie=e,Ft=a=ur(e.current,null),Ht=r,Zt=0,ai=null,$r=!1,Os=qe(e,r),fc=!1,Bs=li=dc=Pn=Wr=pe=0,Ke=ka=null,pc=!1,(r&8)!==0&&(r|=r&32);var u=e.entangledLanes;if(u!==0)for(e=e.entanglements,u&=r;0<u;){var f=31-V(u),d=1<<f;r|=e[f],u&=~d}return br=r,Il(),a}function ey(e,r){Lt=null,E.H=Ia,r===Ts||r===kl?(r=ym(),Zt=3):r===Eh?(r=ym(),Zt=4):Zt=r===Zh?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,Ft===null&&(pe=1,io(e,mi(r,e.current)))}function iy(){var e=ni.current;return e===null?!0:(Ht&4194048)===Ht?_i===null:(Ht&62914560)===Ht||(Ht&536870912)!==0?e===_i:!1}function ry(){var e=E.H;return E.H=Ia,e===null?Ia:e}function ny(){var e=E.A;return E.A=u1,e}function mo(){pe=4,$r||(Ht&4194048)!==Ht&&ni.current!==null||(Os=!0),(Wr&134217727)===0&&(Pn&134217727)===0||ie===null||Qr(ie,Ht,li,!1)}function _c(e,r,a){var u=$t;$t|=2;var f=ry(),d=ny();(ie!==e||Ht!==r)&&(fo=null,Is(e,r)),r=!1;var v=pe;t:do try{if(Zt!==0&&Ft!==null){var A=Ft,L=ai;switch(Zt){case 8:vc(),v=6;break t;case 3:case 2:case 9:case 6:ni.current===null&&(r=!0);var Y=Zt;if(Zt=0,ai=null,Us(e,A,L,Y),a&&Os){v=0;break t}break;default:Y=Zt,Zt=0,ai=null,Us(e,A,L,Y)}}f1(),v=pe;break}catch(et){ey(e,et)}while(!0);return r&&e.shellSuspendCounter++,cr=Rn=null,$t=u,E.H=f,E.A=d,Ft===null&&(ie=null,Ht=0,Il()),v}function f1(){for(;Ft!==null;)sy(Ft)}function d1(e,r){var a=$t;$t|=2;var u=ry(),f=ny();ie!==e||Ht!==r?(fo=null,co=_e()+500,Is(e,r)):Os=qe(e,r);t:do try{if(Zt!==0&&Ft!==null){r=Ft;var d=ai;e:switch(Zt){case 1:Zt=0,ai=null,Us(e,r,d,1);break;case 2:case 9:if(mm(d)){Zt=0,ai=null,ay(r);break}r=function(){Zt!==2&&Zt!==9||ie!==e||(Zt=7),ji(e)},d.then(r,r);break t;case 3:Zt=7;break t;case 4:Zt=5;break t;case 7:mm(d)?(Zt=0,ai=null,ay(r)):(Zt=0,ai=null,Us(e,r,d,7));break;case 5:var v=null;switch(Ft.tag){case 26:v=Ft.memoizedState;case 5:case 27:var A=Ft;if(v?jy(v):A.stateNode.complete){Zt=0,ai=null;var L=A.sibling;if(L!==null)Ft=L;else{var Y=A.return;Y!==null?(Ft=Y,go(Y)):Ft=null}break e}}Zt=0,ai=null,Us(e,r,d,5);break;case 6:Zt=0,ai=null,Us(e,r,d,6);break;case 8:vc(),pe=6;break t;default:throw Error(n(462))}}p1();break}catch(et){ey(e,et)}while(!0);return cr=Rn=null,E.H=u,E.A=f,$t=a,Ft!==null?0:(ie=null,Ht=0,Il(),pe)}function p1(){for(;Ft!==null&&!Br();)sy(Ft)}function sy(e){var r=Mg(e.alternate,e,br);e.memoizedProps=e.pendingProps,r===null?go(e):Ft=r}function ay(e){var r=e,a=r.alternate;switch(r.tag){case 15:case 0:r=Tg(a,r,r.pendingProps,r.type,void 0,Ht);break;case 11:r=Tg(a,r,r.pendingProps,r.type.render,r.ref,Ht);break;case 5:Ih(r);default:Og(a,r),r=Ft=nm(r,br),r=Mg(a,r,br)}e.memoizedProps=e.pendingProps,r===null?go(e):Ft=r}function Us(e,r,a,u){cr=Rn=null,Ih(r),Ss=null,wa=0;var f=r.return;try{if(i1(e,f,r,a,Ht)){pe=1,io(e,mi(a,e.current)),Ft=null;return}}catch(d){if(f!==null)throw Ft=f,d;pe=1,io(e,mi(a,e.current)),Ft=null;return}r.flags&32768?(Xt||u===1?e=!0:Os||(Ht&536870912)!==0?e=!1:($r=e=!0,(u===2||u===9||u===3||u===6)&&(u=ni.current,u!==null&&u.tag===13&&(u.flags|=16384))),ly(r,e)):go(r)}function go(e){var r=e;do{if((r.flags&32768)!==0){ly(r,$r);return}e=r.return;var a=s1(r.alternate,r,br);if(a!==null){Ft=a;return}if(r=r.sibling,r!==null){Ft=r;return}Ft=r=e}while(r!==null);pe===0&&(pe=5)}function ly(e,r){do{var a=a1(e.alternate,e);if(a!==null){a.flags&=32767,Ft=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(e=e.sibling,e!==null)){Ft=e;return}Ft=e=a}while(e!==null);pe=6,Ft=null}function oy(e,r,a,u,f,d,v,A,L){e.cancelPendingCommit=null;do yo();while(Ae!==0);if(($t&6)!==0)throw Error(n(327));if(r!==null){if(r===e.current)throw Error(n(177));if(d=r.lanes|r.childLanes,d|=lh,El(e,a,d,v,A,L),e===ie&&(Ft=ie=null,Ht=0),Ns=r,Kr=e,Er=a,mc=d,gc=f,Kg=u,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,v1(ts,function(){return dy(),null})):(e.callbackNode=null,e.callbackPriority=0),u=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||u){u=E.T,E.T=null,f=R.p,R.p=2,v=$t,$t|=4;try{l1(e,r,a)}finally{$t=v,R.p=f,E.T=u}}Ae=1,uy(),hy(),cy()}}function uy(){if(Ae===1){Ae=0;var e=Kr,r=Ns,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=E.T,E.T=null;var u=R.p;R.p=2;var f=$t;$t|=4;try{Xg(r,e);var d=Oc,v=Wp(e.containerInfo),A=d.focusedElem,L=d.selectionRange;if(v!==A&&A&&A.ownerDocument&&$p(A.ownerDocument.documentElement,A)){if(L!==null&&ih(A)){var Y=L.start,et=L.end;if(et===void 0&&(et=Y),"selectionStart"in A)A.selectionStart=Y,A.selectionEnd=Math.min(et,A.value.length);else{var st=A.ownerDocument||document,W=st&&st.defaultView||window;if(W.getSelection){var K=W.getSelection(),yt=A.textContent.length,Rt=Math.min(L.start,yt),ee=L.end===void 0?Rt:Math.min(L.end,yt);!K.extend&&Rt>ee&&(v=ee,ee=Rt,Rt=v);var k=Yp(A,Rt),G=Yp(A,ee);if(k&&G&&(K.rangeCount!==1||K.anchorNode!==k.node||K.anchorOffset!==k.offset||K.focusNode!==G.node||K.focusOffset!==G.offset)){var q=st.createRange();q.setStart(k.node,k.offset),K.removeAllRanges(),Rt>ee?(K.addRange(q),K.extend(G.node,G.offset)):(q.setEnd(G.node,G.offset),K.addRange(q))}}}}for(st=[],K=A;K=K.parentNode;)K.nodeType===1&&st.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<st.length;A++){var rt=st[A];rt.element.scrollLeft=rt.left,rt.element.scrollTop=rt.top}}Mo=!!Dc,Oc=Dc=null}finally{$t=f,R.p=u,E.T=a}}e.current=r,Ae=2}}function hy(){if(Ae===2){Ae=0;var e=Kr,r=Ns,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=E.T,E.T=null;var u=R.p;R.p=2;var f=$t;$t|=4;try{Fg(e,r.alternate,r)}finally{$t=f,R.p=u,E.T=a}}Ae=3}}function cy(){if(Ae===4||Ae===3){Ae=0,Nr();var e=Kr,r=Ns,a=Er,u=Kg;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Ae=5:(Ae=0,Ns=Kr=null,fy(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Zr=null),xn(a),r=r.stateNode,Be&&typeof Be.onCommitFiberRoot=="function")try{Be.onCommitFiberRoot(_n,r,void 0,(r.current.flags&128)===128)}catch{}if(u!==null){r=E.T,f=R.p,R.p=2,E.T=null;try{for(var d=e.onRecoverableError,v=0;v<u.length;v++){var A=u[v];d(A.value,{componentStack:A.stack})}}finally{E.T=r,R.p=f}}(Er&3)!==0&&yo(),ji(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===yc?Xa++:(Xa=0,yc=e):Xa=0,Va(0)}}function fy(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,Sa(r)))}function yo(){return uy(),hy(),cy(),dy()}function dy(){if(Ae!==5)return!1;var e=Kr,r=mc;mc=0;var a=xn(Er),u=E.T,f=R.p;try{R.p=32>a?32:a,E.T=null,a=gc,gc=null;var d=Kr,v=Er;if(Ae=0,Ns=Kr=null,Er=0,($t&6)!==0)throw Error(n(331));var A=$t;if($t|=4,$g(d.current),jg(d,d.current,v,a),$t=A,Va(0,!1),Be&&typeof Be.onPostCommitFiberRoot=="function")try{Be.onPostCommitFiberRoot(_n,d)}catch{}return!0}finally{R.p=f,E.T=u,fy(e,r)}}function py(e,r,a){r=mi(a,r),r=Wh(e.stateNode,r,2),e=Vr(e,r,2),e!==null&&(Ir(e,2),ji(e))}function Kt(e,r,a){if(e.tag===3)py(e,e,a);else for(;r!==null;){if(r.tag===3){py(r,e,a);break}else if(r.tag===1){var u=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Zr===null||!Zr.has(u))){e=mi(a,e),a=mg(2),u=Vr(r,a,2),u!==null&&(gg(a,u,r,e),Ir(u,2),ji(u));break}}r=r.return}}function xc(e,r,a){var u=e.pingCache;if(u===null){u=e.pingCache=new h1;var f=new Set;u.set(r,f)}else f=u.get(r),f===void 0&&(f=new Set,u.set(r,f));f.has(a)||(fc=!0,f.add(a),e=m1.bind(null,e,r,a),r.then(e,e))}function m1(e,r,a){var u=e.pingCache;u!==null&&u.delete(r),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ie===e&&(Ht&a)===a&&(pe===4||pe===3&&(Ht&62914560)===Ht&&300>_e()-ho?($t&2)===0&&Is(e,0):dc|=a,Bs===Ht&&(Bs=0)),ji(e)}function my(e,r){r===0&&(r=rr()),e=An(e,r),e!==null&&(Ir(e,r),ji(e))}function g1(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),my(e,a)}function y1(e,r){var a=0;switch(e.tag){case 31:case 13:var u=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:u=e.stateNode;break;case 22:u=e.stateNode._retryCache;break;default:throw Error(n(314))}u!==null&&u.delete(r),my(e,a)}function v1(e,r){return ci(e,r)}var vo=null,Ls=null,bc=!1,_o=!1,Ec=!1,Jr=0;function ji(e){e!==Ls&&e.next===null&&(Ls===null?vo=Ls=e:Ls=Ls.next=e),_o=!0,bc||(bc=!0,x1())}function Va(e,r){if(!Ec&&_o){Ec=!0;do for(var a=!1,u=vo;u!==null;){if(e!==0){var f=u.pendingLanes;if(f===0)var d=0;else{var v=u.suspendedLanes,A=u.pingedLanes;d=(1<<31-V(42|e)+1)-1,d&=f&~(v&~A),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,_y(u,d))}else d=Ht,d=Ce(u,u===ie?d:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(d&3)===0||qe(u,d)||(a=!0,_y(u,d));u=u.next}while(a);Ec=!1}}function _1(){gy()}function gy(){_o=bc=!1;var e=0;Jr!==0&&D1()&&(e=Jr);for(var r=_e(),a=null,u=vo;u!==null;){var f=u.next,d=yy(u,r);d===0?(u.next=null,a===null?vo=f:a.next=f,f===null&&(Ls=a)):(a=u,(e!==0||(d&3)!==0)&&(_o=!0)),u=f}Ae!==0&&Ae!==5||Va(e),Jr!==0&&(Jr=0)}function yy(e,r){for(var a=e.suspendedLanes,u=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var v=31-V(d),A=1<<v,L=f[v];L===-1?((A&a)===0||(A&u)!==0)&&(f[v]=la(A,r)):L<=r&&(e.expiredLanes|=A),d&=~A}if(r=ie,a=Ht,a=Ce(e,e===r?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u=e.callbackNode,a===0||e===r&&(Zt===2||Zt===9)||e.cancelPendingCommit!==null)return u!==null&&u!==null&&He(u),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||qe(e,a)){if(r=a&-a,r===e.callbackPriority)return r;switch(u!==null&&He(u),xn(a)){case 2:case 8:a=aa;break;case 32:a=ts;break;case 268435456:a=es;break;default:a=ts}return u=vy.bind(null,e),a=ci(a,u),e.callbackPriority=r,e.callbackNode=a,r}return u!==null&&u!==null&&He(u),e.callbackPriority=2,e.callbackNode=null,2}function vy(e,r){if(Ae!==0&&Ae!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(yo()&&e.callbackNode!==a)return null;var u=Ht;return u=Ce(e,e===ie?u:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),u===0?null:(Jg(e,u,r),yy(e,_e()),e.callbackNode!=null&&e.callbackNode===a?vy.bind(null,e):null)}function _y(e,r){if(yo())return null;Jg(e,r,!0)}function x1(){B1(function(){($t&6)!==0?ci(xl,_1):gy()})}function Tc(){if(Jr===0){var e=bs;e===0&&(e=Wt,Wt<<=1,(Wt&261888)===0&&(Wt=256)),Jr=e}return Jr}function xy(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:wl(""+e)}function by(e,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,e.id&&a.setAttribute("form",e.id),r.parentNode.insertBefore(a,r),e=new FormData(e),a.parentNode.removeChild(a),e}function b1(e,r,a,u,f){if(r==="submit"&&a&&a.stateNode===f){var d=xy((f[Ne]||null).action),v=u.submitter;v&&(r=(r=v[Ne]||null)?xy(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var A=new Dl("action","action",null,u,f);e.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Jr!==0){var L=v?by(f,v):new FormData(f);Xh(a,{pending:!0,data:L,method:f.method,action:d},null,L)}}else typeof d=="function"&&(A.preventDefault(),L=v?by(f,v):new FormData(f),Xh(a,{pending:!0,data:L,method:f.method,action:d},d,L))},currentTarget:f}]})}}for(var Sc=0;Sc<ah.length;Sc++){var Ac=ah[Sc],E1=Ac.toLowerCase(),T1=Ac[0].toUpperCase()+Ac.slice(1);Ci(E1,"on"+T1)}Ci(Qp,"onAnimationEnd"),Ci(Jp,"onAnimationIteration"),Ci(tm,"onAnimationStart"),Ci("dblclick","onDoubleClick"),Ci("focusin","onFocus"),Ci("focusout","onBlur"),Ci(Gb,"onTransitionRun"),Ci(zb,"onTransitionStart"),Ci(Hb,"onTransitionCancel"),Ci(em,"onTransitionEnd"),ls("onMouseEnter",["mouseout","mouseover"]),ls("onMouseLeave",["mouseout","mouseover"]),ls("onPointerEnter",["pointerout","pointerover"]),ls("onPointerLeave",["pointerout","pointerover"]),bn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),bn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),bn("onBeforeInput",["compositionend","keypress","textInput","paste"]),bn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),bn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ja="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ja));function Ey(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var u=e[a],f=u.event;u=u.listeners;t:{var d=void 0;if(r)for(var v=u.length-1;0<=v;v--){var A=u[v],L=A.instance,Y=A.currentTarget;if(A=A.listener,L!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=Y;try{d(f)}catch(et){Nl(et)}f.currentTarget=null,d=L}else for(v=0;v<u.length;v++){if(A=u[v],L=A.instance,Y=A.currentTarget,A=A.listener,L!==d&&f.isPropagationStopped())break t;d=A,f.currentTarget=Y;try{d(f)}catch(et){Nl(et)}f.currentTarget=null,d=L}}}}function Gt(e,r){var a=r[ns];a===void 0&&(a=r[ns]=new Set);var u=e+"__bubble";a.has(u)||(Ty(r,e,2,!1),a.add(u))}function wc(e,r,a){var u=0;r&&(u|=4),Ty(a,e,u,r)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Cc(e){if(!e[xo]){e[xo]=!0,gp.forEach(function(a){a!=="selectionchange"&&(S1.has(a)||wc(a,!1,e),wc(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[xo]||(r[xo]=!0,wc("selectionchange",!1,r))}}function Ty(e,r,a,u){switch(Qy(r)){case 2:var f=Q1;break;case 8:f=J1;break;default:f=kc}a=f.bind(null,r,a,e),f=void 0,!Yu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),u?f!==void 0?e.addEventListener(r,a,{capture:!0,passive:f}):e.addEventListener(r,a,!0):f!==void 0?e.addEventListener(r,a,{passive:f}):e.addEventListener(r,a,!1)}function Rc(e,r,a,u,f){var d=u;if((r&1)===0&&(r&2)===0&&u!==null)t:for(;;){if(u===null)return;var v=u.tag;if(v===3||v===4){var A=u.stateNode.containerInfo;if(A===f)break;if(v===4)for(v=u.return;v!==null;){var L=v.tag;if((L===3||L===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;A!==null;){if(v=sr(A),v===null)return;if(L=v.tag,L===5||L===6||L===26||L===27){u=d=v;continue t}A=A.parentNode}}u=u.return}Rp(function(){var Y=d,et=ju(a),st=[];t:{var W=im.get(e);if(W!==void 0){var K=Dl,yt=e;switch(e){case"keypress":if(Rl(a)===0)break t;case"keydown":case"keyup":K=yb;break;case"focusin":yt="focus",K=Ku;break;case"focusout":yt="blur",K=Ku;break;case"beforeblur":case"afterblur":K=Ku;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=sb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=xb;break;case Qp:case Jp:case tm:K=ob;break;case em:K=Eb;break;case"scroll":case"scrollend":K=rb;break;case"wheel":K=Sb;break;case"copy":case"cut":case"paste":K=hb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Np;break;case"toggle":case"beforetoggle":K=wb}var Rt=(r&4)!==0,ee=!Rt&&(e==="scroll"||e==="scrollend"),k=Rt?W!==null?W+"Capture":null:W;Rt=[];for(var G=Y,q;G!==null;){var rt=G;if(q=rt.stateNode,rt=rt.tag,rt!==5&&rt!==26&&rt!==27||q===null||k===null||(rt=da(G,k),rt!=null&&Rt.push(qa(G,rt,q))),ee)break;G=G.return}0<Rt.length&&(W=new K(W,yt,null,a,et),st.push({event:W,listeners:Rt}))}}if((r&7)===0){t:{if(W=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",W&&a!==Vu&&(yt=a.relatedTarget||a.fromElement)&&(sr(yt)||yt[zi]))break t;if((K||W)&&(W=et.window===et?et:(W=et.ownerDocument)?W.defaultView||W.parentWindow:window,K?(yt=a.relatedTarget||a.toElement,K=Y,yt=yt?sr(yt):null,yt!==null&&(ee=o(yt),Rt=yt.tag,yt!==ee||Rt!==5&&Rt!==27&&Rt!==6)&&(yt=null)):(K=null,yt=Y),K!==yt)){if(Rt=Op,rt="onMouseLeave",k="onMouseEnter",G="mouse",(e==="pointerout"||e==="pointerover")&&(Rt=Np,rt="onPointerLeave",k="onPointerEnter",G="pointer"),ee=K==null?W:fa(K),q=yt==null?W:fa(yt),W=new Rt(rt,G+"leave",K,a,et),W.target=ee,W.relatedTarget=q,rt=null,sr(et)===Y&&(Rt=new Rt(k,G+"enter",yt,a,et),Rt.target=q,Rt.relatedTarget=ee,rt=Rt),ee=rt,K&&yt)e:{for(Rt=A1,k=K,G=yt,q=0,rt=k;rt;rt=Rt(rt))q++;rt=0;for(var Ct=G;Ct;Ct=Rt(Ct))rt++;for(;0<q-rt;)k=Rt(k),q--;for(;0<rt-q;)G=Rt(G),rt--;for(;q--;){if(k===G||G!==null&&k===G.alternate){Rt=k;break e}k=Rt(k),G=Rt(G)}Rt=null}else Rt=null;K!==null&&Sy(st,W,K,Rt,!1),yt!==null&&ee!==null&&Sy(st,ee,yt,Rt,!0)}}t:{if(W=Y?fa(Y):window,K=W.nodeName&&W.nodeName.toLowerCase(),K==="select"||K==="input"&&W.type==="file")var qt=Hp;else if(Gp(W))if(kp)qt=Lb;else{qt=Ib;var Et=Nb}else K=W.nodeName,!K||K.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?Y&&Xu(Y.elementType)&&(qt=Hp):qt=Ub;if(qt&&(qt=qt(e,Y))){zp(st,qt,a,et);break t}Et&&Et(e,W,Y),e==="focusout"&&Y&&W.type==="number"&&Y.memoizedProps.value!=null&&ku(W,"number",W.value)}switch(Et=Y?fa(Y):window,e){case"focusin":(Gp(Et)||Et.contentEditable==="true")&&(ds=Et,rh=Y,ba=null);break;case"focusout":ba=rh=ds=null;break;case"mousedown":nh=!0;break;case"contextmenu":case"mouseup":case"dragend":nh=!1,Zp(st,a,et);break;case"selectionchange":if(Fb)break;case"keydown":case"keyup":Zp(st,a,et)}var Pt;if(Ju)t:{switch(e){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else fs?Pp(e,a)&&(kt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(kt="onCompositionStart");kt&&(Ip&&a.locale!=="ko"&&(fs||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&fs&&(Pt=Mp()):(Pr=et,$u="value"in Pr?Pr.value:Pr.textContent,fs=!0)),Et=bo(Y,kt),0<Et.length&&(kt=new Bp(kt,e,null,a,et),st.push({event:kt,listeners:Et}),Pt?kt.data=Pt:(Pt=Fp(a),Pt!==null&&(kt.data=Pt)))),(Pt=Rb?Mb(e,a):Db(e,a))&&(kt=bo(Y,"onBeforeInput"),0<kt.length&&(Et=new Bp("onBeforeInput","beforeinput",null,a,et),st.push({event:Et,listeners:kt}),Et.data=Pt)),b1(st,e,Y,a,et)}Ey(st,r)})}function qa(e,r,a){return{instance:e,listener:r,currentTarget:a}}function bo(e,r){for(var a=r+"Capture",u=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=da(e,a),f!=null&&u.unshift(qa(e,f,d)),f=da(e,r),f!=null&&u.push(qa(e,f,d))),e.tag===3)return u;e=e.return}return[]}function A1(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Sy(e,r,a,u,f){for(var d=r._reactName,v=[];a!==null&&a!==u;){var A=a,L=A.alternate,Y=A.stateNode;if(A=A.tag,L!==null&&L===u)break;A!==5&&A!==26&&A!==27||Y===null||(L=Y,f?(Y=da(a,d),Y!=null&&v.unshift(qa(a,Y,L))):f||(Y=da(a,d),Y!=null&&v.push(qa(a,Y,L)))),a=a.return}v.length!==0&&e.push({event:r,listeners:v})}var w1=/\r\n?/g,C1=/\u0000|\uFFFD/g;function Ay(e){return(typeof e=="string"?e:""+e).replace(w1,`
`).replace(C1,"")}function wy(e,r){return r=Ay(r),Ay(e)===r}function te(e,r,a,u,f,d){switch(a){case"children":typeof u=="string"?r==="body"||r==="textarea"&&u===""||us(e,u):(typeof u=="number"||typeof u=="bigint")&&r!=="body"&&us(e,""+u);break;case"className":Sl(e,"class",u);break;case"tabIndex":Sl(e,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Sl(e,a,u);break;case"style":wp(e,u,d);break;case"data":if(r!=="object"){Sl(e,"data",u);break}case"src":case"href":if(u===""&&(r!=="a"||a!=="href")){e.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=wl(""+u),e.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&te(e,r,"name",f.name,f,null),te(e,r,"formEncType",f.formEncType,f,null),te(e,r,"formMethod",f.formMethod,f,null),te(e,r,"formTarget",f.formTarget,f,null)):(te(e,r,"encType",f.encType,f,null),te(e,r,"method",f.method,f,null),te(e,r,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){e.removeAttribute(a);break}u=wl(""+u),e.setAttribute(a,u);break;case"onClick":u!=null&&(e.onclick=lr);break;case"onScroll":u!=null&&Gt("scroll",e);break;case"onScrollEnd":u!=null&&Gt("scrollend",e);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"multiple":e.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":e.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){e.removeAttribute("xlink:href");break}a=wl(""+u),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""+u):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":u===!0?e.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?e.setAttribute(a,u):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?e.setAttribute(a,u):e.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?e.removeAttribute(a):e.setAttribute(a,u);break;case"popover":Gt("beforetoggle",e),Gt("toggle",e),Tl(e,"popover",u);break;case"xlinkActuate":ar(e,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":ar(e,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":ar(e,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":ar(e,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":ar(e,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":ar(e,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":ar(e,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":ar(e,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":ar(e,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Tl(e,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=eb.get(a)||a,Tl(e,a,u))}}function Mc(e,r,a,u,f,d){switch(a){case"style":wp(e,u,d);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(n(61));if(a=u.__html,a!=null){if(f.children!=null)throw Error(n(60));e.innerHTML=a}}break;case"children":typeof u=="string"?us(e,u):(typeof u=="number"||typeof u=="bigint")&&us(e,""+u);break;case"onScroll":u!=null&&Gt("scroll",e);break;case"onScrollEnd":u!=null&&Gt("scrollend",e);break;case"onClick":u!=null&&(e.onclick=lr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!yp.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=e[Ne]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(r,d,f),typeof u=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(r,u,f);break t}a in e?e[a]=u:u===!0?e.setAttribute(a,""):Tl(e,a,u)}}}function Pe(e,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Gt("error",e),Gt("load",e);var u=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:te(e,r,d,v,a,null)}}f&&te(e,r,"srcSet",a.srcSet,a,null),u&&te(e,r,"src",a.src,a,null);return;case"input":Gt("invalid",e);var A=d=v=f=null,L=null,Y=null;for(u in a)if(a.hasOwnProperty(u)){var et=a[u];if(et!=null)switch(u){case"name":f=et;break;case"type":v=et;break;case"checked":L=et;break;case"defaultChecked":Y=et;break;case"value":d=et;break;case"defaultValue":A=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(n(137,r));break;default:te(e,r,u,et,a,null)}}Ep(e,d,A,L,Y,v,f,!1);return;case"select":Gt("invalid",e),u=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(A=a[f],A!=null))switch(f){case"value":d=A;break;case"defaultValue":v=A;break;case"multiple":u=A;default:te(e,r,f,A,a,null)}r=d,a=v,e.multiple=!!u,r!=null?os(e,!!u,r,!1):a!=null&&os(e,!!u,a,!0);return;case"textarea":Gt("invalid",e),d=f=u=null;for(v in a)if(a.hasOwnProperty(v)&&(A=a[v],A!=null))switch(v){case"value":u=A;break;case"defaultValue":f=A;break;case"children":d=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(n(91));break;default:te(e,r,v,A,a,null)}Sp(e,u,f,d);return;case"option":for(L in a)a.hasOwnProperty(L)&&(u=a[L],u!=null)&&(L==="selected"?e.selected=u&&typeof u!="function"&&typeof u!="symbol":te(e,r,L,u,a,null));return;case"dialog":Gt("beforetoggle",e),Gt("toggle",e),Gt("cancel",e),Gt("close",e);break;case"iframe":case"object":Gt("load",e);break;case"video":case"audio":for(u=0;u<ja.length;u++)Gt(ja[u],e);break;case"image":Gt("error",e),Gt("load",e);break;case"details":Gt("toggle",e);break;case"embed":case"source":case"link":Gt("error",e),Gt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in a)if(a.hasOwnProperty(Y)&&(u=a[Y],u!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,r));default:te(e,r,Y,u,a,null)}return;default:if(Xu(r)){for(et in a)a.hasOwnProperty(et)&&(u=a[et],u!==void 0&&Mc(e,r,et,u,a,void 0));return}}for(A in a)a.hasOwnProperty(A)&&(u=a[A],u!=null&&te(e,r,A,u,a,null))}function R1(e,r,a,u){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,A=null,L=null,Y=null,et=null;for(K in a){var st=a[K];if(a.hasOwnProperty(K)&&st!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":L=st;default:u.hasOwnProperty(K)||te(e,r,K,null,u,st)}}for(var W in u){var K=u[W];if(st=a[W],u.hasOwnProperty(W)&&(K!=null||st!=null))switch(W){case"type":d=K;break;case"name":f=K;break;case"checked":Y=K;break;case"defaultChecked":et=K;break;case"value":v=K;break;case"defaultValue":A=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(n(137,r));break;default:K!==st&&te(e,r,W,K,u,st)}}Hu(e,v,A,L,Y,et,d,f);return;case"select":K=v=A=W=null;for(d in a)if(L=a[d],a.hasOwnProperty(d)&&L!=null)switch(d){case"value":break;case"multiple":K=L;default:u.hasOwnProperty(d)||te(e,r,d,null,u,L)}for(f in u)if(d=u[f],L=a[f],u.hasOwnProperty(f)&&(d!=null||L!=null))switch(f){case"value":W=d;break;case"defaultValue":A=d;break;case"multiple":v=d;default:d!==L&&te(e,r,f,d,u,L)}r=A,a=v,u=K,W!=null?os(e,!!a,W,!1):!!u!=!!a&&(r!=null?os(e,!!a,r,!0):os(e,!!a,a?[]:"",!1));return;case"textarea":K=W=null;for(A in a)if(f=a[A],a.hasOwnProperty(A)&&f!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:te(e,r,A,null,u,f)}for(v in u)if(f=u[v],d=a[v],u.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":W=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(n(91));break;default:f!==d&&te(e,r,v,f,u,d)}Tp(e,W,K);return;case"option":for(var yt in a)W=a[yt],a.hasOwnProperty(yt)&&W!=null&&!u.hasOwnProperty(yt)&&(yt==="selected"?e.selected=!1:te(e,r,yt,null,u,W));for(L in u)W=u[L],K=a[L],u.hasOwnProperty(L)&&W!==K&&(W!=null||K!=null)&&(L==="selected"?e.selected=W&&typeof W!="function"&&typeof W!="symbol":te(e,r,L,W,u,K));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rt in a)W=a[Rt],a.hasOwnProperty(Rt)&&W!=null&&!u.hasOwnProperty(Rt)&&te(e,r,Rt,null,u,W);for(Y in u)if(W=u[Y],K=a[Y],u.hasOwnProperty(Y)&&W!==K&&(W!=null||K!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(n(137,r));break;default:te(e,r,Y,W,u,K)}return;default:if(Xu(r)){for(var ee in a)W=a[ee],a.hasOwnProperty(ee)&&W!==void 0&&!u.hasOwnProperty(ee)&&Mc(e,r,ee,void 0,u,W);for(et in u)W=u[et],K=a[et],!u.hasOwnProperty(et)||W===K||W===void 0&&K===void 0||Mc(e,r,et,W,u,K);return}}for(var k in a)W=a[k],a.hasOwnProperty(k)&&W!=null&&!u.hasOwnProperty(k)&&te(e,r,k,null,u,W);for(st in u)W=u[st],K=a[st],!u.hasOwnProperty(st)||W===K||W==null&&K==null||te(e,r,st,W,u,K)}function Cy(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function M1(){if(typeof performance.getEntriesByType=="function"){for(var e=0,r=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var f=a[u],d=f.transferSize,v=f.initiatorType,A=f.duration;if(d&&A&&Cy(v)){for(v=0,A=f.responseEnd,u+=1;u<a.length;u++){var L=a[u],Y=L.startTime;if(Y>A)break;var et=L.transferSize,st=L.initiatorType;et&&Cy(st)&&(L=L.responseEnd,v+=et*(L<A?1:(A-Y)/(L-Y)))}if(--u,r+=8*(d+v)/(f.duration/1e3),e++,10<e)break}}if(0<e)return r/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Dc=null,Oc=null;function Eo(e){return e.nodeType===9?e:e.ownerDocument}function Ry(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function My(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function Bc(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Nc=null;function D1(){var e=window.event;return e&&e.type==="popstate"?e===Nc?!1:(Nc=e,!0):(Nc=null,!1)}var Dy=typeof setTimeout=="function"?setTimeout:void 0,O1=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,B1=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(e){return Oy.resolve(null).then(e).catch(N1)}:Dy;function N1(e){setTimeout(function(){throw e})}function tn(e){return e==="head"}function By(e,r){var a=r,u=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(u===0){e.removeChild(f),zs(r);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")Ya(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Ya(a);for(var d=a.firstChild;d;){var v=d.nextSibling,A=d.nodeName;d[Hi]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&Ya(e.ownerDocument.body);a=f}while(a);zs(r)}function Ny(e,r){var a=e;e=0;do{var u=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=u}while(a)}function Ic(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Ic(a),ca(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function I1(e,r,a,u){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!u&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(u){if(!e[Hi])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=xi(e.nextSibling),e===null)break}return null}function U1(e,r,a){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=xi(e.nextSibling),e===null))return null;return e}function Iy(e,r){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=xi(e.nextSibling),e===null))return null;return e}function Uc(e){return e.data==="$?"||e.data==="$~"}function Lc(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function L1(e,r){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=r;else if(e.data!=="$?"||a.readyState!=="loading")r();else{var u=function(){r(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),e._reactRetry=u}}function xi(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return e}var Pc=null;function Uy(e){e=e.nextSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(r===0)return xi(e.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}e=e.nextSibling}return null}function Ly(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return e;r--}else a!=="/$"&&a!=="/&"||r++}e=e.previousSibling}return null}function Py(e,r,a){switch(r=Eo(a),e){case"html":if(e=r.documentElement,!e)throw Error(n(452));return e;case"head":if(e=r.head,!e)throw Error(n(453));return e;case"body":if(e=r.body,!e)throw Error(n(454));return e;default:throw Error(n(451))}}function Ya(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);ca(e)}var bi=new Map,Fy=new Set;function To(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Tr=R.d;R.d={f:P1,r:F1,D:G1,C:z1,L:H1,m:k1,X:V1,S:X1,M:j1};function P1(){var e=Tr.f(),r=po();return e||r}function F1(e){var r=ss(e);r!==null&&r.tag===5&&r.type==="form"?eg(r):Tr.r(e)}var Ps=typeof document>"u"?null:document;function Gy(e,r,a){var u=Ps;if(u&&typeof r=="string"&&r){var f=di(r);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Fy.has(f)||(Fy.add(f),e={rel:e,crossOrigin:a,href:r},u.querySelector(f)===null&&(r=u.createElement("link"),Pe(r,"link",e),Re(r),u.head.appendChild(r)))}}function G1(e){Tr.D(e),Gy("dns-prefetch",e,null)}function z1(e,r){Tr.C(e,r),Gy("preconnect",e,r)}function H1(e,r,a){Tr.L(e,r,a);var u=Ps;if(u&&e&&r){var f='link[rel="preload"][as="'+di(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+di(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+di(a.imageSizes)+'"]')):f+='[href="'+di(e)+'"]';var d=f;switch(r){case"style":d=Fs(e);break;case"script":d=Gs(e)}bi.has(d)||(e=y({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:e,as:r},a),bi.set(d,e),u.querySelector(f)!==null||r==="style"&&u.querySelector($a(d))||r==="script"&&u.querySelector(Wa(d))||(r=u.createElement("link"),Pe(r,"link",e),Re(r),u.head.appendChild(r)))}}function k1(e,r){Tr.m(e,r);var a=Ps;if(a&&e){var u=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+di(u)+'"][href="'+di(e)+'"]',d=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Gs(e)}if(!bi.has(d)&&(e=y({rel:"modulepreload",href:e},r),bi.set(d,e),a.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Wa(d)))return}u=a.createElement("link"),Pe(u,"link",e),Re(u),a.head.appendChild(u)}}}function X1(e,r,a){Tr.S(e,r,a);var u=Ps;if(u&&e){var f=as(u).hoistableStyles,d=Fs(e);r=r||"default";var v=f.get(d);if(!v){var A={loading:0,preload:null};if(v=u.querySelector($a(d)))A.loading=5;else{e=y({rel:"stylesheet",href:e,"data-precedence":r},a),(a=bi.get(d))&&Fc(e,a);var L=v=u.createElement("link");Re(L),Pe(L,"link",e),L._p=new Promise(function(Y,et){L.onload=Y,L.onerror=et}),L.addEventListener("load",function(){A.loading|=1}),L.addEventListener("error",function(){A.loading|=2}),A.loading|=4,So(v,r,u)}v={type:"stylesheet",instance:v,count:1,state:A},f.set(d,v)}}}function V1(e,r){Tr.X(e,r);var a=Ps;if(a&&e){var u=as(a).hoistableScripts,f=Gs(e),d=u.get(f);d||(d=a.querySelector(Wa(f)),d||(e=y({src:e,async:!0},r),(r=bi.get(f))&&Gc(e,r),d=a.createElement("script"),Re(d),Pe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function j1(e,r){Tr.M(e,r);var a=Ps;if(a&&e){var u=as(a).hoistableScripts,f=Gs(e),d=u.get(f);d||(d=a.querySelector(Wa(f)),d||(e=y({src:e,async:!0,type:"module"},r),(r=bi.get(f))&&Gc(e,r),d=a.createElement("script"),Re(d),Pe(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},u.set(f,d))}}function zy(e,r,a,u){var f=(f=at.current)?To(f):null;if(!f)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Fs(a.href),a=as(f).hoistableStyles,u=a.get(r),u||(u={type:"style",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Fs(a.href);var d=as(f).hoistableStyles,v=d.get(e);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,v),(d=f.querySelector($a(e)))&&!d._p&&(v.instance=d,v.state.loading=5),bi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},bi.set(e,a),d||q1(f,e,a,v.state))),r&&u===null)throw Error(n(528,""));return v}if(r&&u!==null)throw Error(n(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Gs(a),a=as(f).hoistableScripts,u=a.get(r),u||(u={type:"script",instance:null,count:0,state:null},a.set(r,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Fs(e){return'href="'+di(e)+'"'}function $a(e){return'link[rel="stylesheet"]['+e+"]"}function Hy(e){return y({},e,{"data-precedence":e.precedence,precedence:null})}function q1(e,r,a,u){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?u.loading=1:(r=e.createElement("link"),u.preload=r,r.addEventListener("load",function(){return u.loading|=1}),r.addEventListener("error",function(){return u.loading|=2}),Pe(r,"link",a),Re(r),e.head.appendChild(r))}function Gs(e){return'[src="'+di(e)+'"]'}function Wa(e){return"script[async]"+e}function ky(e,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var u=e.querySelector('style[data-href~="'+di(a.href)+'"]');if(u)return r.instance=u,Re(u),u;var f=y({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(e.ownerDocument||e).createElement("style"),Re(u),Pe(u,"style",f),So(u,a.precedence,e),r.instance=u;case"stylesheet":f=Fs(a.href);var d=e.querySelector($a(f));if(d)return r.state.loading|=4,r.instance=d,Re(d),d;u=Hy(a),(f=bi.get(f))&&Fc(u,f),d=(e.ownerDocument||e).createElement("link"),Re(d);var v=d;return v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Pe(d,"link",u),r.state.loading|=4,So(d,a.precedence,e),r.instance=d;case"script":return d=Gs(a.src),(f=e.querySelector(Wa(d)))?(r.instance=f,Re(f),f):(u=a,(f=bi.get(d))&&(u=y({},a),Gc(u,f)),e=e.ownerDocument||e,f=e.createElement("script"),Re(f),Pe(f,"link",u),e.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(n(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(u=r.instance,r.state.loading|=4,So(u,a.precedence,e));return r.instance}function So(e,r,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,d=f,v=0;v<u.length;v++){var A=u[v];if(A.dataset.precedence===r)d=A;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(e,r.firstChild))}function Fc(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function Gc(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Ao=null;function Xy(e,r,a){if(Ao===null){var u=new Map,f=Ao=new Map;f.set(a,u)}else f=Ao,u=f.get(a),u||(u=new Map,f.set(a,u));if(u.has(e))return u;for(u.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Hi]||d[me]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=e+v;var A=u.get(v);A?A.push(d):u.set(v,[d])}}return u}function Vy(e,r,a){e=e.ownerDocument||e,e.head.insertBefore(a,r==="title"?e.querySelector("head > title"):null)}function Y1(e,r,a){if(a===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(e=r.disabled,typeof r.precedence=="string"&&e==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jy(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function $1(e,r,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Fs(u.href),d=r.querySelector($a(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(e.count++,e=wo.bind(e),r.then(e,e)),a.state.loading|=4,a.instance=d,Re(d);return}d=r.ownerDocument||r,u=Hy(u),(f=bi.get(f))&&Fc(u,f),d=d.createElement("link"),Re(d);var v=d;v._p=new Promise(function(A,L){v.onload=A,v.onerror=L}),Pe(d,"link",u),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=wo.bind(e),r.addEventListener("load",a),r.addEventListener("error",a))}}var zc=0;function W1(e,r){return e.stylesheets&&e.count===0&&Ro(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var u=setTimeout(function(){if(e.stylesheets&&Ro(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+r);0<e.imgBytes&&zc===0&&(zc=62500*M1());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ro(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>zc?50:800)+r);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(u),clearTimeout(f)}}:null}function wo(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ro(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Co=null;function Ro(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Co=new Map,r.forEach(Z1,e),Co=null,wo.call(e))}function Z1(e,r){if(!(r.state.loading&4)){var a=Co.get(e);if(a)var u=a.get(null);else{a=new Map,Co.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),u=v)}u&&a.set(null,u)}f=r.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||u,d===u&&a.set(null,f),a.set(v,f),this.count++,u=wo.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),r.state.loading|=4}}var Za={$$typeof:O,Provider:null,Consumer:null,_currentValue:M,_currentValue2:M,_threadCount:0};function K1(e,r,a,u,f,d,v,A,L){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xe(0),this.hiddenUpdates=Xe(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function qy(e,r,a,u,f,d,v,A,L,Y,et,st){return e=new K1(e,r,a,v,L,Y,et,st,A),r=1,d===!0&&(r|=24),d=ri(3,null,null,r),e.current=d,d.stateNode=e,r=_h(),r.refCount++,e.pooledCache=r,r.refCount++,d.memoizedState={element:u,isDehydrated:a,cache:r},Th(d),e}function Yy(e){return e?(e=gs,e):gs}function $y(e,r,a,u,f,d){f=Yy(f),u.context===null?u.context=f:u.pendingContext=f,u=Xr(r),u.payload={element:a},d=d===void 0?null:d,d!==null&&(u.callback=d),a=Vr(e,u,r),a!==null&&(Qe(a,e,r),Ra(a,e,r))}function Wy(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function Hc(e,r){Wy(e,r),(e=e.alternate)&&Wy(e,r)}function Zy(e){if(e.tag===13||e.tag===31){var r=An(e,67108864);r!==null&&Qe(r,e,67108864),Hc(e,67108864)}}function Ky(e){if(e.tag===13||e.tag===31){var r=oi();r=Lr(r);var a=An(e,r);a!==null&&Qe(a,e,r),Hc(e,r)}}var Mo=!0;function Q1(e,r,a,u){var f=E.T;E.T=null;var d=R.p;try{R.p=2,kc(e,r,a,u)}finally{R.p=d,E.T=f}}function J1(e,r,a,u){var f=E.T;E.T=null;var d=R.p;try{R.p=8,kc(e,r,a,u)}finally{R.p=d,E.T=f}}function kc(e,r,a,u){if(Mo){var f=Xc(u);if(f===null)Rc(e,r,u,Do,a),Jy(e,u);else if(eE(f,e,r,a,u))u.stopPropagation();else if(Jy(e,u),r&4&&-1<tE.indexOf(e)){for(;f!==null;){var d=ss(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=ke(d.pendingLanes);if(v!==0){var A=d;for(A.pendingLanes|=2,A.entangledLanes|=2;v;){var L=1<<31-V(v);A.entanglements[1]|=L,v&=~L}ji(d),($t&6)===0&&(co=_e()+500,Va(0))}}break;case 31:case 13:A=An(d,2),A!==null&&Qe(A,d,2),po(),Hc(d,2)}if(d=Xc(u),d===null&&Rc(e,r,u,Do,a),d===f)break;f=d}f!==null&&u.stopPropagation()}else Rc(e,r,u,null,a)}}function Xc(e){return e=ju(e),Vc(e)}var Do=null;function Vc(e){if(Do=null,e=sr(e),e!==null){var r=o(e);if(r===null)e=null;else{var a=r.tag;if(a===13){if(e=h(r),e!==null)return e;e=null}else if(a===31){if(e=c(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Do=e,null}function Qy(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pu()){case xl:return 2;case aa:return 8;case ts:case vn:return 32;case es:return 268435456;default:return 32}default:return 32}}var jc=!1,en=null,rn=null,nn=null,Ka=new Map,Qa=new Map,sn=[],tE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Jy(e,r){switch(e){case"focusin":case"focusout":en=null;break;case"dragenter":case"dragleave":rn=null;break;case"mouseover":case"mouseout":nn=null;break;case"pointerover":case"pointerout":Ka.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(r.pointerId)}}function Ja(e,r,a,u,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:r,domEventName:a,eventSystemFlags:u,nativeEvent:d,targetContainers:[f]},r!==null&&(r=ss(r),r!==null&&Zy(r)),e):(e.eventSystemFlags|=u,r=e.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),e)}function eE(e,r,a,u,f){switch(r){case"focusin":return en=Ja(en,e,r,a,u,f),!0;case"dragenter":return rn=Ja(rn,e,r,a,u,f),!0;case"mouseover":return nn=Ja(nn,e,r,a,u,f),!0;case"pointerover":var d=f.pointerId;return Ka.set(d,Ja(Ka.get(d)||null,e,r,a,u,f)),!0;case"gotpointercapture":return d=f.pointerId,Qa.set(d,Ja(Qa.get(d)||null,e,r,a,u,f)),!0}return!1}function tv(e){var r=sr(e.target);if(r!==null){var a=o(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){e.blockedOn=r,ua(e.priority,function(){Ky(a)});return}}else if(r===31){if(r=c(a),r!==null){e.blockedOn=r,ua(e.priority,function(){Ky(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Oo(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=Xc(e.nativeEvent);if(a===null){a=e.nativeEvent;var u=new a.constructor(a.type,a);Vu=u,a.target.dispatchEvent(u),Vu=null}else return r=ss(a),r!==null&&Zy(r),e.blockedOn=a,!1;r.shift()}return!0}function ev(e,r,a){Oo(e)&&a.delete(r)}function iE(){jc=!1,en!==null&&Oo(en)&&(en=null),rn!==null&&Oo(rn)&&(rn=null),nn!==null&&Oo(nn)&&(nn=null),Ka.forEach(ev),Qa.forEach(ev)}function Bo(e,r){e.blockedOn===r&&(e.blockedOn=null,jc||(jc=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,iE)))}var No=null;function iv(e){No!==e&&(No=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){No===e&&(No=null);for(var r=0;r<e.length;r+=3){var a=e[r],u=e[r+1],f=e[r+2];if(typeof u!="function"){if(Vc(u||a)===null)continue;break}var d=ss(a);d!==null&&(e.splice(r,3),r-=3,Xh(d,{pending:!0,data:f,method:a.method,action:u},u,f))}}))}function zs(e){function r(L){return Bo(L,e)}en!==null&&Bo(en,e),rn!==null&&Bo(rn,e),nn!==null&&Bo(nn,e),Ka.forEach(r),Qa.forEach(r);for(var a=0;a<sn.length;a++){var u=sn[a];u.blockedOn===e&&(u.blockedOn=null)}for(;0<sn.length&&(a=sn[0],a.blockedOn===null);)tv(a),a.blockedOn===null&&sn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var f=a[u],d=a[u+1],v=f[Ne]||null;if(typeof d=="function")v||iv(a);else if(v){var A=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[Ne]||null)A=v.formAction;else if(Vc(f)!==null)continue}else A=v.action;typeof A=="function"?a[u+1]=A:(a.splice(u,3),u-=3),iv(a)}}}function rv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function qc(e){this._internalRoot=e}Io.prototype.render=qc.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(n(409));var a=r.current,u=oi();$y(a,u,e,r,null,null)},Io.prototype.unmount=qc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;$y(e.current,2,null,e,null,null),po(),r[zi]=null}};function Io(e){this._internalRoot=e}Io.prototype.unstable_scheduleHydration=function(e){if(e){var r=rs();e={blockedOn:null,target:e,priority:r};for(var a=0;a<sn.length&&r!==0&&r<sn[a].priority;a++);sn.splice(a,0,e),a===0&&tv(e)}};var nv=t.version;if(nv!=="19.2.3")throw Error(n(527,nv,"19.2.3"));R.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=m(r),e=e!==null?g(e):null,e=e===null?null:e.stateNode,e};var rE={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Uo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Uo.isDisabled&&Uo.supportsFiber)try{_n=Uo.inject(rE),Be=Uo}catch{}}return el.createRoot=function(e,r){if(!l(e))throw Error(n(299));var a=!1,u="",f=cg,d=fg,v=dg;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=qy(e,1,!1,null,null,a,u,null,f,d,v,rv),e[zi]=r.current,Cc(e),new qc(r)},el.hydrateRoot=function(e,r,a){if(!l(e))throw Error(n(299));var u=!1,f="",d=cg,v=fg,A=dg,L=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(A=a.onRecoverableError),a.formState!==void 0&&(L=a.formState)),r=qy(e,1,!0,r,a??null,u,f,L,d,v,A,rv),r.context=Yy(null),a=r.current,u=oi(),u=Lr(u),f=Xr(u),f.callback=null,Vr(a,f,u),a=u,r.current.lanes=a,Ir(r,a),ji(r),e[zi]=r.current,Cc(e),new Io(r)},el.version="19.2.3",el}var pv;function pE(){if(pv)return Wc.exports;pv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Wc.exports=dE(),Wc.exports}var mE=pE(),Qn=(s=>(s[s.WEBGL_LEGACY=0]="WEBGL_LEGACY",s[s.WEBGL=1]="WEBGL",s[s.WEBGL2=2]="WEBGL2",s))(Qn||{}),b_=(s=>(s[s.UNKNOWN=0]="UNKNOWN",s[s.WEBGL=1]="WEBGL",s[s.CANVAS=2]="CANVAS",s))(b_||{}),xd=(s=>(s[s.COLOR=16384]="COLOR",s[s.DEPTH=256]="DEPTH",s[s.STENCIL=1024]="STENCIL",s))(xd||{}),Mt=(s=>(s[s.NORMAL=0]="NORMAL",s[s.ADD=1]="ADD",s[s.MULTIPLY=2]="MULTIPLY",s[s.SCREEN=3]="SCREEN",s[s.OVERLAY=4]="OVERLAY",s[s.DARKEN=5]="DARKEN",s[s.LIGHTEN=6]="LIGHTEN",s[s.COLOR_DODGE=7]="COLOR_DODGE",s[s.COLOR_BURN=8]="COLOR_BURN",s[s.HARD_LIGHT=9]="HARD_LIGHT",s[s.SOFT_LIGHT=10]="SOFT_LIGHT",s[s.DIFFERENCE=11]="DIFFERENCE",s[s.EXCLUSION=12]="EXCLUSION",s[s.HUE=13]="HUE",s[s.SATURATION=14]="SATURATION",s[s.COLOR=15]="COLOR",s[s.LUMINOSITY=16]="LUMINOSITY",s[s.NORMAL_NPM=17]="NORMAL_NPM",s[s.ADD_NPM=18]="ADD_NPM",s[s.SCREEN_NPM=19]="SCREEN_NPM",s[s.NONE=20]="NONE",s[s.SRC_OVER=0]="SRC_OVER",s[s.SRC_IN=21]="SRC_IN",s[s.SRC_OUT=22]="SRC_OUT",s[s.SRC_ATOP=23]="SRC_ATOP",s[s.DST_OVER=24]="DST_OVER",s[s.DST_IN=25]="DST_IN",s[s.DST_OUT=26]="DST_OUT",s[s.DST_ATOP=27]="DST_ATOP",s[s.ERASE=26]="ERASE",s[s.SUBTRACT=28]="SUBTRACT",s[s.XOR=29]="XOR",s))(Mt||{}),Qi=(s=>(s[s.POINTS=0]="POINTS",s[s.LINES=1]="LINES",s[s.LINE_LOOP=2]="LINE_LOOP",s[s.LINE_STRIP=3]="LINE_STRIP",s[s.TRIANGLES=4]="TRIANGLES",s[s.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",s[s.TRIANGLE_FAN=6]="TRIANGLE_FAN",s))(Qi||{}),ht=(s=>(s[s.RGBA=6408]="RGBA",s[s.RGB=6407]="RGB",s[s.RG=33319]="RG",s[s.RED=6403]="RED",s[s.RGBA_INTEGER=36249]="RGBA_INTEGER",s[s.RGB_INTEGER=36248]="RGB_INTEGER",s[s.RG_INTEGER=33320]="RG_INTEGER",s[s.RED_INTEGER=36244]="RED_INTEGER",s[s.ALPHA=6406]="ALPHA",s[s.LUMINANCE=6409]="LUMINANCE",s[s.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",s[s.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",s[s.DEPTH_STENCIL=34041]="DEPTH_STENCIL",s))(ht||{}),Zs=(s=>(s[s.TEXTURE_2D=3553]="TEXTURE_2D",s[s.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",s[s.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",s[s.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",s[s.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",s[s.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",s[s.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",s[s.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",s))(Zs||{}),wt=(s=>(s[s.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",s[s.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",s[s.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",s[s.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",s[s.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",s[s.UNSIGNED_INT=5125]="UNSIGNED_INT",s[s.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",s[s.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",s[s.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",s[s.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",s[s.BYTE=5120]="BYTE",s[s.SHORT=5122]="SHORT",s[s.INT=5124]="INT",s[s.FLOAT=5126]="FLOAT",s[s.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",s[s.HALF_FLOAT=36193]="HALF_FLOAT",s))(wt||{}),mt=(s=>(s[s.FLOAT=0]="FLOAT",s[s.INT=1]="INT",s[s.UINT=2]="UINT",s))(mt||{}),wr=(s=>(s[s.NEAREST=0]="NEAREST",s[s.LINEAR=1]="LINEAR",s))(wr||{}),pn=(s=>(s[s.CLAMP=33071]="CLAMP",s[s.REPEAT=10497]="REPEAT",s[s.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",s))(pn||{}),er=(s=>(s[s.OFF=0]="OFF",s[s.POW2=1]="POW2",s[s.ON=2]="ON",s[s.ON_MANUAL=3]="ON_MANUAL",s))(er||{}),Je=(s=>(s[s.NPM=0]="NPM",s[s.UNPACK=1]="UNPACK",s[s.PMA=2]="PMA",s[s.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",s[s.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",s[s.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",s))(Je||{}),Ki=(s=>(s[s.NO=0]="NO",s[s.YES=1]="YES",s[s.AUTO=2]="AUTO",s[s.BLEND=0]="BLEND",s[s.CLEAR=1]="CLEAR",s[s.BLIT=2]="BLIT",s))(Ki||{}),np=(s=>(s[s.AUTO=0]="AUTO",s[s.MANUAL=1]="MANUAL",s))(np||{}),Si=(s=>(s.LOW="lowp",s.MEDIUM="mediump",s.HIGH="highp",s))(Si||{}),we=(s=>(s[s.NONE=0]="NONE",s[s.SCISSOR=1]="SCISSOR",s[s.STENCIL=2]="STENCIL",s[s.SPRITE=3]="SPRITE",s[s.COLOR=4]="COLOR",s))(we||{}),Se=(s=>(s[s.NONE=0]="NONE",s[s.LOW=2]="LOW",s[s.MEDIUM=4]="MEDIUM",s[s.HIGH=8]="HIGH",s))(Se||{}),Ji=(s=>(s[s.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",s[s.ARRAY_BUFFER=34962]="ARRAY_BUFFER",s[s.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",s))(Ji||{});const gE={createCanvas:(s,t)=>{const i=document.createElement("canvas");return i.width=s,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(s,t)=>fetch(s,t),parseXML:s=>new DOMParser().parseFromString(s,"text/xml")},gt={ADAPTER:gE,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var Jc=/iPhone/i,mv=/iPod/i,gv=/iPad/i,yv=/\biOS-universal(?:.+)Mac\b/i,tf=/\bAndroid(?:.+)Mobile\b/i,vv=/Android/i,Hs=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Lo=/Silk/i,Sr=/Windows Phone/i,_v=/\bWindows(?:.+)ARM\b/i,xv=/BlackBerry/i,bv=/BB10/i,Ev=/Opera Mini/i,Tv=/\b(CriOS|Chrome)(?:.+)Mobile/i,Sv=/Mobile(?:.+)Firefox\b/i,Av=function(s){return typeof s<"u"&&s.platform==="MacIntel"&&typeof s.maxTouchPoints=="number"&&s.maxTouchPoints>1&&typeof MSStream>"u"};function yE(s){return function(t){return t.test(s)}}function wv(s){var t={userAgent:"",platform:"",maxTouchPoints:0};!s&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof s=="string"?t.userAgent=s:s&&s.userAgent&&(t={userAgent:s.userAgent,platform:s.platform,maxTouchPoints:s.maxTouchPoints||0});var i=t.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var l=yE(i),o={apple:{phone:l(Jc)&&!l(Sr),ipod:l(mv),tablet:!l(Jc)&&(l(gv)||Av(t))&&!l(Sr),universal:l(yv),device:(l(Jc)||l(mv)||l(gv)||l(yv)||Av(t))&&!l(Sr)},amazon:{phone:l(Hs),tablet:!l(Hs)&&l(Lo),device:l(Hs)||l(Lo)},android:{phone:!l(Sr)&&l(Hs)||!l(Sr)&&l(tf),tablet:!l(Sr)&&!l(Hs)&&!l(tf)&&(l(Lo)||l(vv)),device:!l(Sr)&&(l(Hs)||l(Lo)||l(tf)||l(vv))||l(/\bokhttp\b/i)},windows:{phone:l(Sr),tablet:l(_v),device:l(Sr)||l(_v)},other:{blackberry:l(xv),blackberry10:l(bv),opera:l(Ev),firefox:l(Sv),chrome:l(Tv),device:l(xv)||l(bv)||l(Ev)||l(Sv)||l(Tv)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}const vE=wv.default??wv,Cr=vE(globalThis.navigator);gt.RETINA_PREFIX=/@([0-9\.]+)x/;gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var ef={exports:{}},Cv;function _E(){return Cv||(Cv=1,(function(s){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function l(p,m,g){this.fn=p,this.context=m,this.once=g||!1}function o(p,m,g,y,_){if(typeof g!="function")throw new TypeError("The listener must be a function");var x=new l(g,y||p,_),b=i?i+m:m;return p._events[b]?p._events[b].fn?p._events[b]=[p._events[b],x]:p._events[b].push(x):(p._events[b]=x,p._eventsCount++),p}function h(p,m){--p._eventsCount===0?p._events=new n:delete p._events[m]}function c(){this._events=new n,this._eventsCount=0}c.prototype.eventNames=function(){var m=[],g,y;if(this._eventsCount===0)return m;for(y in g=this._events)t.call(g,y)&&m.push(i?y.slice(1):y);return Object.getOwnPropertySymbols?m.concat(Object.getOwnPropertySymbols(g)):m},c.prototype.listeners=function(m){var g=i?i+m:m,y=this._events[g];if(!y)return[];if(y.fn)return[y.fn];for(var _=0,x=y.length,b=new Array(x);_<x;_++)b[_]=y[_].fn;return b},c.prototype.listenerCount=function(m){var g=i?i+m:m,y=this._events[g];return y?y.fn?1:y.length:0},c.prototype.emit=function(m,g,y,_,x,b){var w=i?i+m:m;if(!this._events[w])return!1;var S=this._events[w],C=arguments.length,U,O;if(S.fn){switch(S.once&&this.removeListener(m,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,g),!0;case 3:return S.fn.call(S.context,g,y),!0;case 4:return S.fn.call(S.context,g,y,_),!0;case 5:return S.fn.call(S.context,g,y,_,x),!0;case 6:return S.fn.call(S.context,g,y,_,x,b),!0}for(O=1,U=new Array(C-1);O<C;O++)U[O-1]=arguments[O];S.fn.apply(S.context,U)}else{var P=S.length,B;for(O=0;O<P;O++)switch(S[O].once&&this.removeListener(m,S[O].fn,void 0,!0),C){case 1:S[O].fn.call(S[O].context);break;case 2:S[O].fn.call(S[O].context,g);break;case 3:S[O].fn.call(S[O].context,g,y);break;case 4:S[O].fn.call(S[O].context,g,y,_);break;default:if(!U)for(B=1,U=new Array(C-1);B<C;B++)U[B-1]=arguments[B];S[O].fn.apply(S[O].context,U)}}return!0},c.prototype.on=function(m,g,y){return o(this,m,g,y,!1)},c.prototype.once=function(m,g,y){return o(this,m,g,y,!0)},c.prototype.removeListener=function(m,g,y,_){var x=i?i+m:m;if(!this._events[x])return this;if(!g)return h(this,x),this;var b=this._events[x];if(b.fn)b.fn===g&&(!_||b.once)&&(!y||b.context===y)&&h(this,x);else{for(var w=0,S=[],C=b.length;w<C;w++)(b[w].fn!==g||_&&!b[w].once||y&&b[w].context!==y)&&S.push(b[w]);S.length?this._events[x]=S.length===1?S[0]:S:h(this,x)}return this},c.prototype.removeAllListeners=function(m){var g;return m?(g=i?i+m:m,this._events[g]&&h(this,g)):(this._events=new n,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,s.exports=c})(ef)),ef.exports}var xE=_E();const yl=x_(xE);var Po={exports:{}},Rv;function bE(){if(Rv)return Po.exports;Rv=1,Po.exports=s,Po.exports.default=s;function s(E,R,M){M=M||2;var z=R&&R.length,I=z?R[0]*M:E.length,T=t(E,0,I,M,!0),N=[];if(!T||T.next===T.prev)return N;var F,X,tt,at,ot,ft,ct;if(z&&(T=p(E,R,T,M)),E.length>80*M){F=tt=E[0],X=at=E[1];for(var ut=M;ut<I;ut+=M)ot=E[ut],ft=E[ut+1],ot<F&&(F=ot),ft<X&&(X=ft),ot>tt&&(tt=ot),ft>at&&(at=ft);ct=Math.max(tt-F,at-X),ct=ct!==0?32767/ct:0}return n(T,N,M,F,X,ct,0),N}function t(E,R,M,z,I){var T,N;if(I===pt(E,R,M,z)>0)for(T=R;T<M;T+=z)N=H(T,E[T],E[T+1],N);else for(T=M-z;T>=R;T-=z)N=H(T,E[T],E[T+1],N);return N&&P(N,N.next)&&(J(N),N=N.next),N}function i(E,R){if(!E)return E;R||(R=E);var M=E,z;do if(z=!1,!M.steiner&&(P(M,M.next)||O(M.prev,M,M.next)===0)){if(J(M),M=R=M.prev,M===M.next)break;z=!0}else M=M.next;while(z||M!==R);return R}function n(E,R,M,z,I,T,N){if(E){!N&&T&&x(E,z,I,T);for(var F=E,X,tt;E.prev!==E.next;){if(X=E.prev,tt=E.next,T?o(E,z,I,T):l(E)){R.push(X.i/M|0),R.push(E.i/M|0),R.push(tt.i/M|0),J(E),E=tt.next,F=tt.next;continue}if(E=tt,E===F){N?N===1?(E=h(i(E),R,M),n(E,R,M,z,I,T,2)):N===2&&c(E,R,M,z,I,T):n(i(E),R,M,z,I,T,1);break}}}}function l(E){var R=E.prev,M=E,z=E.next;if(O(R,M,z)>=0)return!1;for(var I=R.x,T=M.x,N=z.x,F=R.y,X=M.y,tt=z.y,at=I<T?I<N?I:N:T<N?T:N,ot=F<X?F<tt?F:tt:X<tt?X:tt,ft=I>T?I>N?I:N:T>N?T:N,ct=F>X?F>tt?F:tt:X>tt?X:tt,ut=z.next;ut!==R;){if(ut.x>=at&&ut.x<=ft&&ut.y>=ot&&ut.y<=ct&&C(I,F,T,X,N,tt,ut.x,ut.y)&&O(ut.prev,ut,ut.next)>=0)return!1;ut=ut.next}return!0}function o(E,R,M,z){var I=E.prev,T=E,N=E.next;if(O(I,T,N)>=0)return!1;for(var F=I.x,X=T.x,tt=N.x,at=I.y,ot=T.y,ft=N.y,ct=F<X?F<tt?F:tt:X<tt?X:tt,ut=at<ot?at<ft?at:ft:ot<ft?ot:ft,vt=F>X?F>tt?F:tt:X>tt?X:tt,xt=at>ot?at>ft?at:ft:ot>ft?ot:ft,Dt=w(ct,ut,R,M,z),Ot=w(vt,xt,R,M,z),_t=E.prevZ,bt=E.nextZ;_t&&_t.z>=Dt&&bt&&bt.z<=Ot;){if(_t.x>=ct&&_t.x<=vt&&_t.y>=ut&&_t.y<=xt&&_t!==I&&_t!==N&&C(F,at,X,ot,tt,ft,_t.x,_t.y)&&O(_t.prev,_t,_t.next)>=0||(_t=_t.prevZ,bt.x>=ct&&bt.x<=vt&&bt.y>=ut&&bt.y<=xt&&bt!==I&&bt!==N&&C(F,at,X,ot,tt,ft,bt.x,bt.y)&&O(bt.prev,bt,bt.next)>=0))return!1;bt=bt.nextZ}for(;_t&&_t.z>=Dt;){if(_t.x>=ct&&_t.x<=vt&&_t.y>=ut&&_t.y<=xt&&_t!==I&&_t!==N&&C(F,at,X,ot,tt,ft,_t.x,_t.y)&&O(_t.prev,_t,_t.next)>=0)return!1;_t=_t.prevZ}for(;bt&&bt.z<=Ot;){if(bt.x>=ct&&bt.x<=vt&&bt.y>=ut&&bt.y<=xt&&bt!==I&&bt!==N&&C(F,at,X,ot,tt,ft,bt.x,bt.y)&&O(bt.prev,bt,bt.next)>=0)return!1;bt=bt.nextZ}return!0}function h(E,R,M){var z=E;do{var I=z.prev,T=z.next.next;!P(I,T)&&B(I,z,z.next,T)&&nt(I,T)&&nt(T,I)&&(R.push(I.i/M|0),R.push(z.i/M|0),R.push(T.i/M|0),J(z),J(z.next),z=E=T),z=z.next}while(z!==E);return i(z)}function c(E,R,M,z,I,T){var N=E;do{for(var F=N.next.next;F!==N.prev;){if(N.i!==F.i&&U(N,F)){var X=it(N,F);N=i(N,N.next),X=i(X,X.next),n(N,R,M,z,I,T,0),n(X,R,M,z,I,T,0);return}F=F.next}N=N.next}while(N!==E)}function p(E,R,M,z){var I=[],T,N,F,X,tt;for(T=0,N=R.length;T<N;T++)F=R[T]*z,X=T<N-1?R[T+1]*z:E.length,tt=t(E,F,X,z,!1),tt===tt.next&&(tt.steiner=!0),I.push(S(tt));for(I.sort(m),T=0;T<I.length;T++)M=g(I[T],M);return M}function m(E,R){return E.x-R.x}function g(E,R){var M=y(E,R);if(!M)return R;var z=it(M,E);return i(z,z.next),i(M,M.next)}function y(E,R){var M=R,z=E.x,I=E.y,T=-1/0,N;do{if(I<=M.y&&I>=M.next.y&&M.next.y!==M.y){var F=M.x+(I-M.y)*(M.next.x-M.x)/(M.next.y-M.y);if(F<=z&&F>T&&(T=F,N=M.x<M.next.x?M:M.next,F===z))return N}M=M.next}while(M!==R);if(!N)return null;var X=N,tt=N.x,at=N.y,ot=1/0,ft;M=N;do z>=M.x&&M.x>=tt&&z!==M.x&&C(I<at?z:T,I,tt,at,I<at?T:z,I,M.x,M.y)&&(ft=Math.abs(I-M.y)/(z-M.x),nt(M,E)&&(ft<ot||ft===ot&&(M.x>N.x||M.x===N.x&&_(N,M)))&&(N=M,ot=ft)),M=M.next;while(M!==X);return N}function _(E,R){return O(E.prev,E,R.prev)<0&&O(R.next,E,E.next)<0}function x(E,R,M,z){var I=E;do I.z===0&&(I.z=w(I.x,I.y,R,M,z)),I.prevZ=I.prev,I.nextZ=I.next,I=I.next;while(I!==E);I.prevZ.nextZ=null,I.prevZ=null,b(I)}function b(E){var R,M,z,I,T,N,F,X,tt=1;do{for(M=E,E=null,T=null,N=0;M;){for(N++,z=M,F=0,R=0;R<tt&&(F++,z=z.nextZ,!!z);R++);for(X=tt;F>0||X>0&&z;)F!==0&&(X===0||!z||M.z<=z.z)?(I=M,M=M.nextZ,F--):(I=z,z=z.nextZ,X--),T?T.nextZ=I:E=I,I.prevZ=T,T=I;M=z}T.nextZ=null,tt*=2}while(N>1);return E}function w(E,R,M,z,I){return E=(E-M)*I|0,R=(R-z)*I|0,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,R=(R|R<<8)&16711935,R=(R|R<<4)&252645135,R=(R|R<<2)&858993459,R=(R|R<<1)&1431655765,E|R<<1}function S(E){var R=E,M=E;do(R.x<M.x||R.x===M.x&&R.y<M.y)&&(M=R),R=R.next;while(R!==E);return M}function C(E,R,M,z,I,T,N,F){return(I-N)*(R-F)>=(E-N)*(T-F)&&(E-N)*(z-F)>=(M-N)*(R-F)&&(M-N)*(T-F)>=(I-N)*(z-F)}function U(E,R){return E.next.i!==R.i&&E.prev.i!==R.i&&!$(E,R)&&(nt(E,R)&&nt(R,E)&&lt(E,R)&&(O(E.prev,E,R.prev)||O(E,R.prev,R))||P(E,R)&&O(E.prev,E,E.next)>0&&O(R.prev,R,R.next)>0)}function O(E,R,M){return(R.y-E.y)*(M.x-R.x)-(R.x-E.x)*(M.y-R.y)}function P(E,R){return E.x===R.x&&E.y===R.y}function B(E,R,M,z){var I=D(O(E,R,M)),T=D(O(E,R,z)),N=D(O(M,z,E)),F=D(O(M,z,R));return!!(I!==T&&N!==F||I===0&&j(E,M,R)||T===0&&j(E,z,R)||N===0&&j(M,E,z)||F===0&&j(M,R,z))}function j(E,R,M){return R.x<=Math.max(E.x,M.x)&&R.x>=Math.min(E.x,M.x)&&R.y<=Math.max(E.y,M.y)&&R.y>=Math.min(E.y,M.y)}function D(E){return E>0?1:E<0?-1:0}function $(E,R){var M=E;do{if(M.i!==E.i&&M.next.i!==E.i&&M.i!==R.i&&M.next.i!==R.i&&B(M,M.next,E,R))return!0;M=M.next}while(M!==E);return!1}function nt(E,R){return O(E.prev,E,E.next)<0?O(E,R,E.next)>=0&&O(E,E.prev,R)>=0:O(E,R,E.prev)<0||O(E,E.next,R)<0}function lt(E,R){var M=E,z=!1,I=(E.x+R.x)/2,T=(E.y+R.y)/2;do M.y>T!=M.next.y>T&&M.next.y!==M.y&&I<(M.next.x-M.x)*(T-M.y)/(M.next.y-M.y)+M.x&&(z=!z),M=M.next;while(M!==E);return z}function it(E,R){var M=new Q(E.i,E.x,E.y),z=new Q(R.i,R.x,R.y),I=E.next,T=R.prev;return E.next=R,R.prev=E,M.next=I,I.prev=M,z.next=M,M.prev=z,T.next=z,z.prev=T,z}function H(E,R,M,z){var I=new Q(E,R,M);return z?(I.next=z.next,I.prev=z,z.next.prev=I,z.next=I):(I.prev=I,I.next=I),I}function J(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function Q(E,R,M){this.i=E,this.x=R,this.y=M,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}s.deviation=function(E,R,M,z){var I=R&&R.length,T=I?R[0]*M:E.length,N=Math.abs(pt(E,0,T,M));if(I)for(var F=0,X=R.length;F<X;F++){var tt=R[F]*M,at=F<X-1?R[F+1]*M:E.length;N-=Math.abs(pt(E,tt,at,M))}var ot=0;for(F=0;F<z.length;F+=3){var ft=z[F]*M,ct=z[F+1]*M,ut=z[F+2]*M;ot+=Math.abs((E[ft]-E[ut])*(E[ct+1]-E[ft+1])-(E[ft]-E[ct])*(E[ut+1]-E[ft+1]))}return N===0&&ot===0?0:Math.abs((ot-N)/N)};function pt(E,R,M,z){for(var I=0,T=R,N=M-z;T<M;T+=z)I+=(E[N]-E[T])*(E[T+1]+E[N+1]),N=T;return I}return s.flatten=function(E){for(var R=E[0][0].length,M={vertices:[],holes:[],dimensions:R},z=0,I=0;I<E.length;I++){for(var T=0;T<E[I].length;T++)for(var N=0;N<R;N++)M.vertices.push(E[I][T][N]);I>0&&(z+=E[I-1].length,M.holes.push(z))}return M},Po.exports}var EE=bE();const TE=x_(EE);var Fn={},ll={exports:{}};var SE=ll.exports,Mv;function AE(){return Mv||(Mv=1,(function(s,t){(function(i){var n=t&&!t.nodeType&&t,l=s&&!s.nodeType&&s,o=typeof fu=="object"&&fu;(o.global===o||o.window===o||o.self===o)&&(i=o);var h,c=2147483647,p=36,m=1,g=26,y=38,_=700,x=72,b=128,w="-",S=/^xn--/,C=/[^\x20-\x7E]/,U=/[\x2E\u3002\uFF0E\uFF61]/g,O={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=p-m,B=Math.floor,j=String.fromCharCode,D;function $(I){throw new RangeError(O[I])}function nt(I,T){for(var N=I.length,F=[];N--;)F[N]=T(I[N]);return F}function lt(I,T){var N=I.split("@"),F="";N.length>1&&(F=N[0]+"@",I=N[1]),I=I.replace(U,".");var X=I.split("."),tt=nt(X,T).join(".");return F+tt}function it(I){for(var T=[],N=0,F=I.length,X,tt;N<F;)X=I.charCodeAt(N++),X>=55296&&X<=56319&&N<F?(tt=I.charCodeAt(N++),(tt&64512)==56320?T.push(((X&1023)<<10)+(tt&1023)+65536):(T.push(X),N--)):T.push(X);return T}function H(I){return nt(I,function(T){var N="";return T>65535&&(T-=65536,N+=j(T>>>10&1023|55296),T=56320|T&1023),N+=j(T),N}).join("")}function J(I){return I-48<10?I-22:I-65<26?I-65:I-97<26?I-97:p}function Q(I,T){return I+22+75*(I<26)-((T!=0)<<5)}function pt(I,T,N){var F=0;for(I=N?B(I/_):I>>1,I+=B(I/T);I>P*g>>1;F+=p)I=B(I/P);return B(F+(P+1)*I/(I+y))}function E(I){var T=[],N=I.length,F,X=0,tt=b,at=x,ot,ft,ct,ut,vt,xt,Dt,Ot,_t;for(ot=I.lastIndexOf(w),ot<0&&(ot=0),ft=0;ft<ot;++ft)I.charCodeAt(ft)>=128&&$("not-basic"),T.push(I.charCodeAt(ft));for(ct=ot>0?ot+1:0;ct<N;){for(ut=X,vt=1,xt=p;ct>=N&&$("invalid-input"),Dt=J(I.charCodeAt(ct++)),(Dt>=p||Dt>B((c-X)/vt))&&$("overflow"),X+=Dt*vt,Ot=xt<=at?m:xt>=at+g?g:xt-at,!(Dt<Ot);xt+=p)_t=p-Ot,vt>B(c/_t)&&$("overflow"),vt*=_t;F=T.length+1,at=pt(X-ut,F,ut==0),B(X/F)>c-tt&&$("overflow"),tt+=B(X/F),X%=F,T.splice(X++,0,tt)}return H(T)}function R(I){var T,N,F,X,tt,at,ot,ft,ct,ut,vt,xt=[],Dt,Ot,_t,bt;for(I=it(I),Dt=I.length,T=b,N=0,tt=x,at=0;at<Dt;++at)vt=I[at],vt<128&&xt.push(j(vt));for(F=X=xt.length,X&&xt.push(w);F<Dt;){for(ot=c,at=0;at<Dt;++at)vt=I[at],vt>=T&&vt<ot&&(ot=vt);for(Ot=F+1,ot-T>B((c-N)/Ot)&&$("overflow"),N+=(ot-T)*Ot,T=ot,at=0;at<Dt;++at)if(vt=I[at],vt<T&&++N>c&&$("overflow"),vt==T){for(ft=N,ct=p;ut=ct<=tt?m:ct>=tt+g?g:ct-tt,!(ft<ut);ct+=p)bt=ft-ut,_t=p-ut,xt.push(j(Q(ut+bt%_t,0))),ft=B(bt/_t);xt.push(j(Q(ft,0))),tt=pt(N,Ot,F==X),N=0,++F}++N,++T}return xt.join("")}function M(I){return lt(I,function(T){return S.test(T)?E(T.slice(4).toLowerCase()):T})}function z(I){return lt(I,function(T){return C.test(T)?"xn--"+R(T):T})}if(h={version:"1.4.1",ucs2:{decode:it,encode:H},decode:E,encode:R,toASCII:z,toUnicode:M},n&&l)if(s.exports==n)l.exports=h;else for(D in h)h.hasOwnProperty(D)&&(n[D]=h[D]);else i.punycode=h})(SE)})(ll,ll.exports)),ll.exports}var rf,Dv;function ra(){return Dv||(Dv=1,rf=TypeError),rf}const wE={},CE=Object.freeze(Object.defineProperty({__proto__:null,default:wE},Symbol.toStringTag,{value:"Module"})),RE=sE(CE);var nf,Ov;function Cu(){if(Ov)return nf;Ov=1;var s=typeof Map=="function"&&Map.prototype,t=Object.getOwnPropertyDescriptor&&s?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,i=s&&t&&typeof t.get=="function"?t.get:null,n=s&&Map.prototype.forEach,l=typeof Set=="function"&&Set.prototype,o=Object.getOwnPropertyDescriptor&&l?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,h=l&&o&&typeof o.get=="function"?o.get:null,c=l&&Set.prototype.forEach,p=typeof WeakMap=="function"&&WeakMap.prototype,m=p?WeakMap.prototype.has:null,g=typeof WeakSet=="function"&&WeakSet.prototype,y=g?WeakSet.prototype.has:null,_=typeof WeakRef=="function"&&WeakRef.prototype,x=_?WeakRef.prototype.deref:null,b=Boolean.prototype.valueOf,w=Object.prototype.toString,S=Function.prototype.toString,C=String.prototype.match,U=String.prototype.slice,O=String.prototype.replace,P=String.prototype.toUpperCase,B=String.prototype.toLowerCase,j=RegExp.prototype.test,D=Array.prototype.concat,$=Array.prototype.join,nt=Array.prototype.slice,lt=Math.floor,it=typeof BigInt=="function"?BigInt.prototype.valueOf:null,H=Object.getOwnPropertySymbols,J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Q=typeof Symbol=="function"&&typeof Symbol.iterator=="object",pt=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Q||!0)?Symbol.toStringTag:null,E=Object.prototype.propertyIsEnumerable,R=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(V){return V.__proto__}:null);function M(V,Z){if(V===1/0||V===-1/0||V!==V||V&&V>-1e3&&V<1e3||j.call(/e/,Z))return Z;var jt=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof V=="number"){var Qt=V<0?-lt(-V):lt(V);if(Qt!==V){var Wt=String(Qt),Bt=U.call(Z,Wt.length+1);return O.call(Wt,jt,"$&_")+"."+O.call(O.call(Bt,/([0-9]{3})/g,"$&_"),/_$/,"")}}return O.call(Z,jt,"$&_")}var z=RE,I=z.custom,T=Ot(I)?I:null,N={__proto__:null,double:'"',single:"'"},F={__proto__:null,double:/(["\\])/g,single:/(['\\])/g};nf=function V(Z,jt,Qt,Wt){var Bt=jt||{};if(oe(Bt,"quoteStyle")&&!oe(N,Bt.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(oe(Bt,"maxStringLength")&&(typeof Bt.maxStringLength=="number"?Bt.maxStringLength<0&&Bt.maxStringLength!==1/0:Bt.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var ei=oe(Bt,"customInspect")?Bt.customInspect:!0;if(typeof ei!="boolean"&&ei!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(oe(Bt,"indent")&&Bt.indent!==null&&Bt.indent!=="	"&&!(parseInt(Bt.indent,10)===Bt.indent&&Bt.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(oe(Bt,"numericSeparator")&&typeof Bt.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var ke=Bt.numericSeparator;if(typeof Z>"u")return"undefined";if(Z===null)return"null";if(typeof Z=="boolean")return Z?"true":"false";if(typeof Z=="string")return aa(Z,Bt);if(typeof Z=="number"){if(Z===0)return 1/0/Z>0?"0":"-0";var Ce=String(Z);return ke?M(Z,Ce):Ce}if(typeof Z=="bigint"){var qe=String(Z)+"n";return ke?M(Z,qe):qe}var la=typeof Bt.depth>"u"?5:Bt.depth;if(typeof Qt>"u"&&(Qt=0),Qt>=la&&la>0&&typeof Z=="object")return ot(Z)?"[Array]":"[Object]";var rr=_n(Bt,Qt);if(typeof Wt>"u")Wt=[];else if(ci(Wt,Z)>=0)return"[Circular]";function Xe(nr,Hi,ca){if(Hi&&(Wt=nt.call(Wt),Wt.push(Hi)),ca){var sr={depth:Bt.depth};return oe(Bt,"quoteStyle")&&(sr.quoteStyle=Bt.quoteStyle),V(nr,sr,Qt+1,Wt)}return V(nr,Bt,Qt+1,Wt)}if(typeof Z=="function"&&!ct(Z)){var Ir=Gi(Z),El=ti(Z,Xe);return"[Function"+(Ir?": "+Ir:" (anonymous)")+"]"+(El.length>0?" { "+$.call(El,", ")+" }":"")}if(Ot(Z)){var oa=Q?O.call(String(Z),/^(Symbol\(.*\))_[^)]*$/,"$1"):J.call(Z);return typeof Z=="object"&&!Q?vn(oa):oa}if(xl(Z)){for(var Ur="<"+B.call(String(Z.nodeName)),is=Z.attributes||[],Lr=0;Lr<is.length;Lr++)Ur+=" "+is[Lr].name+"="+X(tt(is[Lr].value),"double",Bt);return Ur+=">",Z.childNodes&&Z.childNodes.length&&(Ur+="..."),Ur+="</"+B.call(String(Z.nodeName))+">",Ur}if(ot(Z)){if(Z.length===0)return"[]";var xn=ti(Z,Xe);return rr&&!Fu(xn)?"["+Be(xn,rr)+"]":"[ "+$.call(xn,", ")+" ]"}if(ut(Z)){var rs=ti(Z,Xe);return!("cause"in Error.prototype)&&"cause"in Z&&!E.call(Z,"cause")?"{ ["+String(Z)+"] "+$.call(D.call("[cause]: "+Xe(Z.cause),rs),", ")+" }":rs.length===0?"["+String(Z)+"]":"{ ["+String(Z)+"] "+$.call(rs,", ")+" }"}if(typeof Z=="object"&&ei){if(T&&typeof Z[T]=="function"&&z)return z(Z,{depth:la-Qt});if(ei!=="symbol"&&typeof Z.inspect=="function")return Z.inspect()}if(He(Z)){var ua=[];return n&&n.call(Z,function(nr,Hi){ua.push(Xe(Hi,Z,!0)+" => "+Xe(nr,Z))}),bl("Map",i.call(Z),ua,rr)}if(_e(Z)){var wi=[];return c&&c.call(Z,function(nr){wi.push(Xe(nr,Z))}),bl("Set",h.call(Z),wi,rr)}if(Br(Z))return es("WeakMap");if(Pu(Z))return es("WeakSet");if(Nr(Z))return es("WeakRef");if(xt(Z))return vn(Xe(Number(Z)));if(_t(Z))return vn(Xe(it.call(Z)));if(Dt(Z))return vn(b.call(Z));if(vt(Z))return vn(Xe(String(Z)));if(typeof window<"u"&&Z===window)return"{ [object Window] }";if(typeof globalThis<"u"&&Z===globalThis||typeof fu<"u"&&Z===fu)return"{ [object globalThis] }";if(!ft(Z)&&!ct(Z)){var me=ti(Z,Xe),Ne=R?R(Z)===Object.prototype:Z instanceof Object||Z.constructor===Object,zi=Z instanceof Object?"":"null prototype",ns=!Ne&&pt&&Object(Z)===Z&&pt in Z?U.call(fe(Z),8,-1):zi?"Object":"",Gu=Ne||typeof Z.constructor!="function"?"":Z.constructor.name?Z.constructor.name+" ":"",ha=Gu+(ns||zi?"["+$.call(D.call([],ns||[],zi||[]),": ")+"] ":"");return me.length===0?ha+"{}":rr?ha+"{"+Be(me,rr)+"}":ha+"{ "+$.call(me,", ")+" }"}return String(Z)};function X(V,Z,jt){var Qt=jt.quoteStyle||Z,Wt=N[Qt];return Wt+V+Wt}function tt(V){return O.call(String(V),/"/g,"&quot;")}function at(V){return!pt||!(typeof V=="object"&&(pt in V||typeof V[pt]<"u"))}function ot(V){return fe(V)==="[object Array]"&&at(V)}function ft(V){return fe(V)==="[object Date]"&&at(V)}function ct(V){return fe(V)==="[object RegExp]"&&at(V)}function ut(V){return fe(V)==="[object Error]"&&at(V)}function vt(V){return fe(V)==="[object String]"&&at(V)}function xt(V){return fe(V)==="[object Number]"&&at(V)}function Dt(V){return fe(V)==="[object Boolean]"&&at(V)}function Ot(V){if(Q)return V&&typeof V=="object"&&V instanceof Symbol;if(typeof V=="symbol")return!0;if(!V||typeof V!="object"||!J)return!1;try{return J.call(V),!0}catch{}return!1}function _t(V){if(!V||typeof V!="object"||!it)return!1;try{return it.call(V),!0}catch{}return!1}var bt=Object.prototype.hasOwnProperty||function(V){return V in this};function oe(V,Z){return bt.call(V,Z)}function fe(V){return w.call(V)}function Gi(V){if(V.name)return V.name;var Z=C.call(S.call(V),/^function\s*([\w$]+)/);return Z?Z[1]:null}function ci(V,Z){if(V.indexOf)return V.indexOf(Z);for(var jt=0,Qt=V.length;jt<Qt;jt++)if(V[jt]===Z)return jt;return-1}function He(V){if(!i||!V||typeof V!="object")return!1;try{i.call(V);try{h.call(V)}catch{return!0}return V instanceof Map}catch{}return!1}function Br(V){if(!m||!V||typeof V!="object")return!1;try{m.call(V,m);try{y.call(V,y)}catch{return!0}return V instanceof WeakMap}catch{}return!1}function Nr(V){if(!x||!V||typeof V!="object")return!1;try{return x.call(V),!0}catch{}return!1}function _e(V){if(!h||!V||typeof V!="object")return!1;try{h.call(V);try{i.call(V)}catch{return!0}return V instanceof Set}catch{}return!1}function Pu(V){if(!y||!V||typeof V!="object")return!1;try{y.call(V,y);try{m.call(V,m)}catch{return!0}return V instanceof WeakSet}catch{}return!1}function xl(V){return!V||typeof V!="object"?!1:typeof HTMLElement<"u"&&V instanceof HTMLElement?!0:typeof V.nodeName=="string"&&typeof V.getAttribute=="function"}function aa(V,Z){if(V.length>Z.maxStringLength){var jt=V.length-Z.maxStringLength,Qt="... "+jt+" more character"+(jt>1?"s":"");return aa(U.call(V,0,Z.maxStringLength),Z)+Qt}var Wt=F[Z.quoteStyle||"single"];Wt.lastIndex=0;var Bt=O.call(O.call(V,Wt,"\\$1"),/[\x00-\x1f]/g,ts);return X(Bt,"single",Z)}function ts(V){var Z=V.charCodeAt(0),jt={8:"b",9:"t",10:"n",12:"f",13:"r"}[Z];return jt?"\\"+jt:"\\x"+(Z<16?"0":"")+P.call(Z.toString(16))}function vn(V){return"Object("+V+")"}function es(V){return V+" { ? }"}function bl(V,Z,jt,Qt){var Wt=Qt?Be(jt,Qt):$.call(jt,", ");return V+" ("+Z+") {"+Wt+"}"}function Fu(V){for(var Z=0;Z<V.length;Z++)if(ci(V[Z],`
`)>=0)return!1;return!0}function _n(V,Z){var jt;if(V.indent==="	")jt="	";else if(typeof V.indent=="number"&&V.indent>0)jt=$.call(Array(V.indent+1)," ");else return null;return{base:jt,prev:$.call(Array(Z+1),jt)}}function Be(V,Z){if(V.length===0)return"";var jt=`
`+Z.prev+Z.base;return jt+$.call(V,","+jt)+`
`+Z.prev}function ti(V,Z){var jt=ot(V),Qt=[];if(jt){Qt.length=V.length;for(var Wt=0;Wt<V.length;Wt++)Qt[Wt]=oe(V,Wt)?Z(V[Wt],V):""}var Bt=typeof H=="function"?H(V):[],ei;if(Q){ei={};for(var ke=0;ke<Bt.length;ke++)ei["$"+Bt[ke]]=Bt[ke]}for(var Ce in V)oe(V,Ce)&&(jt&&String(Number(Ce))===Ce&&Ce<V.length||Q&&ei["$"+Ce]instanceof Symbol||(j.call(/[^\w$]/,Ce)?Qt.push(Z(Ce,V)+": "+Z(V[Ce],V)):Qt.push(Ce+": "+Z(V[Ce],V))));if(typeof H=="function")for(var qe=0;qe<Bt.length;qe++)E.call(V,Bt[qe])&&Qt.push("["+Z(Bt[qe])+"]: "+Z(V[Bt[qe]],V));return Qt}return nf}var sf,Bv;function ME(){if(Bv)return sf;Bv=1;var s=Cu(),t=ra(),i=function(c,p,m){for(var g=c,y;(y=g.next)!=null;g=y)if(y.key===p)return g.next=y.next,m||(y.next=c.next,c.next=y),y},n=function(c,p){if(c){var m=i(c,p);return m&&m.value}},l=function(c,p,m){var g=i(c,p);g?g.value=m:c.next={key:p,next:c.next,value:m}},o=function(c,p){return c?!!i(c,p):!1},h=function(c,p){if(c)return i(c,p,!0)};return sf=function(){var p,m={assert:function(g){if(!m.has(g))throw new t("Side channel does not contain "+s(g))},delete:function(g){var y=p&&p.next,_=h(p,g);return _&&y&&y===_&&(p=void 0),!!_},get:function(g){return n(p,g)},has:function(g){return o(p,g)},set:function(g,y){p||(p={next:void 0}),l(p,g,y)}};return m},sf}var af,Nv;function E_(){return Nv||(Nv=1,af=Object),af}var lf,Iv;function DE(){return Iv||(Iv=1,lf=Error),lf}var of,Uv;function OE(){return Uv||(Uv=1,of=EvalError),of}var uf,Lv;function BE(){return Lv||(Lv=1,uf=RangeError),uf}var hf,Pv;function NE(){return Pv||(Pv=1,hf=ReferenceError),hf}var cf,Fv;function IE(){return Fv||(Fv=1,cf=SyntaxError),cf}var ff,Gv;function UE(){return Gv||(Gv=1,ff=URIError),ff}var df,zv;function LE(){return zv||(zv=1,df=Math.abs),df}var pf,Hv;function PE(){return Hv||(Hv=1,pf=Math.floor),pf}var mf,kv;function FE(){return kv||(kv=1,mf=Math.max),mf}var gf,Xv;function GE(){return Xv||(Xv=1,gf=Math.min),gf}var yf,Vv;function zE(){return Vv||(Vv=1,yf=Math.pow),yf}var vf,jv;function HE(){return jv||(jv=1,vf=Math.round),vf}var _f,qv;function kE(){return qv||(qv=1,_f=Number.isNaN||function(t){return t!==t}),_f}var xf,Yv;function XE(){if(Yv)return xf;Yv=1;var s=kE();return xf=function(i){return s(i)||i===0?i:i<0?-1:1},xf}var bf,$v;function VE(){return $v||($v=1,bf=Object.getOwnPropertyDescriptor),bf}var Ef,Wv;function T_(){if(Wv)return Ef;Wv=1;var s=VE();if(s)try{s([],"length")}catch{s=null}return Ef=s,Ef}var Tf,Zv;function jE(){if(Zv)return Tf;Zv=1;var s=Object.defineProperty||!1;if(s)try{s({},"a",{value:1})}catch{s=!1}return Tf=s,Tf}var Sf,Kv;function qE(){return Kv||(Kv=1,Sf=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var t={},i=Symbol("test"),n=Object(i);if(typeof i=="string"||Object.prototype.toString.call(i)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var l=42;t[i]=l;for(var o in t)return!1;if(typeof Object.keys=="function"&&Object.keys(t).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(t).length!==0)return!1;var h=Object.getOwnPropertySymbols(t);if(h.length!==1||h[0]!==i||!Object.prototype.propertyIsEnumerable.call(t,i))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(t,i);if(c.value!==l||c.enumerable!==!0)return!1}return!0}),Sf}var Af,Qv;function YE(){if(Qv)return Af;Qv=1;var s=typeof Symbol<"u"&&Symbol,t=qE();return Af=function(){return typeof s!="function"||typeof Symbol!="function"||typeof s("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},Af}var wf,Jv;function S_(){return Jv||(Jv=1,wf=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),wf}var Cf,t0;function A_(){if(t0)return Cf;t0=1;var s=E_();return Cf=s.getPrototypeOf||null,Cf}var Rf,e0;function $E(){if(e0)return Rf;e0=1;var s="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,i=Math.max,n="[object Function]",l=function(p,m){for(var g=[],y=0;y<p.length;y+=1)g[y]=p[y];for(var _=0;_<m.length;_+=1)g[_+p.length]=m[_];return g},o=function(p,m){for(var g=[],y=m,_=0;y<p.length;y+=1,_+=1)g[_]=p[y];return g},h=function(c,p){for(var m="",g=0;g<c.length;g+=1)m+=c[g],g+1<c.length&&(m+=p);return m};return Rf=function(p){var m=this;if(typeof m!="function"||t.apply(m)!==n)throw new TypeError(s+m);for(var g=o(arguments,1),y,_=function(){if(this instanceof y){var C=m.apply(this,l(g,arguments));return Object(C)===C?C:this}return m.apply(p,l(g,arguments))},x=i(0,m.length-g.length),b=[],w=0;w<x;w++)b[w]="$"+w;if(y=Function("binder","return function ("+h(b,",")+"){ return binder.apply(this,arguments); }")(_),m.prototype){var S=function(){};S.prototype=m.prototype,y.prototype=new S,S.prototype=null}return y},Rf}var Mf,i0;function Ru(){if(i0)return Mf;i0=1;var s=$E();return Mf=Function.prototype.bind||s,Mf}var Df,r0;function sp(){return r0||(r0=1,Df=Function.prototype.call),Df}var Of,n0;function w_(){return n0||(n0=1,Of=Function.prototype.apply),Of}var Bf,s0;function WE(){return s0||(s0=1,Bf=typeof Reflect<"u"&&Reflect&&Reflect.apply),Bf}var Nf,a0;function ZE(){if(a0)return Nf;a0=1;var s=Ru(),t=w_(),i=sp(),n=WE();return Nf=n||s.call(i,t),Nf}var If,l0;function C_(){if(l0)return If;l0=1;var s=Ru(),t=ra(),i=sp(),n=ZE();return If=function(o){if(o.length<1||typeof o[0]!="function")throw new t("a function is required");return n(s,i,o)},If}var Uf,o0;function KE(){if(o0)return Uf;o0=1;var s=C_(),t=T_(),i;try{i=[].__proto__===Array.prototype}catch(h){if(!h||typeof h!="object"||!("code"in h)||h.code!=="ERR_PROTO_ACCESS")throw h}var n=!!i&&t&&t(Object.prototype,"__proto__"),l=Object,o=l.getPrototypeOf;return Uf=n&&typeof n.get=="function"?s([n.get]):typeof o=="function"?function(c){return o(c==null?c:l(c))}:!1,Uf}var Lf,u0;function QE(){if(u0)return Lf;u0=1;var s=S_(),t=A_(),i=KE();return Lf=s?function(l){return s(l)}:t?function(l){if(!l||typeof l!="object"&&typeof l!="function")throw new TypeError("getProto: not an object");return t(l)}:i?function(l){return i(l)}:null,Lf}var Pf,h0;function JE(){if(h0)return Pf;h0=1;var s=Function.prototype.call,t=Object.prototype.hasOwnProperty,i=Ru();return Pf=i.call(s,t),Pf}var Ff,c0;function ap(){if(c0)return Ff;c0=1;var s,t=E_(),i=DE(),n=OE(),l=BE(),o=NE(),h=IE(),c=ra(),p=UE(),m=LE(),g=PE(),y=FE(),_=GE(),x=zE(),b=HE(),w=XE(),S=Function,C=function(ct){try{return S('"use strict"; return ('+ct+").constructor;")()}catch{}},U=T_(),O=jE(),P=function(){throw new c},B=U?(function(){try{return arguments.callee,P}catch{try{return U(arguments,"callee").get}catch{return P}}})():P,j=YE()(),D=QE(),$=A_(),nt=S_(),lt=w_(),it=sp(),H={},J=typeof Uint8Array>"u"||!D?s:D(Uint8Array),Q={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?s:ArrayBuffer,"%ArrayIteratorPrototype%":j&&D?D([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":H,"%AsyncGenerator%":H,"%AsyncGeneratorFunction%":H,"%AsyncIteratorPrototype%":H,"%Atomics%":typeof Atomics>"u"?s:Atomics,"%BigInt%":typeof BigInt>"u"?s:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?s:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?s:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":i,"%eval%":eval,"%EvalError%":n,"%Float16Array%":typeof Float16Array>"u"?s:Float16Array,"%Float32Array%":typeof Float32Array>"u"?s:Float32Array,"%Float64Array%":typeof Float64Array>"u"?s:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?s:FinalizationRegistry,"%Function%":S,"%GeneratorFunction%":H,"%Int8Array%":typeof Int8Array>"u"?s:Int8Array,"%Int16Array%":typeof Int16Array>"u"?s:Int16Array,"%Int32Array%":typeof Int32Array>"u"?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":j&&D?D(D([][Symbol.iterator]())):s,"%JSON%":typeof JSON=="object"?JSON:s,"%Map%":typeof Map>"u"?s:Map,"%MapIteratorPrototype%":typeof Map>"u"||!j||!D?s:D(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":t,"%Object.getOwnPropertyDescriptor%":U,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?s:Promise,"%Proxy%":typeof Proxy>"u"?s:Proxy,"%RangeError%":l,"%ReferenceError%":o,"%Reflect%":typeof Reflect>"u"?s:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?s:Set,"%SetIteratorPrototype%":typeof Set>"u"||!j||!D?s:D(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":j&&D?D(""[Symbol.iterator]()):s,"%Symbol%":j?Symbol:s,"%SyntaxError%":h,"%ThrowTypeError%":B,"%TypedArray%":J,"%TypeError%":c,"%Uint8Array%":typeof Uint8Array>"u"?s:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?s:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?s:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?s:Uint32Array,"%URIError%":p,"%WeakMap%":typeof WeakMap>"u"?s:WeakMap,"%WeakRef%":typeof WeakRef>"u"?s:WeakRef,"%WeakSet%":typeof WeakSet>"u"?s:WeakSet,"%Function.prototype.call%":it,"%Function.prototype.apply%":lt,"%Object.defineProperty%":O,"%Object.getPrototypeOf%":$,"%Math.abs%":m,"%Math.floor%":g,"%Math.max%":y,"%Math.min%":_,"%Math.pow%":x,"%Math.round%":b,"%Math.sign%":w,"%Reflect.getPrototypeOf%":nt};if(D)try{null.error}catch(ct){var pt=D(D(ct));Q["%Error.prototype%"]=pt}var E=function ct(ut){var vt;if(ut==="%AsyncFunction%")vt=C("async function () {}");else if(ut==="%GeneratorFunction%")vt=C("function* () {}");else if(ut==="%AsyncGeneratorFunction%")vt=C("async function* () {}");else if(ut==="%AsyncGenerator%"){var xt=ct("%AsyncGeneratorFunction%");xt&&(vt=xt.prototype)}else if(ut==="%AsyncIteratorPrototype%"){var Dt=ct("%AsyncGenerator%");Dt&&D&&(vt=D(Dt.prototype))}return Q[ut]=vt,vt},R={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},M=Ru(),z=JE(),I=M.call(it,Array.prototype.concat),T=M.call(lt,Array.prototype.splice),N=M.call(it,String.prototype.replace),F=M.call(it,String.prototype.slice),X=M.call(it,RegExp.prototype.exec),tt=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,at=/\\(\\)?/g,ot=function(ut){var vt=F(ut,0,1),xt=F(ut,-1);if(vt==="%"&&xt!=="%")throw new h("invalid intrinsic syntax, expected closing `%`");if(xt==="%"&&vt!=="%")throw new h("invalid intrinsic syntax, expected opening `%`");var Dt=[];return N(ut,tt,function(Ot,_t,bt,oe){Dt[Dt.length]=bt?N(oe,at,"$1"):_t||Ot}),Dt},ft=function(ut,vt){var xt=ut,Dt;if(z(R,xt)&&(Dt=R[xt],xt="%"+Dt[0]+"%"),z(Q,xt)){var Ot=Q[xt];if(Ot===H&&(Ot=E(xt)),typeof Ot>"u"&&!vt)throw new c("intrinsic "+ut+" exists, but is not available. Please file an issue!");return{alias:Dt,name:xt,value:Ot}}throw new h("intrinsic "+ut+" does not exist!")};return Ff=function(ut,vt){if(typeof ut!="string"||ut.length===0)throw new c("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof vt!="boolean")throw new c('"allowMissing" argument must be a boolean');if(X(/^%?[^%]*%?$/,ut)===null)throw new h("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var xt=ot(ut),Dt=xt.length>0?xt[0]:"",Ot=ft("%"+Dt+"%",vt),_t=Ot.name,bt=Ot.value,oe=!1,fe=Ot.alias;fe&&(Dt=fe[0],T(xt,I([0,1],fe)));for(var Gi=1,ci=!0;Gi<xt.length;Gi+=1){var He=xt[Gi],Br=F(He,0,1),Nr=F(He,-1);if((Br==='"'||Br==="'"||Br==="`"||Nr==='"'||Nr==="'"||Nr==="`")&&Br!==Nr)throw new h("property names with quotes must have matching quotes");if((He==="constructor"||!ci)&&(oe=!0),Dt+="."+He,_t="%"+Dt+"%",z(Q,_t))bt=Q[_t];else if(bt!=null){if(!(He in bt)){if(!vt)throw new c("base intrinsic for "+ut+" exists, but the property is not available.");return}if(U&&Gi+1>=xt.length){var _e=U(bt,He);ci=!!_e,ci&&"get"in _e&&!("originalValue"in _e.get)?bt=_e.get:bt=bt[He]}else ci=z(bt,He),bt=bt[He];ci&&!oe&&(Q[_t]=bt)}}return bt},Ff}var Gf,f0;function R_(){if(f0)return Gf;f0=1;var s=ap(),t=C_(),i=t([s("%String.prototype.indexOf%")]);return Gf=function(l,o){var h=s(l,!!o);return typeof h=="function"&&i(l,".prototype.")>-1?t([h]):h},Gf}var zf,d0;function M_(){if(d0)return zf;d0=1;var s=ap(),t=R_(),i=Cu(),n=ra(),l=s("%Map%",!0),o=t("Map.prototype.get",!0),h=t("Map.prototype.set",!0),c=t("Map.prototype.has",!0),p=t("Map.prototype.delete",!0),m=t("Map.prototype.size",!0);return zf=!!l&&function(){var y,_={assert:function(x){if(!_.has(x))throw new n("Side channel does not contain "+i(x))},delete:function(x){if(y){var b=p(y,x);return m(y)===0&&(y=void 0),b}return!1},get:function(x){if(y)return o(y,x)},has:function(x){return y?c(y,x):!1},set:function(x,b){y||(y=new l),h(y,x,b)}};return _},zf}var Hf,p0;function tT(){if(p0)return Hf;p0=1;var s=ap(),t=R_(),i=Cu(),n=M_(),l=ra(),o=s("%WeakMap%",!0),h=t("WeakMap.prototype.get",!0),c=t("WeakMap.prototype.set",!0),p=t("WeakMap.prototype.has",!0),m=t("WeakMap.prototype.delete",!0);return Hf=o?function(){var y,_,x={assert:function(b){if(!x.has(b))throw new l("Side channel does not contain "+i(b))},delete:function(b){if(o&&b&&(typeof b=="object"||typeof b=="function")){if(y)return m(y,b)}else if(n&&_)return _.delete(b);return!1},get:function(b){return o&&b&&(typeof b=="object"||typeof b=="function")&&y?h(y,b):_&&_.get(b)},has:function(b){return o&&b&&(typeof b=="object"||typeof b=="function")&&y?p(y,b):!!_&&_.has(b)},set:function(b,w){o&&b&&(typeof b=="object"||typeof b=="function")?(y||(y=new o),c(y,b,w)):n&&(_||(_=n()),_.set(b,w))}};return x}:n,Hf}var kf,m0;function eT(){if(m0)return kf;m0=1;var s=ra(),t=Cu(),i=ME(),n=M_(),l=tT(),o=l||n||i;return kf=function(){var c,p={assert:function(m){if(!p.has(m))throw new s("Side channel does not contain "+t(m))},delete:function(m){return!!c&&c.delete(m)},get:function(m){return c&&c.get(m)},has:function(m){return!!c&&c.has(m)},set:function(m,g){c||(c=o()),c.set(m,g)}};return p},kf}var Xf,g0;function lp(){if(g0)return Xf;g0=1;var s=String.prototype.replace,t=/%20/g,i={RFC1738:"RFC1738",RFC3986:"RFC3986"};return Xf={default:i.RFC3986,formatters:{RFC1738:function(n){return s.call(n,t,"+")},RFC3986:function(n){return String(n)}},RFC1738:i.RFC1738,RFC3986:i.RFC3986},Xf}var Vf,y0;function D_(){if(y0)return Vf;y0=1;var s=lp(),t=Object.prototype.hasOwnProperty,i=Array.isArray,n=(function(){for(var S=[],C=0;C<256;++C)S.push("%"+((C<16?"0":"")+C.toString(16)).toUpperCase());return S})(),l=function(C){for(;C.length>1;){var U=C.pop(),O=U.obj[U.prop];if(i(O)){for(var P=[],B=0;B<O.length;++B)typeof O[B]<"u"&&P.push(O[B]);U.obj[U.prop]=P}}},o=function(C,U){for(var O=U&&U.plainObjects?{__proto__:null}:{},P=0;P<C.length;++P)typeof C[P]<"u"&&(O[P]=C[P]);return O},h=function S(C,U,O){if(!U)return C;if(typeof U!="object"&&typeof U!="function"){if(i(C))C.push(U);else if(C&&typeof C=="object")(O&&(O.plainObjects||O.allowPrototypes)||!t.call(Object.prototype,U))&&(C[U]=!0);else return[C,U];return C}if(!C||typeof C!="object")return[C].concat(U);var P=C;return i(C)&&!i(U)&&(P=o(C,O)),i(C)&&i(U)?(U.forEach(function(B,j){if(t.call(C,j)){var D=C[j];D&&typeof D=="object"&&B&&typeof B=="object"?C[j]=S(D,B,O):C.push(B)}else C[j]=B}),C):Object.keys(U).reduce(function(B,j){var D=U[j];return t.call(B,j)?B[j]=S(B[j],D,O):B[j]=D,B},P)},c=function(C,U){return Object.keys(U).reduce(function(O,P){return O[P]=U[P],O},C)},p=function(S,C,U){var O=S.replace(/\+/g," ");if(U==="iso-8859-1")return O.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(O)}catch{return O}},m=1024,g=function(C,U,O,P,B){if(C.length===0)return C;var j=C;if(typeof C=="symbol"?j=Symbol.prototype.toString.call(C):typeof C!="string"&&(j=String(C)),O==="iso-8859-1")return escape(j).replace(/%u[0-9a-f]{4}/gi,function(J){return"%26%23"+parseInt(J.slice(2),16)+"%3B"});for(var D="",$=0;$<j.length;$+=m){for(var nt=j.length>=m?j.slice($,$+m):j,lt=[],it=0;it<nt.length;++it){var H=nt.charCodeAt(it);if(H===45||H===46||H===95||H===126||H>=48&&H<=57||H>=65&&H<=90||H>=97&&H<=122||B===s.RFC1738&&(H===40||H===41)){lt[lt.length]=nt.charAt(it);continue}if(H<128){lt[lt.length]=n[H];continue}if(H<2048){lt[lt.length]=n[192|H>>6]+n[128|H&63];continue}if(H<55296||H>=57344){lt[lt.length]=n[224|H>>12]+n[128|H>>6&63]+n[128|H&63];continue}it+=1,H=65536+((H&1023)<<10|nt.charCodeAt(it)&1023),lt[lt.length]=n[240|H>>18]+n[128|H>>12&63]+n[128|H>>6&63]+n[128|H&63]}D+=lt.join("")}return D},y=function(C){for(var U=[{obj:{o:C},prop:"o"}],O=[],P=0;P<U.length;++P)for(var B=U[P],j=B.obj[B.prop],D=Object.keys(j),$=0;$<D.length;++$){var nt=D[$],lt=j[nt];typeof lt=="object"&&lt!==null&&O.indexOf(lt)===-1&&(U.push({obj:j,prop:nt}),O.push(lt))}return l(U),C},_=function(C){return Object.prototype.toString.call(C)==="[object RegExp]"},x=function(C){return!C||typeof C!="object"?!1:!!(C.constructor&&C.constructor.isBuffer&&C.constructor.isBuffer(C))},b=function(C,U){return[].concat(C,U)},w=function(C,U){if(i(C)){for(var O=[],P=0;P<C.length;P+=1)O.push(U(C[P]));return O}return U(C)};return Vf={arrayToObject:o,assign:c,combine:b,compact:y,decode:p,encode:g,isBuffer:x,isRegExp:_,maybeMap:w,merge:h},Vf}var jf,v0;function iT(){if(v0)return jf;v0=1;var s=eT(),t=D_(),i=lp(),n=Object.prototype.hasOwnProperty,l={brackets:function(S){return S+"[]"},comma:"comma",indices:function(S,C){return S+"["+C+"]"},repeat:function(S){return S}},o=Array.isArray,h=Array.prototype.push,c=function(w,S){h.apply(w,o(S)?S:[S])},p=Date.prototype.toISOString,m=i.default,g={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,commaRoundTrip:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:t.encode,encodeValuesOnly:!1,filter:void 0,format:m,formatter:i.formatters[m],indices:!1,serializeDate:function(S){return p.call(S)},skipNulls:!1,strictNullHandling:!1},y=function(S){return typeof S=="string"||typeof S=="number"||typeof S=="boolean"||typeof S=="symbol"||typeof S=="bigint"},_={},x=function w(S,C,U,O,P,B,j,D,$,nt,lt,it,H,J,Q,pt,E,R){for(var M=S,z=R,I=0,T=!1;(z=z.get(_))!==void 0&&!T;){var N=z.get(S);if(I+=1,typeof N<"u"){if(N===I)throw new RangeError("Cyclic object value");T=!0}typeof z.get(_)>"u"&&(I=0)}if(typeof nt=="function"?M=nt(C,M):M instanceof Date?M=H(M):U==="comma"&&o(M)&&(M=t.maybeMap(M,function(_t){return _t instanceof Date?H(_t):_t})),M===null){if(B)return $&&!pt?$(C,g.encoder,E,"key",J):C;M=""}if(y(M)||t.isBuffer(M)){if($){var F=pt?C:$(C,g.encoder,E,"key",J);return[Q(F)+"="+Q($(M,g.encoder,E,"value",J))]}return[Q(C)+"="+Q(String(M))]}var X=[];if(typeof M>"u")return X;var tt;if(U==="comma"&&o(M))pt&&$&&(M=t.maybeMap(M,$)),tt=[{value:M.length>0?M.join(",")||null:void 0}];else if(o(nt))tt=nt;else{var at=Object.keys(M);tt=lt?at.sort(lt):at}var ot=D?String(C).replace(/\./g,"%2E"):String(C),ft=O&&o(M)&&M.length===1?ot+"[]":ot;if(P&&o(M)&&M.length===0)return ft+"[]";for(var ct=0;ct<tt.length;++ct){var ut=tt[ct],vt=typeof ut=="object"&&ut&&typeof ut.value<"u"?ut.value:M[ut];if(!(j&&vt===null)){var xt=it&&D?String(ut).replace(/\./g,"%2E"):String(ut),Dt=o(M)?typeof U=="function"?U(ft,xt):ft:ft+(it?"."+xt:"["+xt+"]");R.set(S,I);var Ot=s();Ot.set(_,R),c(X,w(vt,Dt,U,O,P,B,j,D,U==="comma"&&pt&&o(M)?null:$,nt,lt,it,H,J,Q,pt,E,Ot))}}return X},b=function(S){if(!S)return g;if(typeof S.allowEmptyArrays<"u"&&typeof S.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof S.encodeDotInKeys<"u"&&typeof S.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(S.encoder!==null&&typeof S.encoder<"u"&&typeof S.encoder!="function")throw new TypeError("Encoder has to be a function.");var C=S.charset||g.charset;if(typeof S.charset<"u"&&S.charset!=="utf-8"&&S.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var U=i.default;if(typeof S.format<"u"){if(!n.call(i.formatters,S.format))throw new TypeError("Unknown format option provided.");U=S.format}var O=i.formatters[U],P=g.filter;(typeof S.filter=="function"||o(S.filter))&&(P=S.filter);var B;if(S.arrayFormat in l?B=S.arrayFormat:"indices"in S?B=S.indices?"indices":"repeat":B=g.arrayFormat,"commaRoundTrip"in S&&typeof S.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var j=typeof S.allowDots>"u"?S.encodeDotInKeys===!0?!0:g.allowDots:!!S.allowDots;return{addQueryPrefix:typeof S.addQueryPrefix=="boolean"?S.addQueryPrefix:g.addQueryPrefix,allowDots:j,allowEmptyArrays:typeof S.allowEmptyArrays=="boolean"?!!S.allowEmptyArrays:g.allowEmptyArrays,arrayFormat:B,charset:C,charsetSentinel:typeof S.charsetSentinel=="boolean"?S.charsetSentinel:g.charsetSentinel,commaRoundTrip:!!S.commaRoundTrip,delimiter:typeof S.delimiter>"u"?g.delimiter:S.delimiter,encode:typeof S.encode=="boolean"?S.encode:g.encode,encodeDotInKeys:typeof S.encodeDotInKeys=="boolean"?S.encodeDotInKeys:g.encodeDotInKeys,encoder:typeof S.encoder=="function"?S.encoder:g.encoder,encodeValuesOnly:typeof S.encodeValuesOnly=="boolean"?S.encodeValuesOnly:g.encodeValuesOnly,filter:P,format:U,formatter:O,serializeDate:typeof S.serializeDate=="function"?S.serializeDate:g.serializeDate,skipNulls:typeof S.skipNulls=="boolean"?S.skipNulls:g.skipNulls,sort:typeof S.sort=="function"?S.sort:null,strictNullHandling:typeof S.strictNullHandling=="boolean"?S.strictNullHandling:g.strictNullHandling}};return jf=function(w,S){var C=w,U=b(S),O,P;typeof U.filter=="function"?(P=U.filter,C=P("",C)):o(U.filter)&&(P=U.filter,O=P);var B=[];if(typeof C!="object"||C===null)return"";var j=l[U.arrayFormat],D=j==="comma"&&U.commaRoundTrip;O||(O=Object.keys(C)),U.sort&&O.sort(U.sort);for(var $=s(),nt=0;nt<O.length;++nt){var lt=O[nt],it=C[lt];U.skipNulls&&it===null||c(B,x(it,lt,j,D,U.allowEmptyArrays,U.strictNullHandling,U.skipNulls,U.encodeDotInKeys,U.encode?U.encoder:null,U.filter,U.sort,U.allowDots,U.serializeDate,U.format,U.formatter,U.encodeValuesOnly,U.charset,$))}var H=B.join(U.delimiter),J=U.addQueryPrefix===!0?"?":"";return U.charsetSentinel&&(U.charset==="iso-8859-1"?J+="utf8=%26%2310003%3B&":J+="utf8=%E2%9C%93&"),H.length>0?J+H:""},jf}var qf,_0;function rT(){if(_0)return qf;_0=1;var s=D_(),t=Object.prototype.hasOwnProperty,i=Array.isArray,n={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:s.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictDepth:!1,strictNullHandling:!1,throwOnLimitExceeded:!1},l=function(_){return _.replace(/&#(\d+);/g,function(x,b){return String.fromCharCode(parseInt(b,10))})},o=function(_,x,b){if(_&&typeof _=="string"&&x.comma&&_.indexOf(",")>-1)return _.split(",");if(x.throwOnLimitExceeded&&b>=x.arrayLimit)throw new RangeError("Array limit exceeded. Only "+x.arrayLimit+" element"+(x.arrayLimit===1?"":"s")+" allowed in an array.");return _},h="utf8=%26%2310003%3B",c="utf8=%E2%9C%93",p=function(x,b){var w={__proto__:null},S=b.ignoreQueryPrefix?x.replace(/^\?/,""):x;S=S.replace(/%5B/gi,"[").replace(/%5D/gi,"]");var C=b.parameterLimit===1/0?void 0:b.parameterLimit,U=S.split(b.delimiter,b.throwOnLimitExceeded?C+1:C);if(b.throwOnLimitExceeded&&U.length>C)throw new RangeError("Parameter limit exceeded. Only "+C+" parameter"+(C===1?"":"s")+" allowed.");var O=-1,P,B=b.charset;if(b.charsetSentinel)for(P=0;P<U.length;++P)U[P].indexOf("utf8=")===0&&(U[P]===c?B="utf-8":U[P]===h&&(B="iso-8859-1"),O=P,P=U.length);for(P=0;P<U.length;++P)if(P!==O){var j=U[P],D=j.indexOf("]="),$=D===-1?j.indexOf("="):D+1,nt,lt;$===-1?(nt=b.decoder(j,n.decoder,B,"key"),lt=b.strictNullHandling?null:""):(nt=b.decoder(j.slice(0,$),n.decoder,B,"key"),lt=s.maybeMap(o(j.slice($+1),b,i(w[nt])?w[nt].length:0),function(H){return b.decoder(H,n.decoder,B,"value")})),lt&&b.interpretNumericEntities&&B==="iso-8859-1"&&(lt=l(String(lt))),j.indexOf("[]=")>-1&&(lt=i(lt)?[lt]:lt);var it=t.call(w,nt);it&&b.duplicates==="combine"?w[nt]=s.combine(w[nt],lt):(!it||b.duplicates==="last")&&(w[nt]=lt)}return w},m=function(_,x,b,w){var S=0;if(_.length>0&&_[_.length-1]==="[]"){var C=_.slice(0,-1).join("");S=Array.isArray(x)&&x[C]?x[C].length:0}for(var U=w?x:o(x,b,S),O=_.length-1;O>=0;--O){var P,B=_[O];if(B==="[]"&&b.parseArrays)P=b.allowEmptyArrays&&(U===""||b.strictNullHandling&&U===null)?[]:s.combine([],U);else{P=b.plainObjects?{__proto__:null}:{};var j=B.charAt(0)==="["&&B.charAt(B.length-1)==="]"?B.slice(1,-1):B,D=b.decodeDotInKeys?j.replace(/%2E/g,"."):j,$=parseInt(D,10);!b.parseArrays&&D===""?P={0:U}:!isNaN($)&&B!==D&&String($)===D&&$>=0&&b.parseArrays&&$<=b.arrayLimit?(P=[],P[$]=U):D!=="__proto__"&&(P[D]=U)}U=P}return U},g=function(x,b,w,S){if(x){var C=w.allowDots?x.replace(/\.([^.[]+)/g,"[$1]"):x,U=/(\[[^[\]]*])/,O=/(\[[^[\]]*])/g,P=w.depth>0&&U.exec(C),B=P?C.slice(0,P.index):C,j=[];if(B){if(!w.plainObjects&&t.call(Object.prototype,B)&&!w.allowPrototypes)return;j.push(B)}for(var D=0;w.depth>0&&(P=O.exec(C))!==null&&D<w.depth;){if(D+=1,!w.plainObjects&&t.call(Object.prototype,P[1].slice(1,-1))&&!w.allowPrototypes)return;j.push(P[1])}if(P){if(w.strictDepth===!0)throw new RangeError("Input depth exceeded depth option of "+w.depth+" and strictDepth is true");j.push("["+C.slice(P.index)+"]")}return m(j,b,w,S)}},y=function(x){if(!x)return n;if(typeof x.allowEmptyArrays<"u"&&typeof x.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof x.decodeDotInKeys<"u"&&typeof x.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(x.decoder!==null&&typeof x.decoder<"u"&&typeof x.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof x.charset<"u"&&x.charset!=="utf-8"&&x.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");if(typeof x.throwOnLimitExceeded<"u"&&typeof x.throwOnLimitExceeded!="boolean")throw new TypeError("`throwOnLimitExceeded` option must be a boolean");var b=typeof x.charset>"u"?n.charset:x.charset,w=typeof x.duplicates>"u"?n.duplicates:x.duplicates;if(w!=="combine"&&w!=="first"&&w!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var S=typeof x.allowDots>"u"?x.decodeDotInKeys===!0?!0:n.allowDots:!!x.allowDots;return{allowDots:S,allowEmptyArrays:typeof x.allowEmptyArrays=="boolean"?!!x.allowEmptyArrays:n.allowEmptyArrays,allowPrototypes:typeof x.allowPrototypes=="boolean"?x.allowPrototypes:n.allowPrototypes,allowSparse:typeof x.allowSparse=="boolean"?x.allowSparse:n.allowSparse,arrayLimit:typeof x.arrayLimit=="number"?x.arrayLimit:n.arrayLimit,charset:b,charsetSentinel:typeof x.charsetSentinel=="boolean"?x.charsetSentinel:n.charsetSentinel,comma:typeof x.comma=="boolean"?x.comma:n.comma,decodeDotInKeys:typeof x.decodeDotInKeys=="boolean"?x.decodeDotInKeys:n.decodeDotInKeys,decoder:typeof x.decoder=="function"?x.decoder:n.decoder,delimiter:typeof x.delimiter=="string"||s.isRegExp(x.delimiter)?x.delimiter:n.delimiter,depth:typeof x.depth=="number"||x.depth===!1?+x.depth:n.depth,duplicates:w,ignoreQueryPrefix:x.ignoreQueryPrefix===!0,interpretNumericEntities:typeof x.interpretNumericEntities=="boolean"?x.interpretNumericEntities:n.interpretNumericEntities,parameterLimit:typeof x.parameterLimit=="number"?x.parameterLimit:n.parameterLimit,parseArrays:x.parseArrays!==!1,plainObjects:typeof x.plainObjects=="boolean"?x.plainObjects:n.plainObjects,strictDepth:typeof x.strictDepth=="boolean"?!!x.strictDepth:n.strictDepth,strictNullHandling:typeof x.strictNullHandling=="boolean"?x.strictNullHandling:n.strictNullHandling,throwOnLimitExceeded:typeof x.throwOnLimitExceeded=="boolean"?x.throwOnLimitExceeded:!1}};return qf=function(_,x){var b=y(x);if(_===""||_===null||typeof _>"u")return b.plainObjects?{__proto__:null}:{};for(var w=typeof _=="string"?p(_,b):_,S=b.plainObjects?{__proto__:null}:{},C=Object.keys(w),U=0;U<C.length;++U){var O=C[U],P=g(O,w[O],b,typeof _=="string");S=s.merge(S,P,b)}return b.allowSparse===!0?S:s.compact(S)},qf}var Yf,x0;function nT(){if(x0)return Yf;x0=1;var s=iT(),t=rT(),i=lp();return Yf={formats:i,parse:t,stringify:s},Yf}var b0;function sT(){if(b0)return Fn;b0=1;var s=AE();function t(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var i=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,o=["<",">",'"',"`"," ","\r",`
`,"	"],h=["{","}","|","\\","^","`"].concat(o),c=["'"].concat(h),p=["%","/","?",";","#"].concat(c),m=["/","?","#"],g=255,y=/^[+a-z0-9A-Z_-]{0,63}$/,_=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},b={javascript:!0,"javascript:":!0},w={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=nT();function C(B,j,D){if(B&&typeof B=="object"&&B instanceof t)return B;var $=new t;return $.parse(B,j,D),$}t.prototype.parse=function(B,j,D){if(typeof B!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof B);var $=B.indexOf("?"),nt=$!==-1&&$<B.indexOf("#")?"?":"#",lt=B.split(nt),it=/\\/g;lt[0]=lt[0].replace(it,"/"),B=lt.join(nt);var H=B;if(H=H.trim(),!D&&B.split("#").length===1){var J=l.exec(H);if(J)return this.path=H,this.href=H,this.pathname=J[1],J[2]?(this.search=J[2],j?this.query=S.parse(this.search.substr(1)):this.query=this.search.substr(1)):j&&(this.search="",this.query={}),this}var Q=i.exec(H);if(Q){Q=Q[0];var pt=Q.toLowerCase();this.protocol=pt,H=H.substr(Q.length)}if(D||Q||H.match(/^\/\/[^@/]+@[^@/]+/)){var E=H.substr(0,2)==="//";E&&!(Q&&b[Q])&&(H=H.substr(2),this.slashes=!0)}if(!b[Q]&&(E||Q&&!w[Q])){for(var R=-1,M=0;M<m.length;M++){var z=H.indexOf(m[M]);z!==-1&&(R===-1||z<R)&&(R=z)}var I,T;R===-1?T=H.lastIndexOf("@"):T=H.lastIndexOf("@",R),T!==-1&&(I=H.slice(0,T),H=H.slice(T+1),this.auth=decodeURIComponent(I)),R=-1;for(var M=0;M<p.length;M++){var z=H.indexOf(p[M]);z!==-1&&(R===-1||z<R)&&(R=z)}R===-1&&(R=H.length),this.host=H.slice(0,R),H=H.slice(R),this.parseHost(),this.hostname=this.hostname||"";var N=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!N)for(var F=this.hostname.split(/\./),M=0,X=F.length;M<X;M++){var tt=F[M];if(tt&&!tt.match(y)){for(var at="",ot=0,ft=tt.length;ot<ft;ot++)tt.charCodeAt(ot)>127?at+="x":at+=tt[ot];if(!at.match(y)){var ct=F.slice(0,M),ut=F.slice(M+1),vt=tt.match(_);vt&&(ct.push(vt[1]),ut.unshift(vt[2])),ut.length&&(H="/"+ut.join(".")+H),this.hostname=ct.join(".");break}}}this.hostname.length>g?this.hostname="":this.hostname=this.hostname.toLowerCase(),N||(this.hostname=s.toASCII(this.hostname));var xt=this.port?":"+this.port:"",Dt=this.hostname||"";this.host=Dt+xt,this.href+=this.host,N&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),H[0]!=="/"&&(H="/"+H))}if(!x[pt])for(var M=0,X=c.length;M<X;M++){var Ot=c[M];if(H.indexOf(Ot)!==-1){var _t=encodeURIComponent(Ot);_t===Ot&&(_t=escape(Ot)),H=H.split(Ot).join(_t)}}var bt=H.indexOf("#");bt!==-1&&(this.hash=H.substr(bt),H=H.slice(0,bt));var oe=H.indexOf("?");if(oe!==-1?(this.search=H.substr(oe),this.query=H.substr(oe+1),j&&(this.query=S.parse(this.query)),H=H.slice(0,oe)):j&&(this.search="",this.query={}),H&&(this.pathname=H),w[pt]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var xt=this.pathname||"",fe=this.search||"";this.path=xt+fe}return this.href=this.format(),this};function U(B){return typeof B=="string"&&(B=C(B)),B instanceof t?B.format():t.prototype.format.call(B)}t.prototype.format=function(){var B=this.auth||"";B&&(B=encodeURIComponent(B),B=B.replace(/%3A/i,":"),B+="@");var j=this.protocol||"",D=this.pathname||"",$=this.hash||"",nt=!1,lt="";this.host?nt=B+this.host:this.hostname&&(nt=B+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(nt+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(lt=S.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var it=this.search||lt&&"?"+lt||"";return j&&j.substr(-1)!==":"&&(j+=":"),this.slashes||(!j||w[j])&&nt!==!1?(nt="//"+(nt||""),D&&D.charAt(0)!=="/"&&(D="/"+D)):nt||(nt=""),$&&$.charAt(0)!=="#"&&($="#"+$),it&&it.charAt(0)!=="?"&&(it="?"+it),D=D.replace(/[?#]/g,function(H){return encodeURIComponent(H)}),it=it.replace("#","%23"),j+nt+D+it+$};function O(B,j){return C(B,!1,!0).resolve(j)}t.prototype.resolve=function(B){return this.resolveObject(C(B,!1,!0)).format()};function P(B,j){return B?C(B,!1,!0).resolveObject(j):j}return t.prototype.resolveObject=function(B){if(typeof B=="string"){var j=new t;j.parse(B,!1,!0),B=j}for(var D=new t,$=Object.keys(this),nt=0;nt<$.length;nt++){var lt=$[nt];D[lt]=this[lt]}if(D.hash=B.hash,B.href==="")return D.href=D.format(),D;if(B.slashes&&!B.protocol){for(var it=Object.keys(B),H=0;H<it.length;H++){var J=it[H];J!=="protocol"&&(D[J]=B[J])}return w[D.protocol]&&D.hostname&&!D.pathname&&(D.pathname="/",D.path=D.pathname),D.href=D.format(),D}if(B.protocol&&B.protocol!==D.protocol){if(!w[B.protocol]){for(var Q=Object.keys(B),pt=0;pt<Q.length;pt++){var E=Q[pt];D[E]=B[E]}return D.href=D.format(),D}if(D.protocol=B.protocol,!B.host&&!b[B.protocol]){for(var X=(B.pathname||"").split("/");X.length&&!(B.host=X.shift()););B.host||(B.host=""),B.hostname||(B.hostname=""),X[0]!==""&&X.unshift(""),X.length<2&&X.unshift(""),D.pathname=X.join("/")}else D.pathname=B.pathname;if(D.search=B.search,D.query=B.query,D.host=B.host||"",D.auth=B.auth,D.hostname=B.hostname||B.host,D.port=B.port,D.pathname||D.search){var R=D.pathname||"",M=D.search||"";D.path=R+M}return D.slashes=D.slashes||B.slashes,D.href=D.format(),D}var z=D.pathname&&D.pathname.charAt(0)==="/",I=B.host||B.pathname&&B.pathname.charAt(0)==="/",T=I||z||D.host&&B.pathname,N=T,F=D.pathname&&D.pathname.split("/")||[],X=B.pathname&&B.pathname.split("/")||[],tt=D.protocol&&!w[D.protocol];if(tt&&(D.hostname="",D.port=null,D.host&&(F[0]===""?F[0]=D.host:F.unshift(D.host)),D.host="",B.protocol&&(B.hostname=null,B.port=null,B.host&&(X[0]===""?X[0]=B.host:X.unshift(B.host)),B.host=null),T=T&&(X[0]===""||F[0]==="")),I)D.host=B.host||B.host===""?B.host:D.host,D.hostname=B.hostname||B.hostname===""?B.hostname:D.hostname,D.search=B.search,D.query=B.query,F=X;else if(X.length)F||(F=[]),F.pop(),F=F.concat(X),D.search=B.search,D.query=B.query;else if(B.search!=null){if(tt){D.host=F.shift(),D.hostname=D.host;var at=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;at&&(D.auth=at.shift(),D.hostname=at.shift(),D.host=D.hostname)}return D.search=B.search,D.query=B.query,(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.href=D.format(),D}if(!F.length)return D.pathname=null,D.search?D.path="/"+D.search:D.path=null,D.href=D.format(),D;for(var ot=F.slice(-1)[0],ft=(D.host||B.host||F.length>1)&&(ot==="."||ot==="..")||ot==="",ct=0,ut=F.length;ut>=0;ut--)ot=F[ut],ot==="."?F.splice(ut,1):ot===".."?(F.splice(ut,1),ct++):ct&&(F.splice(ut,1),ct--);if(!T&&!N)for(;ct--;ct)F.unshift("..");T&&F[0]!==""&&(!F[0]||F[0].charAt(0)!=="/")&&F.unshift(""),ft&&F.join("/").substr(-1)!=="/"&&F.push("");var vt=F[0]===""||F[0]&&F[0].charAt(0)==="/";if(tt){D.hostname=vt?"":F.length?F.shift():"",D.host=D.hostname;var at=D.host&&D.host.indexOf("@")>0?D.host.split("@"):!1;at&&(D.auth=at.shift(),D.hostname=at.shift(),D.host=D.hostname)}return T=T||D.host&&F.length,T&&!vt&&F.unshift(""),F.length>0?D.pathname=F.join("/"):(D.pathname=null,D.path=null),(D.pathname!==null||D.search!==null)&&(D.path=(D.pathname?D.pathname:"")+(D.search?D.search:"")),D.auth=B.auth||D.auth,D.slashes=D.slashes||B.slashes,D.href=D.format(),D},t.prototype.parseHost=function(){var B=this.host,j=n.exec(B);j&&(j=j[0],j!==":"&&(this.port=j.substr(1)),B=B.substr(0,B.length-j.length)),B&&(this.hostname=B)},Fn.parse=C,Fn.resolve=O,Fn.resolveObject=P,Fn.format=U,Fn.Url=t,Fn}sT();const E0={};function zt(s,t,i=3){if(E0[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`):(n=n.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${s}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${s}`),console.warn(n))),E0[t]=!0}function Di(s){if(typeof s!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(s)}`)}function il(s){return s.split("?")[0].split("#")[0]}function aT(s){return s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function lT(s,t,i){return s.replace(new RegExp(aT(t),"g"),i)}function oT(s,t){let i="",n=0,l=-1,o=0,h=-1;for(let c=0;c<=s.length;++c){if(c<s.length)h=s.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(l===c-1||o===1))if(l!==c-1&&o===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const p=i.lastIndexOf("/");if(p!==i.length-1){p===-1?(i="",n=0):(i=i.slice(0,p),n=i.length-1-i.lastIndexOf("/")),l=c,o=0;continue}}else if(i.length===2||i.length===1){i="",n=0,l=c,o=0;continue}}}else i.length>0?i+=`/${s.slice(l+1,c)}`:i=s.slice(l+1,c),n=c-l-1;l=c,o=0}else h===46&&o!==-1?++o:o=-1}return i}const Oe={toPosix(s){return lT(s,"\\","/")},isUrl(s){return/^https?:/.test(this.toPosix(s))},isDataUrl(s){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(s)},isBlobUrl(s){return s.startsWith("blob:")},hasProtocol(s){return/^[^/:]+:/.test(this.toPosix(s))},getProtocol(s){Di(s),s=this.toPosix(s);const t=/^file:\/\/\//.exec(s);if(t)return t[0];const i=/^[^/:]+:\/{0,2}/.exec(s);return i?i[0]:""},toAbsolute(s,t,i){if(Di(s),this.isDataUrl(s)||this.isBlobUrl(s))return s;const n=il(this.toPosix(t??gt.ADAPTER.getBaseUrl())),l=il(this.toPosix(i??this.rootname(n)));return s=this.toPosix(s),s.startsWith("/")?Oe.join(l,s.slice(1)):this.isAbsolute(s)?s:this.join(n,s)},normalize(s){if(Di(s),s.length===0)return".";if(this.isDataUrl(s)||this.isBlobUrl(s))return s;s=this.toPosix(s);let t="";const i=s.startsWith("/");this.hasProtocol(s)&&(t=this.rootname(s),s=s.slice(t.length));const n=s.endsWith("/");return s=oT(s),s.length>0&&n&&(s+="/"),i?`/${s}`:t+s},isAbsolute(s){return Di(s),s=this.toPosix(s),this.hasProtocol(s)?!0:s.startsWith("/")},join(...s){if(s.length===0)return".";let t;for(let i=0;i<s.length;++i){const n=s[i];if(Di(n),n.length>0)if(t===void 0)t=n;else{const l=s[i-1]??"";this.joinExtensions.includes(this.extname(l).toLowerCase())?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(s){if(Di(s),s.length===0)return".";s=this.toPosix(s);let t=s.charCodeAt(0);const i=t===47;let n=-1,l=!0;const o=this.getProtocol(s),h=s;s=s.slice(o.length);for(let c=s.length-1;c>=1;--c)if(t=s.charCodeAt(c),t===47){if(!l){n=c;break}}else l=!1;return n===-1?i?"/":this.isUrl(h)?o+s:o:i&&n===1?"//":o+s.slice(0,n)},rootname(s){Di(s),s=this.toPosix(s);let t="";if(s.startsWith("/")?t="/":t=this.getProtocol(s),this.isUrl(s)){const i=s.indexOf("/",t.length);i!==-1?t=s.slice(0,i):t=s,t.endsWith("/")||(t+="/")}return t},basename(s,t){Di(s),t&&Di(t),s=il(this.toPosix(s));let i=0,n=-1,l=!0,o;if(t!==void 0&&t.length>0&&t.length<=s.length){if(t.length===s.length&&t===s)return"";let h=t.length-1,c=-1;for(o=s.length-1;o>=0;--o){const p=s.charCodeAt(o);if(p===47){if(!l){i=o+1;break}}else c===-1&&(l=!1,c=o+1),h>=0&&(p===t.charCodeAt(h)?--h===-1&&(n=o):(h=-1,n=c))}return i===n?n=c:n===-1&&(n=s.length),s.slice(i,n)}for(o=s.length-1;o>=0;--o)if(s.charCodeAt(o)===47){if(!l){i=o+1;break}}else n===-1&&(l=!1,n=o+1);return n===-1?"":s.slice(i,n)},extname(s){Di(s),s=il(this.toPosix(s));let t=-1,i=0,n=-1,l=!0,o=0;for(let h=s.length-1;h>=0;--h){const c=s.charCodeAt(h);if(c===47){if(!l){i=h+1;break}continue}n===-1&&(l=!1,n=h+1),c===46?t===-1?t=h:o!==1&&(o=1):t!==-1&&(o=-1)}return t===-1||n===-1||o===0||o===1&&t===n-1&&t===i+1?"":s.slice(t,n)},parse(s){Di(s);const t={root:"",dir:"",base:"",ext:"",name:""};if(s.length===0)return t;s=il(this.toPosix(s));let i=s.charCodeAt(0);const n=this.isAbsolute(s);let l;t.root=this.rootname(s),n||this.hasProtocol(s)?l=1:l=0;let o=-1,h=0,c=-1,p=!0,m=s.length-1,g=0;for(;m>=l;--m){if(i=s.charCodeAt(m),i===47){if(!p){h=m+1;break}continue}c===-1&&(p=!1,c=m+1),i===46?o===-1?o=m:g!==1&&(g=1):o!==-1&&(g=-1)}return o===-1||c===-1||g===0||g===1&&o===c-1&&o===h+1?c!==-1&&(h===0&&n?t.base=t.name=s.slice(1,c):t.base=t.name=s.slice(h,c)):(h===0&&n?(t.name=s.slice(1,o),t.base=s.slice(1,c)):(t.name=s.slice(h,o),t.base=s.slice(h,c)),t.ext=s.slice(o,c)),t.dir=this.dirname(s),t},sep:"/",delimiter:":",joinExtensions:[".html"]};let $f;async function uT(){return $f??($f=(async()=>{const s=document.createElement("canvas").getContext("webgl");if(!s)return Je.UNPACK;const t=await new Promise(o=>{const h=document.createElement("video");h.onloadeddata=()=>o(h),h.onerror=()=>o(null),h.autoplay=!1,h.crossOrigin="anonymous",h.preload="auto",h.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",h.load()});if(!t)return Je.UNPACK;const i=s.createTexture();s.bindTexture(s.TEXTURE_2D,i);const n=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,n),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,i,0),s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),s.pixelStorei(s.UNPACK_COLORSPACE_CONVERSION_WEBGL,s.NONE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,t);const l=new Uint8Array(4);return s.readPixels(0,0,1,1,s.RGBA,s.UNSIGNED_BYTE,l),s.deleteFramebuffer(n),s.deleteTexture(i),s.getExtension("WEBGL_lose_context")?.loseContext(),l[0]<=l[3]?Je.PMA:Je.UNPACK})()),$f}let Wf;function hT(){return typeof Wf>"u"&&(Wf=(function(){const s={stencil:!0,failIfMajorPerformanceCaveat:gt.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!gt.ADAPTER.getWebGLRenderingContext())return!1;const t=gt.ADAPTER.createCanvas();let i=t.getContext("webgl",s)||t.getContext("experimental-webgl",s);const n=!!i?.getContextAttributes()?.stencil;if(i){const l=i.getExtension("WEBGL_lose_context");l&&l.loseContext()}return i=null,n}catch{return!1}})()),Wf}var cT={grad:.9,turn:360,rad:360/(2*Math.PI)},Ar=function(s){return typeof s=="string"?s.length>0:typeof s=="number"},De=function(s,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*s)/i+0},Ai=function(s,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),s>i?i:s>t?s:t},O_=function(s){return(s=isFinite(s)?s%360:0)>0?s:s+360},T0=function(s){return{r:Ai(s.r,0,255),g:Ai(s.g,0,255),b:Ai(s.b,0,255),a:Ai(s.a)}},Zf=function(s){return{r:De(s.r),g:De(s.g),b:De(s.b),a:De(s.a,3)}},fT=/^#([0-9a-f]{3,8})$/i,Fo=function(s){var t=s.toString(16);return t.length<2?"0"+t:t},B_=function(s){var t=s.r,i=s.g,n=s.b,l=s.a,o=Math.max(t,i,n),h=o-Math.min(t,i,n),c=h?o===t?(i-n)/h:o===i?2+(n-t)/h:4+(t-i)/h:0;return{h:60*(c<0?c+6:c),s:o?h/o*100:0,v:o/255*100,a:l}},N_=function(s){var t=s.h,i=s.s,n=s.v,l=s.a;t=t/360*6,i/=100,n/=100;var o=Math.floor(t),h=n*(1-i),c=n*(1-(t-o)*i),p=n*(1-(1-t+o)*i),m=o%6;return{r:255*[n,c,h,h,p,n][m],g:255*[p,n,n,c,h,h][m],b:255*[h,h,p,n,n,c][m],a:l}},S0=function(s){return{h:O_(s.h),s:Ai(s.s,0,100),l:Ai(s.l,0,100),a:Ai(s.a)}},A0=function(s){return{h:De(s.h),s:De(s.s),l:De(s.l),a:De(s.a,3)}},w0=function(s){return N_((i=(t=s).s,{h:t.h,s:(i*=((n=t.l)<50?n:100-n)/100)>0?2*i/(n+i)*100:0,v:n+i,a:t.a}));var t,i,n},ml=function(s){return{h:(t=B_(s)).h,s:(l=(200-(i=t.s))*(n=t.v)/100)>0&&l<200?i*n/100/(l<=100?l:200-l)*100:0,l:l/2,a:t.a};var t,i,n,l},dT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pT=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,mT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gT=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,bd={string:[[function(s){var t=fT.exec(s);return t?(s=t[1]).length<=4?{r:parseInt(s[0]+s[0],16),g:parseInt(s[1]+s[1],16),b:parseInt(s[2]+s[2],16),a:s.length===4?De(parseInt(s[3]+s[3],16)/255,2):1}:s.length===6||s.length===8?{r:parseInt(s.substr(0,2),16),g:parseInt(s.substr(2,2),16),b:parseInt(s.substr(4,2),16),a:s.length===8?De(parseInt(s.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(s){var t=mT.exec(s)||gT.exec(s);return t?t[2]!==t[4]||t[4]!==t[6]?null:T0({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(s){var t=dT.exec(s)||pT.exec(s);if(!t)return null;var i,n,l=S0({h:(i=t[1],n=t[2],n===void 0&&(n="deg"),Number(i)*(cT[n]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return w0(l)},"hsl"]],object:[[function(s){var t=s.r,i=s.g,n=s.b,l=s.a,o=l===void 0?1:l;return Ar(t)&&Ar(i)&&Ar(n)?T0({r:Number(t),g:Number(i),b:Number(n),a:Number(o)}):null},"rgb"],[function(s){var t=s.h,i=s.s,n=s.l,l=s.a,o=l===void 0?1:l;if(!Ar(t)||!Ar(i)||!Ar(n))return null;var h=S0({h:Number(t),s:Number(i),l:Number(n),a:Number(o)});return w0(h)},"hsl"],[function(s){var t=s.h,i=s.s,n=s.v,l=s.a,o=l===void 0?1:l;if(!Ar(t)||!Ar(i)||!Ar(n))return null;var h=(function(c){return{h:O_(c.h),s:Ai(c.s,0,100),v:Ai(c.v,0,100),a:Ai(c.a)}})({h:Number(t),s:Number(i),v:Number(n),a:Number(o)});return N_(h)},"hsv"]]},C0=function(s,t){for(var i=0;i<t.length;i++){var n=t[i][0](s);if(n)return[n,t[i][1]]}return[null,void 0]},yT=function(s){return typeof s=="string"?C0(s.trim(),bd.string):typeof s=="object"&&s!==null?C0(s,bd.object):[null,void 0]},Kf=function(s,t){var i=ml(s);return{h:i.h,s:Ai(i.s+100*t,0,100),l:i.l,a:i.a}},Qf=function(s){return(299*s.r+587*s.g+114*s.b)/1e3/255},R0=function(s,t){var i=ml(s);return{h:i.h,s:i.s,l:Ai(i.l+100*t,0,100),a:i.a}},Ed=(function(){function s(t){this.parsed=yT(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return s.prototype.isValid=function(){return this.parsed!==null},s.prototype.brightness=function(){return De(Qf(this.rgba),2)},s.prototype.isDark=function(){return Qf(this.rgba)<.5},s.prototype.isLight=function(){return Qf(this.rgba)>=.5},s.prototype.toHex=function(){return t=Zf(this.rgba),i=t.r,n=t.g,l=t.b,h=(o=t.a)<1?Fo(De(255*o)):"","#"+Fo(i)+Fo(n)+Fo(l)+h;var t,i,n,l,o,h},s.prototype.toRgb=function(){return Zf(this.rgba)},s.prototype.toRgbString=function(){return t=Zf(this.rgba),i=t.r,n=t.g,l=t.b,(o=t.a)<1?"rgba("+i+", "+n+", "+l+", "+o+")":"rgb("+i+", "+n+", "+l+")";var t,i,n,l,o},s.prototype.toHsl=function(){return A0(ml(this.rgba))},s.prototype.toHslString=function(){return t=A0(ml(this.rgba)),i=t.h,n=t.s,l=t.l,(o=t.a)<1?"hsla("+i+", "+n+"%, "+l+"%, "+o+")":"hsl("+i+", "+n+"%, "+l+"%)";var t,i,n,l,o},s.prototype.toHsv=function(){return t=B_(this.rgba),{h:De(t.h),s:De(t.s),v:De(t.v),a:De(t.a,3)};var t},s.prototype.invert=function(){return qi({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},s.prototype.saturate=function(t){return t===void 0&&(t=.1),qi(Kf(this.rgba,t))},s.prototype.desaturate=function(t){return t===void 0&&(t=.1),qi(Kf(this.rgba,-t))},s.prototype.grayscale=function(){return qi(Kf(this.rgba,-1))},s.prototype.lighten=function(t){return t===void 0&&(t=.1),qi(R0(this.rgba,t))},s.prototype.darken=function(t){return t===void 0&&(t=.1),qi(R0(this.rgba,-t))},s.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},s.prototype.alpha=function(t){return typeof t=="number"?qi({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):De(this.rgba.a,3);var i},s.prototype.hue=function(t){var i=ml(this.rgba);return typeof t=="number"?qi({h:t,s:i.s,l:i.l,a:i.a}):De(i.h)},s.prototype.isEqual=function(t){return this.toHex()===qi(t).toHex()},s})(),qi=function(s){return s instanceof Ed?s:new Ed(s)},M0=[],vT=function(s){s.forEach(function(t){M0.indexOf(t)<0&&(t(Ed,bd),M0.push(t))})};function _T(s,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var l in i)n[i[l]]=l;var o={};s.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,p,m=n[this.toHex()];if(m)return m;if(h?.closest){var g=this.toRgb(),y=1/0,_="black";if(!o.length)for(var x in i)o[x]=new s(i[x]).toRgb();for(var b in i){var w=(c=g,p=o[b],Math.pow(c.r-p.r,2)+Math.pow(c.g-p.g,2)+Math.pow(c.b-p.b,2));w<y&&(y=w,_=b)}return _}},t.string.push([function(h){var c=h.toLowerCase(),p=c==="transparent"?"#0000":i[c];return p?new s(p).toRgb():null},"name"])}vT([_T]);const Xs=class nu{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof nu)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,i){const n=typeof t;if(n!==typeof i)return!1;if(n==="number"||n==="string"||t instanceof Number)return t===i;if(Array.isArray(t)&&Array.isArray(i)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(i))return t.length!==i.length?!1:t.every((l,o)=>l===i[o]);if(t!==null&&i!==null){const l=Object.keys(t),o=Object.keys(i);return l.length!==o.length?!1:l.every(h=>t[h]===i[h])}return t===i}toRgba(){const[t,i,n,l]=this._components;return{r:t,g:i,b:n,a:l}}toRgb(){const[t,i,n]=this._components;return{r:t,g:i,b:n}}toRgbaString(){const[t,i,n]=this.toUint8RgbArray();return`rgba(${t},${i},${n},${this.alpha})`}toUint8RgbArray(t){const[i,n,l]=this._components;return t=t??[],t[0]=Math.round(i*255),t[1]=Math.round(n*255),t[2]=Math.round(l*255),t}toRgbArray(t){t=t??[];const[i,n,l]=this._components;return t[0]=i,t[1]=n,t[2]=l,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[i,n,l,o]=nu.temp.setValue(t)._components;return this._components[0]*=i,this._components[1]*=n,this._components[2]*=l,this._components[3]*=o,this.refreshInt(),this._value=null,this}premultiply(t,i=!0){return i&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,i=!0){if(t===1)return(255<<24)+this._int;if(t===0)return i?0:this._int;let n=this._int>>16&255,l=this._int>>8&255,o=this._int&255;return i&&(n=n*t+.5|0,l=l*t+.5|0,o=o*t+.5|0),(t*255<<24)+(n<<16)+(l<<8)+o}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[i,n,l]=this._components;return this._components[0]=Math.round(i*t)/t,this._components[1]=Math.round(n*t)/t,this._components[2]=Math.round(l*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[i,n,l,o]=this._components;return t[0]=i,t[1]=n,t[2]=l,t[3]=o,t}normalize(t){let i,n,l,o;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const h=t;i=(h>>16&255)/255,n=(h>>8&255)/255,l=(h&255)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[i,n,l,o=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[i,n,l,o=255]=t,i/=255,n/=255,l/=255,o/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const c=nu.HEX_PATTERN.exec(t);c&&(t=`#${c[2]}`)}const h=qi(t);h.isValid()&&({r:i,g:n,b:l,a:o}=h.rgba,i/=255,n/=255,l/=255)}if(i!==void 0)this._components[0]=i,this._components[1]=n,this._components[2]=l,this._components[3]=o,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,i,n]=this._components;this._int=(t*255<<16)+(i*255<<8)+(n*255|0)}_clamp(t,i=0,n=1){return typeof t=="number"?Math.min(Math.max(t,i),n):(t.forEach((l,o)=>{t[o]=Math.min(Math.max(l,i),n)}),t)}};Xs.shared=new Xs,Xs.temp=new Xs,Xs.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let se=Xs;function xT(s){return zt("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),se.shared.setValue(s).toHex()}function bT(s){return zt("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),se.shared.setValue(s).toNumber()}function ET(){const s=[],t=[];for(let n=0;n<32;n++)s[n]=n,t[n]=n;s[Mt.NORMAL_NPM]=Mt.NORMAL,s[Mt.ADD_NPM]=Mt.ADD,s[Mt.SCREEN_NPM]=Mt.SCREEN,t[Mt.NORMAL]=Mt.NORMAL_NPM,t[Mt.ADD]=Mt.ADD_NPM,t[Mt.SCREEN]=Mt.SCREEN_NPM;const i=[];return i.push(t),i.push(s),i}const I_=ET();function U_(s,t){return I_[t?1:0][s]}function TT(s,t=null){const i=s*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let n=0,l=0;n<i;n+=6,l+=4)t[n+0]=l+0,t[n+1]=l+1,t[n+2]=l+2,t[n+3]=l+0,t[n+4]=l+2,t[n+5]=l+3;return t}function L_(s){if(s.BYTES_PER_ELEMENT===4)return s instanceof Float32Array?"Float32Array":s instanceof Uint32Array?"Uint32Array":"Int32Array";if(s.BYTES_PER_ELEMENT===2){if(s instanceof Uint16Array)return"Uint16Array"}else if(s.BYTES_PER_ELEMENT===1&&s instanceof Uint8Array)return"Uint8Array";return null}function du(s){return s+=s===0?1:0,--s,s|=s>>>1,s|=s>>>2,s|=s>>>4,s|=s>>>8,s|=s>>>16,s+1}function D0(s){return!(s&s-1)&&!!s}function O0(s){let t=(s>65535?1:0)<<4;s>>>=t;let i=(s>255?1:0)<<3;return s>>>=i,t|=i,i=(s>15?1:0)<<2,s>>>=i,t|=i,i=(s>3?1:0)<<1,s>>>=i,t|=i,t|s>>1}function Ks(s,t,i){const n=s.length;let l;if(t>=n||i===0)return;i=t+i>n?n-t:i;const o=n-i;for(l=t;l<o;++l)s[l]=s[l+i];s.length=o}function fn(s){return s===0?0:s<0?-1:1}let ST=0;function Zn(){return++ST}const Td=class{constructor(s,t,i,n){this.left=s,this.top=t,this.right=i,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};Td.EMPTY=new Td(0,0,0,0);let B0=Td;const N0={},Yi=Object.create(null),ln=Object.create(null);class AT{constructor(t,i,n){this._canvas=gt.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||gt.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function I0(s,t,i){for(let n=0,l=4*i*t;n<t;++n,l+=4)if(s[l+3]!==0)return!1;return!0}function U0(s,t,i,n,l){const o=4*t;for(let h=n,c=n*o+4*i;h<=l;++h,c+=o)if(s[c+3]!==0)return!1;return!0}function wT(s){const{width:t,height:i}=s,n=s.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const l=n.getImageData(0,0,t,i).data;let o=0,h=0,c=t-1,p=i-1;for(;h<i&&I0(l,t,h);)++h;if(h===i)return B0.EMPTY;for(;I0(l,t,p);)--p;for(;U0(l,t,o,h,p);)++o;for(;U0(l,t,c,h,p);)--c;return++c,++p,new B0(o,h,c,p)}function CT(s){const t=wT(s),{width:i,height:n}=t;let l=null;if(!t.isEmpty()){const o=s.getContext("2d");if(o===null)throw new TypeError("Failed to get canvas 2D context");l=o.getImageData(t.left,t.top,i,n)}return{width:i,height:n,data:l}}function RT(s,t=globalThis.location){if(s.startsWith("data:"))return"";t=t||globalThis.location;const i=new URL(s,document.baseURI);return i.hostname!==t.hostname||i.port!==t.port||i.protocol!==t.protocol?"anonymous":""}function Dr(s,t=1){const i=gt.RETINA_PREFIX?.exec(s);return i?parseFloat(i[1]):t}var dt=(s=>(s.Renderer="renderer",s.Application="application",s.RendererSystem="renderer-webgl-system",s.RendererPlugin="renderer-webgl-plugin",s.CanvasRendererSystem="renderer-canvas-system",s.CanvasRendererPlugin="renderer-canvas-plugin",s.Asset="asset",s.LoadParser="load-parser",s.ResolveParser="resolve-parser",s.CacheParser="cache-parser",s.DetectionParser="detection-parser",s))(dt||{});const Sd=s=>{if(typeof s=="function"||typeof s=="object"&&s.extension){if(!s.extension)throw new Error("Extension class must have an extension object");s={...typeof s.extension!="object"?{type:s.extension}:s.extension,ref:s}}if(typeof s=="object")s={...s};else throw new Error("Invalid extension type");return typeof s.type=="string"&&(s.type=[s.type]),s},L0=(s,t)=>Sd(s).priority??t,St={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...s){return s.map(Sd).forEach(t=>{t.type.forEach(i=>this._removeHandlers[i]?.(t))}),this},add(...s){return s.map(Sd).forEach(t=>{t.type.forEach(i=>{const n=this._addHandlers,l=this._queue;n[i]?n[i]?.(t):(l[i]=l[i]||[],l[i]?.push(t))})}),this},handle(s,t,i){const n=this._addHandlers,l=this._removeHandlers;if(n[s]||l[s])throw new Error(`Extension type ${s} already has a handler`);n[s]=t,l[s]=i;const o=this._queue;return o[s]&&(o[s]?.forEach(h=>t(h)),delete o[s]),this},handleByMap(s,t){return this.handle(s,i=>{i.name&&(t[i.name]=i.ref)},i=>{i.name&&delete t[i.name]})},handleByList(s,t,i=-1){return this.handle(s,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((l,o)=>L0(o,i)-L0(l,i)))},n=>{const l=t.indexOf(n.ref);l!==-1&&t.splice(l,1)})}};class Ad{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const MT=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function DT(s){let t="";for(let i=0;i<s;++i)i>0&&(t+=`
else `),i<s-1&&(t+=`if(test == ${i}.0){}`);return t}function OT(s,t){if(s===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=MT.replace(/%forloop%/gi,DT(s));if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))s=s/2|0;else break}return s}const Jf=0,td=1,ed=2,id=3,rd=4,nd=5;class ir{constructor(){this.data=0,this.blendMode=Mt.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Jf)}set blend(t){!!(this.data&1<<Jf)!==t&&(this.data^=1<<Jf)}get offsets(){return!!(this.data&1<<td)}set offsets(t){!!(this.data&1<<td)!==t&&(this.data^=1<<td)}get culling(){return!!(this.data&1<<ed)}set culling(t){!!(this.data&1<<ed)!==t&&(this.data^=1<<ed)}get depthTest(){return!!(this.data&1<<id)}set depthTest(t){!!(this.data&1<<id)!==t&&(this.data^=1<<id)}get depthMask(){return!!(this.data&1<<nd)}set depthMask(t){!!(this.data&1<<nd)!==t&&(this.data^=1<<nd)}get clockwiseFrontFace(){return!!(this.data&1<<rd)}set clockwiseFrontFace(t){!!(this.data&1<<rd)!==t&&(this.data^=1<<rd)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==Mt.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}static for2d(){const t=new ir;return t.depthTest=!1,t.blend=!0,t}}ir.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const wd=[];function P_(s,t){if(!s)return null;let i="";if(typeof s=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(s);n&&(i=n[1].toLowerCase())}for(let n=wd.length-1;n>=0;--n){const l=wd[n];if(l.test&&l.test(s,i))return new l(s,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ui{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,n,l,o,h,c,p){if(arguments.length>8)throw new Error("max arguments reached");const{name:m,items:g}=this;this._aliasCount++;for(let y=0,_=g.length;y<_;y++)g[y][m](t,i,n,l,o,h,c,p);return g===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ui.prototype,{dispatch:{value:Ui.prototype.emit},run:{value:Ui.prototype.emit}});class gl{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ui("setRealSize"),this.onUpdate=new Ui("update"),this.onError=new Ui("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class Mu extends gl{constructor(t,i){const{width:n,height:l}=i||{};if(!n||!l)throw new Error("BufferResource width or height invalid");super(n,l),this.data=t,this.unpackAlignment=i.unpackAlignment??4}upload(t,i,n){const l=t.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,this.unpackAlignment),l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Je.UNPACK);const o=i.realWidth,h=i.realHeight;return n.width===o&&n.height===h?l.texSubImage2D(i.target,0,0,0,o,h,i.format,n.type,this.data):(n.width=o,n.height=h,l.texImage2D(i.target,0,n.internalFormat,o,h,0,i.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t===null||t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}const BT={scaleMode:wr.NEAREST,alphaMode:Je.NPM},Cd=class Vs extends yl{constructor(t=null,i=null){super(),i=Object.assign({},Vs.defaultOptions,i);const{alphaMode:n,mipmap:l,anisotropicLevel:o,scaleMode:h,width:c,height:p,wrapMode:m,format:g,type:y,target:_,resolution:x,resourceOptions:b}=i;t&&!(t instanceof gl)&&(t=P_(t,b),t.internal=!0),this.resolution=x||gt.RESOLUTION,this.width=Math.round((c||0)*this.resolution)/this.resolution,this.height=Math.round((p||0)*this.resolution)/this.resolution,this._mipmap=l,this.anisotropicLevel=o,this._wrapMode=m,this._scaleMode=h,this.format=g,this.type=y,this.target=_,this.alphaMode=n,this.uid=Zn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=c>0&&p>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,i){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),i!==void 0&&i!==this.mipmap&&(this.mipmap=i,n=!0),n&&this.dirtyStyleId++,this}setSize(t,i,n){return n=n||this.resolution,this.setRealSize(t*n,i*n,n)}setRealSize(t,i,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(i)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=D0(this.realWidth)&&D0(this.realHeight)}setResolution(t){const i=this.resolution;return i===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*i)/t,this.height=Math.round(this.height*i)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ln[this.cacheId],delete Yi[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Vs.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,i,n=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else{if(!t._pixiId){const c=i?.pixiIdPrefix||"pixiid";t._pixiId=`${c}_${Zn()}`}o=t._pixiId}let h=ln[o];if(l&&n&&!h)throw new Error(`The cacheId "${o}" does not exist in BaseTextureCache.`);return h||(h=new Vs(t,i),h.cacheId=o,Vs.addToCache(h,o)),h}static fromBuffer(t,i,n,l){t=t||new Float32Array(i*n*4);const o=new Mu(t,{width:i,height:n,...l?.resourceOptions});let h,c;return t instanceof Float32Array?(h=ht.RGBA,c=wt.FLOAT):t instanceof Int32Array?(h=ht.RGBA_INTEGER,c=wt.INT):t instanceof Uint32Array?(h=ht.RGBA_INTEGER,c=wt.UNSIGNED_INT):t instanceof Int16Array?(h=ht.RGBA_INTEGER,c=wt.SHORT):t instanceof Uint16Array?(h=ht.RGBA_INTEGER,c=wt.UNSIGNED_SHORT):t instanceof Int8Array?(h=ht.RGBA,c=wt.BYTE):(h=ht.RGBA,c=wt.UNSIGNED_BYTE),o.internal=!0,new Vs(o,Object.assign({},BT,{type:c,format:h},l))}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),ln[i]&&ln[i]!==t&&console.warn(`BaseTexture added to the cache with an id [${i}] that already had an entry`),ln[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=ln[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete ln[t],i}}else if(t?.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)delete ln[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}};Cd.defaultOptions={mipmap:er.POW2,anisotropicLevel:0,scaleMode:wr.LINEAR,wrapMode:pn.CLAMP,alphaMode:Je.UNPACK,target:Zs.TEXTURE_2D,format:ht.RGBA,type:wt.UNSIGNED_BYTE},Cd._globalBatch=0;let It=Cd;class Rd{constructor(){this.texArray=null,this.blend=0,this.type=Qi.TRIANGLES,this.start=0,this.size=0,this.data=null}}let NT=0;class ve{constructor(t,i=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=i,this.id=NT++,this.disposeRunner=new Ui("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?Ji.ELEMENT_ARRAY_BUFFER:Ji.ARRAY_BUFFER}get index(){return this.type===Ji.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new ve(t)}}class pu{constructor(t,i=0,n=!1,l=wt.FLOAT,o,h,c,p=1){this.buffer=t,this.size=i,this.normalized=n,this.type=l,this.stride=o,this.start=h,this.instance=c,this.divisor=p}destroy(){this.buffer=null}static from(t,i,n,l,o){return new pu(t,i,n,l,o)}}const IT={Float32Array,Uint32Array,Int32Array,Uint8Array};function UT(s,t){let i=0,n=0;const l={};for(let p=0;p<s.length;p++)n+=t[p],i+=s[p].length;const o=new ArrayBuffer(i*4);let h=null,c=0;for(let p=0;p<s.length;p++){const m=t[p],g=s[p],y=L_(g);l[y]||(l[y]=new IT[y](o)),h=l[y];for(let _=0;_<g.length;_++){const x=(_/m|0)*n+c,b=_%m;h[x+b]=g[_]}c+=m}return new Float32Array(o)}const P0={5126:4,5123:2,5121:1};let LT=0;const PT={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class mn{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=LT++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ui("disposeGeometry"),this.refCount=0}addAttribute(t,i,n=0,l=!1,o,h,c,p=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof ve||(i instanceof Array&&(i=new Float32Array(i)),i=new ve(i));const m=t.split("|");if(m.length>1){for(let y=0;y<m.length;y++)this.addAttribute(m[y],i,n,l,o);return this}let g=this.buffers.indexOf(i);return g===-1&&(this.buffers.push(i),g=this.buffers.length-1),this.attributes[t]=new pu(g,n,l,o,h,c,p),this.instanced=this.instanced||p,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof ve||(t instanceof Array&&(t=new Uint16Array(t)),t=new ve(t)),t.type=Ji.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],n=new ve;let l;for(l in this.attributes){const o=this.attributes[l],h=this.buffers[o.buffer];t.push(h.data),i.push(o.size*P0[o.type]/4),o.buffer=0}for(n.data=UT(t,i),l=0;l<this.buffers.length;l++)this.buffers[l]!==this.indexBuffer&&this.buffers[l].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new mn;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new ve(this.buffers[i].data.slice(0));for(const i in this.attributes){const n=this.attributes[i];t.attributes[i]=new pu(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Ji.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new mn,n=[],l=[],o=[];let h;for(let c=0;c<t.length;c++){h=t[c];for(let p=0;p<h.buffers.length;p++)l[p]=l[p]||0,l[p]+=h.buffers[p].data.length,o[p]=0}for(let c=0;c<h.buffers.length;c++)n[c]=new PT[L_(h.buffers[c].data)](l[c]),i.buffers[c]=new ve(n[c]);for(let c=0;c<t.length;c++){h=t[c];for(let p=0;p<h.buffers.length;p++)n[p].set(h.buffers[p].data,o[p]),o[p]+=h.buffers[p].data.length}if(i.attributes=h.attributes,h.indexBuffer){i.indexBuffer=i.buffers[h.buffers.indexOf(h.indexBuffer)],i.indexBuffer.type=Ji.ELEMENT_ARRAY_BUFFER;let c=0,p=0,m=0,g=0;for(let y=0;y<h.buffers.length;y++)if(h.buffers[y]!==h.indexBuffer){g=y;break}for(const y in h.attributes){const _=h.attributes[y];(_.buffer|0)===g&&(p+=_.size*P0[_.type]/4)}for(let y=0;y<t.length;y++){const _=t[y].indexBuffer.data;for(let x=0;x<_.length;x++)i.indexBuffer.data[x+m]+=c;c+=t[y].buffers[g].data.length/p,m+=_.length}}return i}}class F_ extends mn{constructor(t=!1){super(),this._buffer=new ve(null,t,!1),this._indexBuffer=new ve(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,wt.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,wt.FLOAT).addAttribute("aColor",this._buffer,4,!0,wt.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,wt.FLOAT).addIndex(this._indexBuffer)}}const mu=Math.PI*2,FT=180/Math.PI,GT=Math.PI/180;var Ge=(s=>(s[s.POLY=0]="POLY",s[s.RECT=1]="RECT",s[s.CIRC=2]="CIRC",s[s.ELIP=3]="ELIP",s[s.RREC=4]="RREC",s))(Ge||{});class Vt{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Vt(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}}Vt.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const Go=[new Vt,new Vt,new Vt,new Vt];class Ut{constructor(t=0,i=0,n=0,l=0){this.x=Number(t),this.y=Number(i),this.width=Number(n),this.height=Number(l),this.type=Ge.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Ut(0,0,0,0)}clone(){return new Ut(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const $=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=$)return!1;const nt=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>nt}const n=this.left,l=this.right,o=this.top,h=this.bottom;if(l<=n||h<=o)return!1;const c=Go[0].set(t.left,t.top),p=Go[1].set(t.left,t.bottom),m=Go[2].set(t.right,t.top),g=Go[3].set(t.right,t.bottom);if(m.x<=c.x||p.y<=c.y)return!1;const y=Math.sign(i.a*i.d-i.b*i.c);if(y===0||(i.apply(c,c),i.apply(p,p),i.apply(m,m),i.apply(g,g),Math.max(c.x,p.x,m.x,g.x)<=n||Math.min(c.x,p.x,m.x,g.x)>=l||Math.max(c.y,p.y,m.y,g.y)<=o||Math.min(c.y,p.y,m.y,g.y)>=h))return!1;const _=y*(p.y-c.y),x=y*(c.x-p.x),b=_*n+x*o,w=_*l+x*o,S=_*n+x*h,C=_*l+x*h;if(Math.max(b,w,S,C)<=_*c.x+x*c.y||Math.min(b,w,S,C)>=_*g.x+x*g.y)return!1;const U=y*(c.y-m.y),O=y*(m.x-c.x),P=U*n+O*o,B=U*l+O*o,j=U*n+O*h,D=U*l+O*h;return!(Math.max(P,B,j,D)<=U*c.x+O*c.y||Math.min(P,B,j,D)>=U*g.x+O*g.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),l=Math.max(this.y,t.y),o=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(n-i,0),this.y=l,this.height=Math.max(o-l,0),this}ceil(t=1,i=.001){const n=Math.ceil((this.x+this.width-i)*t)/t,l=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=n-this.x,this.height=l-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),l=Math.min(this.y,t.y),o=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=n-i,this.y=l,this.height=o-l,this}}Ut.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Du{constructor(t=0,i=0,n=0){this.x=t,this.y=i,this.radius=n,this.type=Ge.CIRC}clone(){return new Du(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let l=this.x-t,o=this.y-i;return l*=l,o*=o,l+o<=n}getBounds(){return new Ut(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Du.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ou{constructor(t=0,i=0,n=0,l=0){this.x=t,this.y=i,this.width=n,this.height=l,this.type=Ge.ELIP}clone(){return new Ou(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,l=(i-this.y)/this.height;return n*=n,l*=l,n+l<=1}getBounds(){return new Ut(this.x-this.width,this.y-this.height,this.width,this.height)}}Ou.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class $n{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const n=[];for(let l=0,o=i.length;l<o;l++)n.push(i[l].x,i[l].y);i=n}this.points=i,this.type=Ge.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new $n(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let n=!1;const l=this.points.length/2;for(let o=0,h=l-1;o<l;h=o++){const c=this.points[o*2],p=this.points[o*2+1],m=this.points[h*2],g=this.points[h*2+1];p>i!=g>i&&t<(m-c)*((i-p)/(g-p))+c&&(n=!n)}return n}}$n.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((s,t)=>`${s}, ${t}`,"")}]`};class Bu{constructor(t=0,i=0,n=0,l=0,o=20){this.x=t,this.y=i,this.width=n,this.height=l,this.radius=o,this.type=Ge.RREC}clone(){return new Bu(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let l=t-(this.x+n),o=i-(this.y+n);const h=n*n;if(l*l+o*o<=h||(l=t-(this.x+this.width-n),l*l+o*o<=h)||(o=i-(this.y+this.height-n),l*l+o*o<=h)||(l=t-(this.x+n),l*l+o*o<=h))return!0}return!1}}Bu.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class ae{constructor(t=1,i=0,n=0,l=1,o=0,h=0){this.array=null,this.a=t,this.b=i,this.c=n,this.d=l,this.tx=o,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,n,l,o,h){return this.a=t,this.b=i,this.c=n,this.d=l,this.tx=o,this.ty=h,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,i){i=i||new Vt;const n=t.x,l=t.y;return i.x=this.a*n+this.c*l+this.tx,i.y=this.b*n+this.d*l+this.ty,i}applyInverse(t,i){i=i||new Vt;const n=1/(this.a*this.d+this.c*-this.b),l=t.x,o=t.y;return i.x=this.d*n*l+-this.c*n*o+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*o+-this.b*n*l+(-this.ty*this.a+this.tx*this.b)*n,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),l=this.a,o=this.c,h=this.tx;return this.a=l*i-this.b*n,this.b=l*n+this.b*i,this.c=o*i-this.d*n,this.d=o*n+this.d*i,this.tx=h*i-this.ty*n,this.ty=h*n+this.ty*i,this}append(t){const i=this.a,n=this.b,l=this.c,o=this.d;return this.a=t.a*i+t.b*l,this.b=t.a*n+t.b*o,this.c=t.c*i+t.d*l,this.d=t.c*n+t.d*o,this.tx=t.tx*i+t.ty*l+this.tx,this.ty=t.tx*n+t.ty*o+this.ty,this}setTransform(t,i,n,l,o,h,c,p,m){return this.a=Math.cos(c+m)*o,this.b=Math.sin(c+m)*o,this.c=-Math.sin(c-p)*h,this.d=Math.cos(c-p)*h,this.tx=t-(n*this.a+l*this.c),this.ty=i-(n*this.b+l*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,l=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=l*t.a+this.d*t.c,this.d=l*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,n=this.b,l=this.c,o=this.d,h=t.pivot,c=-Math.atan2(-l,o),p=Math.atan2(n,i),m=Math.abs(c+p);return m<1e-5||Math.abs(mu-m)<1e-5?(t.rotation=p,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=p),t.scale.x=Math.sqrt(i*i+n*n),t.scale.y=Math.sqrt(l*l+o*o),t.position.x=this.tx+(h.x*i+h.y*l),t.position.y=this.ty+(h.x*n+h.y*o),t}invert(){const t=this.a,i=this.b,n=this.c,l=this.d,o=this.tx,h=t*l-i*n;return this.a=l/h,this.b=-i/h,this.c=-n/h,this.d=t/h,this.tx=(n*this.ty-l*o)/h,this.ty=-(t*this.ty-i*o)/h,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new ae;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}static get IDENTITY(){return new ae}static get TEMP_MATRIX(){return new ae}}ae.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const Hn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],kn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Xn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Md=[],G_=[],zo=Math.sign;function zT(){for(let s=0;s<16;s++){const t=[];Md.push(t);for(let i=0;i<16;i++){const n=zo(Hn[s]*Hn[i]+Xn[s]*kn[i]),l=zo(kn[s]*Hn[i]+Vn[s]*kn[i]),o=zo(Hn[s]*Xn[i]+Xn[s]*Vn[i]),h=zo(kn[s]*Xn[i]+Vn[s]*Vn[i]);for(let c=0;c<16;c++)if(Hn[c]===n&&kn[c]===l&&Xn[c]===o&&Vn[c]===h){t.push(c);break}}}for(let s=0;s<16;s++){const t=new ae;t.set(Hn[s],kn[s],Xn[s],Vn[s],0,0),G_.push(t)}}zT();const he={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:s=>Hn[s],uY:s=>kn[s],vX:s=>Xn[s],vY:s=>Vn[s],inv:s=>s&8?s&15:-s&7,add:(s,t)=>Md[s][t],sub:(s,t)=>Md[s][he.inv(t)],rotate180:s=>s^4,isVertical:s=>(s&3)===2,byDirection:(s,t)=>Math.abs(s)*2<=Math.abs(t)?t>=0?he.S:he.N:Math.abs(t)*2<=Math.abs(s)?s>0?he.E:he.W:t>0?s>0?he.SE:he.SW:s>0?he.NE:he.NW,matrixAppendRotationInv:(s,t,i=0,n=0)=>{const l=G_[he.inv(t)];l.tx=i,l.ty=n,s.append(l)}};class Rr{constructor(t,i,n=0,l=0){this._x=n,this._y=l,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new Rr(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}Rr.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const Dd=class{constructor(){this.worldTransform=new ae,this.localTransform=new ae,this.position=new Rr(this.onChange,this,0,0),this.scale=new Rr(this.onChange,this,1,1),this.pivot=new Rr(this.onChange,this,0,0),this.skew=new Rr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const s=this.localTransform;this._localID!==this._currentLocalID&&(s.a=this._cx*this.scale.x,s.b=this._sx*this.scale.x,s.c=this._cy*this.scale.y,s.d=this._sy*this.scale.y,s.tx=this.position.x-(this.pivot.x*s.a+this.pivot.y*s.c),s.ty=this.position.y-(this.pivot.x*s.b+this.pivot.y*s.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(s){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==s._worldID){const i=s.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=s._worldID,this._worldID++}}setFromMatrix(s){s.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(s){this._rotation!==s&&(this._rotation=s,this.updateSkew())}};Dd.IDENTITY=new Dd;let op=Dd;op.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var HT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,kT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function F0(s,t,i){const n=s.createShader(t);return s.shaderSource(n,i),s.compileShader(n),n}function sd(s){const t=new Array(s);for(let i=0;i<t.length;i++)t[i]=!1;return t}function z_(s,t){switch(s){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return sd(2*t);case"bvec3":return sd(3*t);case"bvec4":return sd(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Qs=[{test:s=>s.type==="float"&&s.size===1&&!s.isArray,code:s=>`
            if(uv["${s}"] !== ud["${s}"].value)
            {
                ud["${s}"].value = uv["${s}"]
                gl.uniform1f(ud["${s}"].location, uv["${s}"])
            }
            `},{test:(s,t)=>(s.type==="sampler2D"||s.type==="samplerCube"||s.type==="sampler2DArray")&&s.size===1&&!s.isArray&&(t==null||t.castToBaseTexture!==void 0),code:s=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${s}"], t);

            if(ud["${s}"].value !== t)
            {
                ud["${s}"].value = t;
                gl.uniform1i(ud["${s}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(s,t)=>s.type==="mat3"&&s.size===1&&!s.isArray&&t.a!==void 0,code:s=>`
            gl.uniformMatrix3fv(ud["${s}"].location, false, uv["${s}"].toArray(true));
            `,codeUbo:s=>`
                var ${s}_matrix = uv.${s}.toArray(true);

                data[offset] = ${s}_matrix[0];
                data[offset+1] = ${s}_matrix[1];
                data[offset+2] = ${s}_matrix[2];
        
                data[offset + 4] = ${s}_matrix[3];
                data[offset + 5] = ${s}_matrix[4];
                data[offset + 6] = ${s}_matrix[5];
        
                data[offset + 8] = ${s}_matrix[6];
                data[offset + 9] = ${s}_matrix[7];
                data[offset + 10] = ${s}_matrix[8];
            `},{test:(s,t)=>s.type==="vec2"&&s.size===1&&!s.isArray&&t.x!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${s}"].location, v.x, v.y);
                }`,codeUbo:s=>`
                v = uv.${s};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:s=>s.type==="vec2"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${s}"].location, v[0], v[1]);
                }
            `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.width!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${s}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(s,t)=>s.type==="vec4"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${s}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(s,t)=>s.type==="vec3"&&s.size===1&&!s.isArray&&t.red!==void 0,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${s}"].location, v.red, v.green, v.blue)
                }`,codeUbo:s=>`
                    v = uv.${s};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:s=>s.type==="vec4"&&s.size===1&&!s.isArray,code:s=>`
                cv = ud["${s}"].value;
                v = uv["${s}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${s}"].location, v[0], v[1], v[2], v[3])
                }`}],XT={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},VT={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jT(s,t){const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const n in s.uniforms){const l=t[n];if(!l){s.uniforms[n]?.group===!0&&(s.uniforms[n].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${n}, '${n}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${n}, syncData);
                    `));continue}const o=s.uniforms[n];let h=!1;for(let c=0;c<Qs.length;c++)if(Qs[c].test(l,o)){i.push(Qs[c].code(n,o)),h=!0;break}if(!h){const c=(l.size===1&&!l.isArray?XT:VT)[l.type].replace("location",`ud["${n}"].location`);i.push(`
            cu = ud["${n}"];
            cv = cu.value;
            v = uv["${n}"];
            ${c};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const H_={};let Ho=H_;function qT(){if(Ho===H_||Ho?.isContextLost()){const s=gt.ADAPTER.createCanvas();let t;gt.PREFER_ENV>=Qn.WEBGL2&&(t=s.getContext("webgl2",{})),t||(t=s.getContext("webgl",{})||s.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),Ho=t}return Ho}let ko;function YT(){if(!ko){ko=Si.MEDIUM;const s=qT();if(s&&s.getShaderPrecisionFormat){const t=s.getShaderPrecisionFormat(s.FRAGMENT_SHADER,s.HIGH_FLOAT);t&&(ko=t.precision?Si.HIGH:Si.MEDIUM)}}return ko}function G0(s,t){const i=s.getShaderSource(t).split(`
`).map((m,g)=>`${g}: ${m}`),n=s.getShaderInfoLog(t),l=n.split(`
`),o={},h=l.map(m=>parseFloat(m.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(m=>m&&!o[m]?(o[m]=!0,!0):!1),c=[""];h.forEach(m=>{i[m-1]=`%c${i[m-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const p=i.join(`
`);c[0]=p,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function $T(s,t,i,n){s.getProgramParameter(t,s.LINK_STATUS)||(s.getShaderParameter(i,s.COMPILE_STATUS)||G0(s,i),s.getShaderParameter(n,s.COMPILE_STATUS)||G0(s,n),console.error("PixiJS Error: Could not initialize shader."),s.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",s.getProgramInfoLog(t)))}const WT={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function k_(s){return WT[s]}let Xo=null;const z0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function X_(s,t){if(!Xo){const i=Object.keys(z0);Xo={};for(let n=0;n<i.length;++n){const l=i[n];Xo[s[l]]=z0[l]}}return Xo[t]}function H0(s,t,i){if(s.substring(0,9)!=="precision"){let n=t;return t===Si.HIGH&&i!==Si.HIGH&&(n=Si.MEDIUM),`precision ${n} float;
${s}`}else if(i!==Si.HIGH&&s.substring(0,15)==="precision highp")return s.replace("precision highp","precision mediump");return s}let rl;function ZT(){if(typeof rl=="boolean")return rl;try{rl=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{rl=!1}return rl}let KT=0;const Vo={},Od=class js{constructor(t,i,n="pixi-shader",l={}){this.extra={},this.id=KT++,this.vertexSrc=t||js.defaultVertexSrc,this.fragmentSrc=i||js.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=l,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),Vo[n]?(Vo[n]++,n+=`-${Vo[n]}`):Vo[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=H0(this.vertexSrc,js.defaultVertexPrecision,Si.HIGH),this.fragmentSrc=H0(this.fragmentSrc,js.defaultFragmentPrecision,YT())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return kT}static get defaultFragmentSrc(){return HT}static from(t,i,n){const l=t+i;let o=N0[l];return o||(N0[l]=o=new js(t,i,n)),o}};Od.defaultVertexPrecision=Si.HIGH,Od.defaultFragmentPrecision=Cr.apple.device?Si.HIGH:Si.MEDIUM;let Mr=Od,QT=0;class Li{constructor(t,i,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=QT++,this.static=!!i,this.ubo=!!n,t instanceof ve?(this.buffer=t,this.buffer.type=Ji.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new ve(new Float32Array(1)),this.buffer.type=Ji.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,n){if(!this.ubo)this.uniforms[t]=new Li(i,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,n){return new Li(t,i,n)}static uboFrom(t,i){return new Li(t,i??!0,!0)}}class tr{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof Li?this.uniformGroup=i:this.uniformGroup=new Li(i):this.uniformGroup=new Li({}),this.disposeRunner=new Ui("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const n in i.uniforms){const l=i.uniforms[n];if(l.group===!0&&this.checkUniformExists(t,l))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,n){const l=Mr.from(t,i);return new tr(l,n)}}class JT{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let o=0;o<t;o++)n[o]=o;this.defaultGroupCache[t]=Li.from({uSamplers:n},!0);let l=this.fragTemplate;l=l.replace(/%count%/gi,`${t}`),l=l.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Mr(this.vertexSrc,l)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new ae,default:this.defaultGroupCache[t]};return new tr(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let n=0;n<t;n++)n>0&&(i+=`
else `),n<t-1&&(i+=`if(vTextureId < ${n}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class Bd{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function tS(){return!Cr.apple.device}function eS(s){let t=!0;const i=gt.ADAPTER.getNavigator();if(Cr.tablet||Cr.phone){if(Cr.apple.device){const n=i.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Cr.android.device){const n=i.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?s:4}class Nu{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var iS=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,rS=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const ol=class Bi extends Nu{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=F_,this.vertexSize=6,this.state=ir.for2d(),this.size=Bi.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??eS(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??tS(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return zt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return rS}static get defaultFragmentTemplate(){return iS}setShaderGenerator({vertex:t=Bi.defaultVertexSrc,fragment:i=Bi.defaultFragmentTemplate}={}){this.shaderGenerator=new JT(t,i)}contextChange(){const t=this.renderer.gl;gt.PREFER_ENV===Qn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Bi.defaultMaxTextures),this.maxTextures=OT(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let i=0;i<this._packedGeometryPoolSize;i++)this._packedGeometries[i]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:i}=Bi,n=this.size/4,l=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new Rd);for(;i.length<l;)i.push(new Bd);for(let o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:i}=this,n=Bi._textureArrayPool,l=this.renderer.batch,o=this._tempBoundTextures,h=this.renderer.textureGC.count;let c=++It._globalBatch,p=0,m=n[0],g=0;l.copyBoundTextures(o,i);for(let y=0;y<this._bufferSize;++y){const _=t[y];t[y]=null,_._batchEnabled!==c&&(m.count>=i&&(l.boundArray(m,o,c,i),this.buildDrawCalls(m,g,y),g=y,m=n[++p],++c),_._batchEnabled=c,_.touched=h,m.elements[m.count++]=_)}m.count>0&&(l.boundArray(m,o,c,i),this.buildDrawCalls(m,g,this._bufferSize),++p,++c);for(let y=0;y<o.length;y++)o[y]=null;It._globalBatch=c}buildDrawCalls(t,i,n){const{_bufferedElements:l,_attributeBuffer:o,_indexBuffer:h,vertexSize:c}=this,p=Bi._drawCallPool;let m=this._dcIndex,g=this._aIndex,y=this._iIndex,_=p[m];_.start=this._iIndex,_.texArray=t;for(let x=i;x<n;++x){const b=l[x],w=b._texture.baseTexture,S=I_[w.alphaMode?1:0][b.blendMode];l[x]=null,i<x&&_.blend!==S&&(_.size=y-_.start,i=x,_=p[++m],_.texArray=t,_.start=y),this.packInterleavedGeometry(b,o,h,g,y),g+=b.vertexData.length/2*c,y+=b.indices.length,_.blend=S}i<n&&(_.size=y-_.start,++m),this._dcIndex=m,this._aIndex=g,this._iIndex=y}bindAndClearTexArray(t){const i=this.renderer.texture;for(let n=0;n<t.count;n++)i.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:i,_indexBuffer:n}=this;Bi.canUploadSameBuffer?(t[this._flushId]._buffer.update(i.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(i.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:i,state:n}=this.renderer,l=Bi._drawCallPool;let o=null;for(let h=0;h<t;h++){const{texArray:c,type:p,size:m,start:g,blend:y}=l[h];o!==c&&(o=c,this.bindAndClearTexArray(c)),this.state.blendMode=y,n.set(this.state),i.drawElements(p,m,i.UNSIGNED_SHORT,g*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Bi.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const i=du(Math.ceil(t/8)),n=O0(i),l=i*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._aBuffers[l];return o||(this._aBuffers[l]=o=new Ad(l*this.vertexSize*4)),o}getIndexBuffer(t){const i=du(Math.ceil(t/12)),n=O0(i),l=i*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let o=this._iBuffers[n];return o||(this._iBuffers[n]=o=new Uint16Array(l)),o}packInterleavedGeometry(t,i,n,l,o){const{uint32View:h,float32View:c}=i,p=l/this.vertexSize,m=t.uvs,g=t.indices,y=t.vertexData,_=t._texture.baseTexture._batchLocation,x=Math.min(t.worldAlpha,1),b=se.shared.setValue(t._tintRGB).toPremultiplied(x,t._texture.baseTexture.alphaMode>0);for(let w=0;w<y.length;w+=2)c[l++]=y[w],c[l++]=y[w+1],c[l++]=m[w],c[l++]=m[w+1],h[l++]=b,c[l++]=_;for(let w=0;w<g.length;w++)n[o++]=p+g[w]}};ol.defaultBatchSize=4096,ol.extension={name:"batch",type:dt.RendererPlugin},ol._drawCallPool=[],ol._textureArrayPool=[];let jn=ol;St.add(jn);var nS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,sS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Nd=class ul extends tr{constructor(t,i,n){const l=Mr.from(t||ul.defaultVertexSrc,i||ul.defaultFragmentSrc);super(l,n),this.padding=0,this.resolution=ul.defaultResolution,this.multisample=ul.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ir}apply(t,i,n,l,o){t.applyFilter(this,i,n,l)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return sS}static get defaultFragmentSrc(){return nS}};Nd.defaultResolution=1,Nd.defaultMultisample=Se.NONE;let je=Nd;class gu{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new se(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:n,backgroundAlpha:l}=t,o=n??i;o!==void 0&&(this.color=o),this.alpha=l}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}gu.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},gu.extension={type:[dt.RendererSystem,dt.CanvasRendererSystem],name:"background"};St.add(gu);class V_{constructor(t){this.renderer=t,this.emptyRenderer=new Nu(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:n}=this.renderer.texture;for(let l=i-1;l>=0;--l)t[l]=n[l]||null,t[l]&&(t[l]._batchLocation=l)}boundArray(t,i,n,l){const{elements:o,ids:h,count:c}=t;let p=0;for(let m=0;m<c;m++){const g=o[m],y=g._batchLocation;if(y>=0&&y<l&&i[y]===g){h[m]=y;continue}for(;p<l;){const _=i[p];if(_&&_._batchEnabled===n&&_._batchLocation===p){p++;continue}h[m]=p,g._batchLocation=p,i[p]=g;break}}}destroy(){this.renderer=null}}V_.extension={type:dt.RendererSystem,name:"batch"};St.add(V_);let k0=0;class yu{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=k0++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=k0++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let n;if(gt.PREFER_ENV>=Qn.WEBGL2&&(n=t.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const l=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=l,l||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}yu.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},yu.extension={type:dt.RendererSystem,name:"context"};St.add(yu);class Id{constructor(t,i){if(this.width=Math.round(t),this.height=Math.round(i),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ui("disposeFramebuffer"),this.multisample=Se.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new It(null,{scaleMode:wr.NEAREST,resolution:1,mipmap:er.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new It(null,{scaleMode:wr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:er.OFF,format:ht.DEPTH_COMPONENT,type:wt.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!t||!i)throw new Error("Framebuffer width and height must not be zero");if(!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const l=this.colorTextures[n],o=l.resolution;l.setSize(t/o,i/o)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,i/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class j_ extends It{constructor(t={}){if(typeof t=="number"){const i=arguments[0],n=arguments[1],l=arguments[2],o=arguments[3];t={width:i,height:n,scaleMode:l,resolution:o}}t.width=t.width??100,t.height=t.height??100,t.multisample??(t.multisample=Se.NONE),super(null,t),this.mipmap=er.OFF,this.valid=!0,this._clear=new se([0,0,0,0]),this.framebuffer=new Id(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Or extends gl{constructor(t){const i=t,n=i.naturalWidth||i.videoWidth||i.displayWidth||i.width,l=i.naturalHeight||i.videoHeight||i.displayHeight||i.height;super(n,l),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,n){n===void 0&&!i.startsWith("data:")?t.crossOrigin=RT(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,i,n,l){const o=t.gl,h=i.realWidth,c=i.realHeight;if(l=l||this.source,typeof HTMLImageElement<"u"&&l instanceof HTMLImageElement){if(!l.complete||l.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&l instanceof HTMLVideoElement&&l.readyState<=1)return!1;return o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===Je.UNPACK),!this.noSubImage&&i.target===o.TEXTURE_2D&&n.width===h&&n.height===c?o.texSubImage2D(o.TEXTURE_2D,0,0,0,i.format,n.type,l):(n.width=h,n.height=c,o.texImage2D(i.target,0,n.internalFormat,i.format,n.type,l)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),super.update()}dispose(){this.source=null}}class q_ extends Or{constructor(t,i){if(i=i||{},typeof t=="string"){const n=new Image;Or.crossOrigin(n,t,i.crossorigin),n.src=t,t=n}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??gt.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,n)=>{const l=this.source;this.url=l.src;const o=()=>{this.destroyed||(l.onload=null,l.onerror=null,this.update(),this._load=null,this.createBitmap?i(this.process()):i(this))};l.complete&&l.src?o():(l.onload=o,l.onerror=h=>{n(h),this.onError.emit(h)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(l=>l.blob()).then(l=>i(l,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Je.UNPACK?"premultiply":"none"})).then(l=>this.destroyed?Promise.reject():(this.bitmap=l,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,n,this.bitmap),!this.preserveBitmap){let l=!0;const o=i._glTextures;for(const h in o){const c=o[h];if(c!==n&&c.dirtyId!==i.dirtyId){l=!1;break}}l&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class up{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,n){const l=i.width,o=i.height;if(n){const h=t.width/2/l,c=t.height/2/o,p=t.x/l+h,m=t.y/o+c;n=he.add(n,he.NW),this.x0=p+h*he.uX(n),this.y0=m+c*he.uY(n),n=he.add(n,2),this.x1=p+h*he.uX(n),this.y1=m+c*he.uY(n),n=he.add(n,2),this.x2=p+h*he.uX(n),this.y2=m+c*he.uY(n),n=he.add(n,2),this.x3=p+h*he.uX(n),this.y3=m+c*he.uY(n)}else this.x0=t.x/l,this.y0=t.y/o,this.x1=(t.x+t.width)/l,this.y1=t.y/o,this.x2=(t.x+t.width)/l,this.y2=(t.y+t.height)/o,this.x3=t.x/l,this.y3=(t.y+t.height)/o;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}up.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const X0=new up;function jo(s){s.destroy=function(){},s.on=function(){},s.once=function(){},s.emit=function(){}}class Tt extends yl{constructor(t,i,n,l,o,h,c){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new Ut(0,0,1,1)),t instanceof Tt&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=l,this.valid=!1,this.destroyed=!1,this._uvs=X0,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(o||0),o===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=h?new Vt(h.x,h.y):new Vt(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i?.url&&Yi[i.url]&&Tt.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Tt.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new Tt(this.baseTexture,!this.noFrame&&t,i,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===X0&&(this._uvs=new up),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},n=gt.STRICT_TEXTURE_CACHE){const l=typeof t=="string";let o=null;if(l)o=t;else if(t instanceof It){if(!t.cacheId){const c=i?.pixiIdPrefix||"pixiid";t.cacheId=`${c}-${Zn()}`,It.addToCache(t,t.cacheId)}o=t.cacheId}else{if(!t._pixiId){const c=i?.pixiIdPrefix||"pixiid";t._pixiId=`${c}_${Zn()}`}o=t._pixiId}let h=Yi[o];if(l&&n&&!h)throw new Error(`The cacheId "${o}" does not exist in TextureCache.`);return!h&&!(t instanceof It)?(i.resolution||(i.resolution=Dr(t)),h=new Tt(new It(t,i)),h.baseTexture.cacheId=o,It.addToCache(h.baseTexture,o),Tt.addToCache(h,o)):!h&&t instanceof It&&(h=new Tt(t),Tt.addToCache(h,o)),h}static fromURL(t,i){const n=Object.assign({autoLoad:!1},i?.resourceOptions),l=Tt.from(t,Object.assign({resourceOptions:n},i),!1),o=l.baseTexture.resource;return l.baseTexture.valid?Promise.resolve(l):o.load().then(()=>Promise.resolve(l))}static fromBuffer(t,i,n,l){return new Tt(It.fromBuffer(t,i,n,l))}static fromLoader(t,i,n,l){const o=new It(t,Object.assign({scaleMode:It.defaultOptions.scaleMode,resolution:Dr(i)},l)),{resource:h}=o;h instanceof q_&&(h.url=i);const c=new Tt(o);return n||(n=i),It.addToCache(c.baseTexture,n),Tt.addToCache(c,n),n!==i&&(It.addToCache(c.baseTexture,i),Tt.addToCache(c,i)),c.baseTexture.valid?Promise.resolve(c):new Promise(p=>{c.baseTexture.once("loaded",()=>p(c))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),Yi[i]&&Yi[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Yi[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=Yi[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete Yi[t],i}}else if(t?.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)Yi[t.textureCacheIds[i]]===t&&delete Yi[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:n,width:l,height:o}=t,h=i+l>this.baseTexture.width,c=n+o>this.baseTexture.height;if(h||c){const p=h&&c?"and":"or",m=`X: ${i} + ${l} = ${i+l} > ${this.baseTexture.width}`,g=`Y: ${n} + ${o} = ${n+o} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${m} ${p} ${g}`)}this.valid=l&&o&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Tt._EMPTY||(Tt._EMPTY=new Tt(new It),jo(Tt._EMPTY),jo(Tt._EMPTY.baseTexture)),Tt._EMPTY}static get WHITE(){if(!Tt._WHITE){const t=gt.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),Tt._WHITE=new Tt(It.from(t)),jo(Tt._WHITE),jo(Tt._WHITE.baseTexture)}return Tt._WHITE}}class Jn extends Tt{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,n=!0){const l=this.baseTexture.resolution,o=Math.round(t*l)/l,h=Math.round(i*l)/l;this.valid=o>0&&h>0,this._frame.width=this.orig.width=o,this._frame.height=this.orig.height=h,n&&this.baseTexture.resize(o,h),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new Jn(new j_(t))}}class Y_{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,n=Se.NONE){const l=new j_(Object.assign({width:t,height:i,resolution:1,multisample:n},this.textureOptions));return new Jn(l)}getOptimalTexture(t,i,n=1,l=Se.NONE){let o;t=Math.max(Math.ceil(t*n-1e-6),1),i=Math.max(Math.ceil(i*n-1e-6),1),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=du(t),i=du(i),o=((t&65535)<<16|i&65535)>>>0,l>1&&(o+=l*4294967296)):o=l>1?-l:-1,this.texturePool[o]||(this.texturePool[o]=[]);let h=this.texturePool[o].pop();return h||(h=this.createTexture(t,i,l)),h.filterPoolKey=o,h.setResolution(n),h}getFilterTexture(t,i,n){const l=this.getOptimalTexture(t.width,t.height,i||t.resolution,n||Se.NONE);return l.filterFrame=t.filterFrame,l}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const n=this.texturePool[i];if(n)for(let l=0;l<n.length;l++)n[l].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const n=this.texturePool[i];if(n)for(let l=0;l<n.length;l++)n[l].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}Y_.SCREEN_KEY=-1;class aS extends mn{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class $_ extends mn{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new ve(this.vertices),this.uvBuffer=new ve(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let n=0,l=0;return this.uvs[0]=n,this.uvs[1]=l,this.uvs[2]=n+i.width/t.width,this.uvs[3]=l,this.uvs[4]=n+i.width/t.width,this.uvs[5]=l+i.height/t.height,this.uvs[6]=n,this.uvs[7]=l+i.height/t.height,n=i.x,l=i.y,this.vertices[0]=n,this.vertices[1]=l,this.vertices[2]=n+i.width,this.vertices[3]=l,this.vertices[4]=n+i.width,this.vertices[5]=l+i.height,this.vertices[6]=n,this.vertices[7]=l+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class lS{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Se.NONE,this.sourceFrame=new Ut,this.destinationFrame=new Ut,this.bindingSourceFrame=new Ut,this.bindingDestinationFrame=new Ut,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const qo=[new Vt,new Vt,new Vt,new Vt],ad=new ae;class W_{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Y_,this.statePool=[],this.quad=new aS,this.quadUv=new $_,this.tempRect=new Ut,this.activeState={},this.globalUniforms=new Li({outputFrame:new Ut,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const n=this.renderer,l=this.defaultFilterStack,o=this.statePool.pop()||new lS,h=n.renderTexture;let c,p;if(h.current){const S=h.current;c=S.resolution,p=S.multisample}else c=n.resolution,p=n.multisample;let m=i[0].resolution||c,g=i[0].multisample??p,y=i[0].padding,_=i[0].autoFit,x=i[0].legacy??!0;for(let S=1;S<i.length;S++){const C=i[S];m=Math.min(m,C.resolution||c),g=Math.min(g,C.multisample??p),y=this.useMaxPadding?Math.max(y,C.padding):y+C.padding,_=_&&C.autoFit,x=x||(C.legacy??!0)}l.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),l.push(o),o.resolution=m,o.multisample=g,o.legacy=x,o.target=t,o.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),o.sourceFrame.pad(y);const b=this.tempRect.copyFrom(h.sourceFrame);n.projection.transform&&this.transformAABB(ad.copyFrom(n.projection.transform).invert(),b),_?(o.sourceFrame.fit(b),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(b)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,h.current?h.current.resolution:n.resolution,h.sourceFrame,h.destinationFrame,n.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,m,g),o.filters=i,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;const w=this.tempRect;w.x=0,w.y=0,w.width=o.sourceFrame.width,w.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(h.sourceFrame),o.bindingDestinationFrame.copyFrom(h.destinationFrame),o.transform=n.projection.transform,n.projection.transform=null,h.bind(o.renderTexture,o.sourceFrame,w),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),n=i.filters;this.activeState=i;const l=this.globalUniforms.uniforms;l.outputFrame=i.sourceFrame,l.resolution=i.resolution;const o=l.inputSize,h=l.inputPixel,c=l.inputClamp;if(o[0]=i.destinationFrame.width,o[1]=i.destinationFrame.height,o[2]=1/o[0],o[3]=1/o[1],h[0]=Math.round(o[0]*i.resolution),h[1]=Math.round(o[1]*i.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=i.sourceFrame.width*o[2]-.5*h[2],c[3]=i.sourceFrame.height*o[3]-.5*h[3],i.legacy){const m=l.filterArea;m[0]=i.destinationFrame.width,m[1]=i.destinationFrame.height,m[2]=i.sourceFrame.x,m[3]=i.sourceFrame.y,l.filterClamp=l.inputClamp}this.globalUniforms.update();const p=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,p.renderTexture,Ki.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let m=i.renderTexture,g=this.getOptimalFilterTexture(m.width,m.height,i.resolution);g.filterFrame=m.filterFrame;let y=0;for(y=0;y<n.length-1;++y){y===1&&i.multisample>1&&(g=this.getOptimalFilterTexture(m.width,m.height,i.resolution),g.filterFrame=m.filterFrame),n[y].apply(this,m,g,Ki.CLEAR,i);const _=m;m=g,g=_}n[y].apply(this,m,p.renderTexture,Ki.BLEND,i),y>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(m),this.returnFilterTexture(g)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=Ki.CLEAR){const{renderTexture:n,state:l}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const h=this.tempRect;h.x=0,h.y=0,h.width=t.filterFrame.width,h.height=t.filterFrame.height,n.bind(t,t.filterFrame,h)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const o=l.stateId&1||this.forceClear;(i===Ki.CLEAR||i===Ki.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,n,l){const o=this.renderer;o.state.set(t.state),this.bindAndClear(n,l),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,o.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),o.geometry.bind(this.quadUv),o.geometry.draw(Qi.TRIANGLES)):(o.geometry.bind(this.quad),o.geometry.draw(Qi.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:n,destinationFrame:l}=this.activeState,{orig:o}=i._texture,h=t.set(l.width,0,0,l.height,n.x,n.y),c=i.worldTransform.copyTo(ae.TEMP_MATRIX);return c.invert(),h.prepend(c),h.scale(1/o.width,1/o.height),h.translate(i.anchor.x,i.anchor.y),h}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,n=1,l=Se.NONE){return this.texturePool.getOptimalTexture(t,i,n,l)}getFilterTexture(t,i,n){if(typeof t=="number"){const o=t;t=i,i=o}t=t||this.activeState.renderTexture;const l=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,n||Se.NONE);return l.filterFrame=t.filterFrame,l}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const n=qo[0],l=qo[1],o=qo[2],h=qo[3];n.set(i.left,i.top),l.set(i.left,i.bottom),o.set(i.right,i.top),h.set(i.right,i.bottom),t.apply(n,n),t.apply(l,l),t.apply(o,o),t.apply(h,h);const c=Math.min(n.x,l.x,o.x,h.x),p=Math.min(n.y,l.y,o.y,h.y),m=Math.max(n.x,l.x,o.x,h.x),g=Math.max(n.y,l.y,o.y,h.y);i.x=c,i.y=p,i.width=m-c,i.height=g-p}roundFrame(t,i,n,l,o){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(o){const{a:h,b:c,c:p,d:m}=o;if((Math.abs(c)>1e-4||Math.abs(p)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(m)>1e-4))return}o=o?ad.copyFrom(o):ad.identity(),o.translate(-n.x,-n.y).scale(l.width/n.width,l.height/n.height).translate(l.x,l.y),this.transformAABB(o,t),t.ceil(i),this.transformAABB(o.invert(),t)}}}W_.extension={type:dt.RendererSystem,name:"filter"};St.add(W_);class oS{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Se.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const uS=new Ut;class Z_{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Id(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Ut,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;gt.PREFER_ENV===Qn.WEBGL_LEGACY&&(i=null,n=null),i?t.drawBuffers=l=>i.drawBuffersWEBGL(l):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,n=0){const{gl:l}=this;if(t){const o=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,l.bindFramebuffer(l.FRAMEBUFFER,o.framebuffer)),o.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,o.mipLevel=n),o.dirtyId!==t.dirtyId&&(o.dirtyId=t.dirtyId,o.dirtyFormat!==t.dirtyFormat?(o.dirtyFormat=t.dirtyFormat,o.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):o.dirtySize!==t.dirtySize&&(o.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let h=0;h<t.colorTextures.length;h++){const c=t.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const h=i.width>>n,c=i.height>>n,p=h/i.width;this.setViewport(i.x*p,i.y*p,h,c)}else{const h=t.width>>n,c=t.height>>n;this.setViewport(0,0,h,c)}}else this.current&&(this.current=null,l.bindFramebuffer(l.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,n,l){const o=this.viewport;t=Math.round(t),i=Math.round(i),n=Math.round(n),l=Math.round(l),(o.width!==n||o.height!==l||o.x!==t||o.y!==i)&&(o.x=t,o.y=i,o.width=n,o.height=l,this.gl.viewport(t,i,n,l))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,n,l,o=xd.COLOR|xd.DEPTH){const{gl:h}=this;h.clearColor(t,i,n,l),h.clear(o)}initFramebuffer(t){const{gl:i}=this,n=new oS(i.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID];if(n.stencil){i.bindRenderbuffer(i.RENDERBUFFER,n.stencil);let h;this.renderer.context.webGLVersion===1?h=i.DEPTH_STENCIL:t.depth&&t.stencil?h=i.DEPTH24_STENCIL8:t.depth?h=i.DEPTH_COMPONENT24:h=i.STENCIL_INDEX8,n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,h,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,h,t.width,t.height)}const l=t.colorTextures;let o=l.length;i.drawBuffers||(o=Math.min(o,1));for(let h=0;h<o;h++){const c=l[h],p=c.parentTextureArray||c;this.renderer.texture.bind(p,0),h===0&&n.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,p._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:n}=this,l=t.glFramebuffers[this.CONTEXT_UID],o=t.colorTextures;let h=o.length;n.drawBuffers||(h=Math.min(h,1)),l.multisample>1&&this.canMultisampleFramebuffer(t)?l.msaaBuffer=l.msaaBuffer||n.createRenderbuffer():l.msaaBuffer&&(n.deleteRenderbuffer(l.msaaBuffer),l.msaaBuffer=null,l.blitFramebuffer&&(l.blitFramebuffer.dispose(),l.blitFramebuffer=null));const c=[];for(let p=0;p<h;p++){const m=o[p],g=m.parentTextureArray||m;this.renderer.texture.bind(g,0),p===0&&l.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,l.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,l.multisample,g._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,l.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+p,m.target,g._glTextures[this.CONTEXT_UID].texture,i),c.push(n.COLOR_ATTACHMENT0+p))}if(c.length>1&&n.drawBuffers(c),t.depthTexture&&this.writeDepthTexture){const p=t.depthTexture;this.renderer.texture.bind(p,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,p._glTextures[this.CONTEXT_UID].texture,i)}if((t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)){l.stencil=l.stencil||n.createRenderbuffer();let p,m;this.renderer.context.webGLVersion===1?(p=n.DEPTH_STENCIL_ATTACHMENT,m=n.DEPTH_STENCIL):t.depth&&t.stencil?(p=n.DEPTH_STENCIL_ATTACHMENT,m=n.DEPTH24_STENCIL8):t.depth?(p=n.DEPTH_ATTACHMENT,m=n.DEPTH_COMPONENT24):(p=n.STENCIL_ATTACHMENT,m=n.STENCIL_INDEX8),n.bindRenderbuffer(n.RENDERBUFFER,l.stencil),l.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,l.multisample,m,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,m,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,p,n.RENDERBUFFER,l.stencil)}else l.stencil&&(n.deleteRenderbuffer(l.stencil),l.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let n=Se.NONE;if(t<=1||i===null)return n;for(let l=0;l<i.length;l++)if(i[l]<=t){n=i[l];break}return n===1&&(n=Se.NONE),n}blit(t,i,n){const{current:l,renderer:o,gl:h,CONTEXT_UID:c}=this;if(o.context.webGLVersion!==2||!l)return;const p=l.glFramebuffers[c];if(!p)return;if(!t){if(!p.msaaBuffer)return;const g=l.colorTextures[0];if(!g)return;p.blitFramebuffer||(p.blitFramebuffer=new Id(l.width,l.height),p.blitFramebuffer.addColorTexture(0,g)),t=p.blitFramebuffer,t.colorTextures[0]!==g&&(t.colorTextures[0]=g,t.dirtyId++,t.dirtyFormat++),(t.width!==l.width||t.height!==l.height)&&(t.width=l.width,t.height=l.height,t.dirtyId++,t.dirtySize++)}i||(i=uS,i.width=l.width,i.height=l.height),n||(n=i);const m=i.width===n.width&&i.height===n.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,p.framebuffer),h.blitFramebuffer(i.left,i.top,i.right,i.bottom,n.left,n.top,n.right,n.bottom,h.COLOR_BUFFER_BIT,m?h.NEAREST:h.LINEAR),h.bindFramebuffer(h.READ_FRAMEBUFFER,t.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(t,i){const n=t.glFramebuffers[this.CONTEXT_UID],l=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const o=this.managedFramebuffers.indexOf(t);o>=0&&this.managedFramebuffers.splice(o,1),t.disposeRunner.remove(this),i||(l.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&l.deleteRenderbuffer(n.msaaBuffer),n.stencil&&l.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<i.length;n++)this.disposeFramebuffer(i[n],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil&&t.stencil)return;t.stencil=!0;const n=t.width,l=t.height,o=this.gl,h=i.stencil=o.createRenderbuffer();o.bindRenderbuffer(o.RENDERBUFFER,h);let c,p;this.renderer.context.webGLVersion===1?(c=o.DEPTH_STENCIL_ATTACHMENT,p=o.DEPTH_STENCIL):t.depth?(c=o.DEPTH_STENCIL_ATTACHMENT,p=o.DEPTH24_STENCIL8):(c=o.STENCIL_ATTACHMENT,p=o.STENCIL_INDEX8),i.msaaBuffer?o.renderbufferStorageMultisample(o.RENDERBUFFER,i.multisample,p,n,l):o.renderbufferStorage(o.RENDERBUFFER,p,n,l),o.framebufferRenderbuffer(o.FRAMEBUFFER,c,o.RENDERBUFFER,h)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Ut}destroy(){this.renderer=null}}Z_.extension={type:dt.RendererSystem,name:"framebuffer"};St.add(Z_);const ld={5126:4,5123:2,5121:1};class K_{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;gt.PREFER_ENV===Qn.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=l=>n.bindVertexArrayOES(l),t.deleteVertexArray=l=>n.deleteVertexArrayOES(l)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(l,o)=>n.vertexAttribDivisorANGLE(l,o),t.drawElementsInstanced=(l,o,h,c,p)=>n.drawElementsInstancedANGLE(l,o,h,c,p),t.drawArraysInstanced=(l,o,h,c)=>n.drawArraysInstancedANGLE(l,o,h,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:n}=this;let l=t.glVertexArrayObjects[this.CONTEXT_UID],o=!1;l||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=l={},o=!0);const h=l[i.program.id]||this.initGeometryVao(t,i,o);this._activeGeometry=t,this._activeVao!==h&&(this._activeVao=h,this.hasVao?n.bindVertexArray(h):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const l=t.buffers[n];i.update(l)}}checkCompatibility(t,i){const n=t.attributes,l=i.attributeData;for(const o in l)if(!n[o])throw new Error(`shader and geometry incompatible, geometry missing the "${o}" attribute`)}getSignature(t,i){const n=t.attributes,l=i.attributeData,o=["g",t.id];for(const h in n)l[h]&&o.push(h,l[h].location);return o.join("-")}initGeometryVao(t,i,n=!0){const l=this.gl,o=this.CONTEXT_UID,h=this.renderer.buffer,c=i.program;c.glPrograms[o]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,c);const p=this.getSignature(t,c),m=t.glVertexArrayObjects[this.CONTEXT_UID];let g=m[p];if(g)return m[c.id]=g,g;const y=t.buffers,_=t.attributes,x={},b={};for(const w in y)x[w]=0,b[w]=0;for(const w in _)!_[w].size&&c.attributeData[w]?_[w].size=c.attributeData[w].size:_[w].size||console.warn(`PIXI Geometry attribute '${w}' size cannot be determined (likely the bound shader does not have the attribute)`),x[_[w].buffer]+=_[w].size*ld[_[w].type];for(const w in _){const S=_[w],C=S.size;S.stride===void 0&&(x[S.buffer]===C*ld[S.type]?S.stride=0:S.stride=x[S.buffer]),S.start===void 0&&(S.start=b[S.buffer],b[S.buffer]+=C*ld[S.type])}g=l.createVertexArray(),l.bindVertexArray(g);for(let w=0;w<y.length;w++){const S=y[w];h.bind(S),n&&S._glBuffers[o].refCount++}return this.activateVao(t,c),m[c.id]=g,m[p]=g,l.bindVertexArray(null),h.unbind(Ji.ARRAY_BUFFER),g}disposeGeometry(t,i){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],l=this.gl,o=t.buffers,h=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!n){if(h)for(let c=0;c<o.length;c++){const p=o[c]._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,p.refCount===0&&!i&&h.dispose(o[c],i))}if(!i){for(const c in n)if(c[0]==="g"){const p=n[c];this._activeVao===p&&this.unbind(),l.deleteVertexArray(p)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],t)}activateVao(t,i){const n=this.gl,l=this.CONTEXT_UID,o=this.renderer.buffer,h=t.buffers,c=t.attributes;t.indexBuffer&&o.bind(t.indexBuffer);let p=null;for(const m in c){const g=c[m],y=h[g.buffer],_=y._glBuffers[l];if(i.attributeData[m]){p!==_&&(o.bind(y),p=_);const x=i.attributeData[m].location;if(n.enableVertexAttribArray(x),n.vertexAttribPointer(x,g.size,g.type||n.FLOAT,g.normalized,g.stride,g.start),g.instance)if(this.hasInstance)n.vertexAttribDivisor(x,g.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,n,l){const{gl:o}=this,h=this._activeGeometry;if(h.indexBuffer){const c=h.indexBuffer.data.BYTES_PER_ELEMENT,p=c===2?o.UNSIGNED_SHORT:o.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?o.drawElementsInstanced(t,i||h.indexBuffer.data.length,p,(n||0)*c,l||1):o.drawElements(t,i||h.indexBuffer.data.length,p,(n||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?o.drawArraysInstanced(t,n,i||h.getSize(),l||1):o.drawArrays(t,n,i||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}K_.extension={type:dt.RendererSystem,name:"geometry"};St.add(K_);const V0=new ae;class Q_{constructor(t,i){this._texture=t,this.mapCoord=new ae,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const n=this.mapCoord;for(let l=0;l<t.length;l+=2){const o=t[l],h=t[l+1];i[l]=o*n.a+h*n.c+n.tx,i[l+1]=o*n.b+h*n.d+n.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const n=i._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const l=i.orig,o=i.trim;o&&(V0.set(l.width/o.width,0,0,l.height/o.height,-o.x/o.width,-o.y/o.height),this.mapCoord.append(V0));const h=i.baseTexture,c=this.uClampFrame,p=this.clampMargin/h.resolution,m=this.clampOffset;return c[0]=(i._frame.x+p+m)/h.width,c[1]=(i._frame.y+p+m)/h.height,c[2]=(i._frame.x+i._frame.width-p+m)/h.width,c[3]=(i._frame.y+i._frame.height-p+m)/h.height,this.uClampOffset[0]=m/h.realWidth,this.uClampOffset[1]=m/h.realHeight,this.isSimple=i._frame.width===h.width&&i._frame.height===h.height&&i.rotate===0,!0}}var hS=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,cS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class fS extends je{constructor(t,i,n){let l=null;typeof t!="string"&&i===void 0&&n===void 0&&(l=t,t=void 0,i=void 0,n=void 0),super(t||cS,i||hS,n),this.maskSprite=l,this.maskMatrix=new ae}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,n,l){const o=this._maskSprite,h=o._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new Q_(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,o).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=o.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,t.applyFilter(this,i,n,l))}}class dS{constructor(t=null){this.type=we.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=je.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=we.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class J_{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let n=i;if(!n.isMaskData){const o=this.maskDataPool.pop()||new dS;o.pooled=!0,o.maskObject=i,n=o}const l=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(l),n._colorMask=l?l._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==we.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case we.SCISSOR:this.renderer.scissor.push(n);break;case we.STENCIL:this.renderer.stencil.push(n);break;case we.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case we.COLOR:this.pushColorMask(n);break}n.type===we.SPRITE&&this.maskStack.push(n)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case we.SCISSOR:this.renderer.scissor.pop(i);break;case we.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case we.SPRITE:this.popSpriteMask(i);break;case we.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===we.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=we.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=we.SCISSOR:t.type=we.STENCIL:t.type=we.COLOR}pushSpriteMask(t){const{maskObject:i}=t,n=t._target;let l=t._filters;l||(l=this.alphaMaskPool[this.alphaMaskIndex],l||(l=this.alphaMaskPool[this.alphaMaskIndex]=[new fS])),l[0].resolution=t.resolution,l[0].multisample=t.multisample,l[0].maskSprite=i;const o=n.filterArea;n.filterArea=i.getBounds(!0),this.renderer.filter.push(n,l),n.filterArea=o,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,n=t._colorMask=i&t.colorMask;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const i=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}J_.extension={type:dt.RendererSystem,name:"mask"};St.add(J_);class tx{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,n=this.getStackLength();this.maskStack=t;const l=this.getStackLength();l!==n&&(l===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const j0=new ae,q0=[],ex=class su extends tx{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const i=t._scissorRect,{maskObject:n}=t,{renderer:l}=this,o=l.renderTexture,h=n.getBounds(!0,q0.pop()??new Ut);this.roundFrameToPixels(h,o.current?o.current.resolution:l.resolution,o.sourceFrame,o.destinationFrame,l.projection.transform),i&&h.fit(i),t._scissorRectLocal=h}static isMatrixRotated(t){if(!t)return!1;const{a:i,b:n,c:l,d:o}=t;return(Math.abs(n)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(i)>1e-4||Math.abs(o)>1e-4)}testScissor(t){const{maskObject:i}=t;if(!i.isFastRect||!i.isFastRect()||su.isMatrixRotated(i.worldTransform)||su.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,i,n,l,o){su.isMatrixRotated(o)||(o=o?j0.copyFrom(o):j0.identity(),o.translate(-n.x,-n.y).scale(l.width/n.width,l.height/n.height).translate(l.x,l.y),this.renderer.filter.transformAABB(o,t),t.fit(l),t.x=Math.round(t.x*i),t.y=Math.round(t.y*i),t.width=Math.round(t.width*i),t.height=Math.round(t.height*i))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:i}=this.renderer;t._scissorRect||i.enable(i.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:i}=this.renderer;t&&q0.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():i.disable(i.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let i;this.renderer.renderTexture.current?i=t.y:i=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,i,t.width,t.height)}};ex.extension={type:dt.RendererSystem,name:"scissor"};let pS=ex;St.add(pS);class ix extends tx{constructor(t){super(t),this.glConst=gt.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:n}=this.renderer,l=t._stencilCounter;l===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const o=t._colorMask;o!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,l,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,o!==0&&(t._colorMask=o,n.colorMask((o&1)!==0,(o&2)!==0,(o&4)!==0,(o&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,l=n?n._colorMask:15;l!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,l!==0&&(n._colorMask=l,i.colorMask((l&1)!==0,(l&2)!==0,(l&4)!==0,(l&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}ix.extension={type:dt.RendererSystem,name:"stencil"};St.add(ix);class rx{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return zt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}rx.extension={type:[dt.RendererSystem,dt.CanvasRendererSystem],name:"_plugin"};St.add(rx);class nx{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new ae,this.transform=null}update(t,i,n,l){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,l),this.transform&&this.projectionMatrix.append(this.transform);const o=this.renderer;o.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,o.globalUniforms.update(),o.shader.shader&&o.shader.syncUniformGroup(o.shader.shader.uniforms.globals)}calculateProjection(t,i,n,l){const o=this.projectionMatrix,h=l?-1:1;o.identity(),o.a=1/i.width*2,o.d=h*(1/i.height*2),o.tx=-1-i.x*o.a,o.ty=-h-i.y*o.d}setTransform(t){}destroy(){this.renderer=null}}nx.extension={type:dt.RendererSystem,name:"projection"};St.add(nx);const mS=new op,Y0=new Ut;class sx{constructor(t){this.renderer=t,this._tempMatrix=new ae}generateTexture(t,i){const{region:n,...l}=i||{},o=n?.copyTo(Y0)||t.getLocalBounds(Y0,!0),h=l.resolution||this.renderer.resolution;o.width=Math.max(o.width,1/h),o.height=Math.max(o.height,1/h),l.width=o.width,l.height=o.height,l.resolution=h,l.multisample??(l.multisample=this.renderer.multisample);const c=Jn.create(l);this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;const p=t.transform;return t.transform=mS,this.renderer.render(t,{renderTexture:c,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=p,c}destroy(){}}sx.extension={type:[dt.RendererSystem,dt.CanvasRendererSystem],name:"textureGenerator"};St.add(sx);const Gn=new Ut,nl=new Ut;class ax{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Ut,this.destinationFrame=new Ut,this.viewportFrame=new Ut}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}bind(t=null,i,n){const l=this.renderer;this.current=t;let o,h,c;t?(o=t.baseTexture,c=o.resolution,i||(Gn.width=t.frame.width,Gn.height=t.frame.height,i=Gn),n||(nl.x=t.frame.x,nl.y=t.frame.y,nl.width=i.width,nl.height=i.height,n=nl),h=o.framebuffer):(c=l.resolution,i||(Gn.width=l._view.screen.width,Gn.height=l._view.screen.height,i=Gn),n||(n=Gn,n.width=i.width,n.height=i.height));const p=this.viewportFrame;p.x=n.x*c,p.y=n.y*c,p.width=n.width*c,p.height=n.height*c,t||(p.y=l.view.height-(p.y+p.height)),p.ceil(),this.renderer.framebuffer.bind(h,p),this.renderer.projection.update(n,i,c,!h),t?this.renderer.mask.setMaskStack(o.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)}clear(t,i){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,l=se.shared.setValue(t||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&l.premultiply(l.alpha);const o=this.destinationFrame,h=this.current?this.current.baseTexture:this.renderer._view.screen,c=o.width!==h.width||o.height!==h.height;if(c){let{x:p,y:m,width:g,height:y}=this.viewportFrame;p=Math.round(p),m=Math.round(m),g=Math.round(g),y=Math.round(y),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(p,m,g,y)}this.renderer.framebuffer.clear(l.red,l.green,l.blue,l.alpha,i),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}ax.extension={type:dt.RendererSystem,name:"renderTexture"};St.add(ax);class gS{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function yS(s,t){const i={},n=t.getProgramParameter(s,t.ACTIVE_ATTRIBUTES);for(let l=0;l<n;l++){const o=t.getActiveAttrib(s,l);if(o.name.startsWith("gl_"))continue;const h=X_(t,o.type),c={type:h,name:o.name,size:k_(h),location:t.getAttribLocation(s,o.name)};i[o.name]=c}return i}function vS(s,t){const i={},n=t.getProgramParameter(s,t.ACTIVE_UNIFORMS);for(let l=0;l<n;l++){const o=t.getActiveUniform(s,l),h=o.name.replace(/\[.*?\]$/,""),c=!!o.name.match(/\[.*?\]$/),p=X_(t,o.type);i[h]={name:h,index:l,type:p,size:o.size,isArray:c,value:z_(p,o.size)}}return i}function _S(s,t){const i=F0(s,s.VERTEX_SHADER,t.vertexSrc),n=F0(s,s.FRAGMENT_SHADER,t.fragmentSrc),l=s.createProgram();s.attachShader(l,i),s.attachShader(l,n);const o=t.extra?.transformFeedbackVaryings;if(o&&(typeof s.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):s.transformFeedbackVaryings(l,o.names,o.bufferMode==="separate"?s.SEPARATE_ATTRIBS:s.INTERLEAVED_ATTRIBS)),s.linkProgram(l),s.getProgramParameter(l,s.LINK_STATUS)||$T(s,l,i,n),t.attributeData=yS(l,s),t.uniformData=vS(l,s),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const c=Object.keys(t.attributeData);c.sort((p,m)=>p>m?1:-1);for(let p=0;p<c.length;p++)t.attributeData[c[p]].location=p,s.bindAttribLocation(l,p,c[p]);s.linkProgram(l)}s.deleteShader(i),s.deleteShader(n);const h={};for(const c in t.uniformData){const p=t.uniformData[c];h[c]={location:s.getUniformLocation(l,c),value:z_(p.type,p.size)}}return new gS(l,h)}function xS(s,t,i,n,l){i.buffer.update(l)}const bS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},lx={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function ES(s){const t=s.map(o=>({data:o,offset:0,dataLen:0,dirty:0}));let i=0,n=0,l=0;for(let o=0;o<t.length;o++){const h=t[o];if(i=lx[h.data.type],h.data.size>1&&(i=Math.max(i,16)*h.data.size),h.dataLen=i,n%i!==0&&n<16){const c=n%i%16;n+=c,l+=c}n+i>16?(l=Math.ceil(l/16)*16,h.offset=l,l+=i,n=i):(h.offset=l,n+=i,l+=i)}return l=Math.ceil(l/16)*16,{uboElements:t,size:l}}function TS(s,t){const i=[];for(const n in s)t[n]&&i.push(t[n]);return i.sort((n,l)=>n.index-l.index),i}function SS(s,t){if(!s.autoManage)return{size:0,syncFunc:xS};const i=TS(s.uniforms,t),{uboElements:n,size:l}=ES(i),o=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let h=0;h<n.length;h++){const c=n[h],p=s.uniforms[c.data.name],m=c.data.name;let g=!1;for(let y=0;y<Qs.length;y++){const _=Qs[y];if(_.codeUbo&&_.test(c.data,p)){o.push(`offset = ${c.offset/4};`,Qs[y].codeUbo(c.data.name,p)),g=!0;break}}if(!g)if(c.data.size>1){const y=k_(c.data.type),_=Math.max(lx[c.data.type]/16,1),x=y/_,b=(4-x%4)%4;o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};

                t = 0;

                for(var i=0; i < ${c.data.size*_}; i++)
                {
                    for(var j = 0; j < ${x}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${b};
                }

                `)}else{const y=bS[c.data.type];o.push(`
                cv = ud.${m}.value;
                v = uv.${m};
                offset = ${c.offset/4};
                ${y};
                `)}}return o.push(`
       renderer.buffer.update(buffer);
    `),{size:l,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join(`
`))}}let AS=0;const Yo={textureCount:0,uboCount:0};class ox{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=AS++}systemCheck(){if(!ZT())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,l=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(l.program)),i||(Yo.textureCount=0,Yo.uboCount=0,this.syncUniformGroup(t.uniformGroup,Yo)),l}setUniforms(t){const i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,i){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,i))}syncUniforms(t,i,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=jT(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const l=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,i);t.buffer.update(),l(n.uniformData,t.uniforms,this.renderer,Yo,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[i])}createSyncBufferGroup(t,i,n){const{gl:l}=this.renderer;this.renderer.buffer.bind(t.buffer);const o=this.gl.getUniformBlockIndex(i.program,n);i.uniformBufferBindings[n]=this.shader.uniformBindCount,l.uniformBlockBinding(i.program,o,this.shader.uniformBindCount),this.shader.uniformBindCount++;const h=this.getSignature(t,this.shader.program.uniformData,"ubo");let c=this._uboCache[h];if(c||(c=this._uboCache[h]=SS(t,this.shader.program.uniformData)),t.autoManage){const p=new Float32Array(c.size/4);t.buffer.update(p)}return i.uniformGroups[t.id]=c.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,n){const l=t.uniforms,o=[`${n}-`];for(const h in l)o.push(h),i[h]&&o.push(i[h].type);return o.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,n=t.program,l=_S(i,n);return n.glPrograms[this.renderer.CONTEXT_UID]=l,l}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ox.extension={type:dt.RendererSystem,name:"shader"};St.add(ox);class vu{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.4.3 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}vu.defaultOptions={hello:!1},vu.extension={type:[dt.RendererSystem,dt.CanvasRendererSystem],name:"startup"};St.add(vu);function wS(s,t=[]){return t[Mt.NORMAL]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.ADD]=[s.ONE,s.ONE],t[Mt.MULTIPLY]=[s.DST_COLOR,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.SCREEN]=[s.ONE,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.OVERLAY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.DARKEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.LIGHTEN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR_DODGE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR_BURN]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.HARD_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.SOFT_LIGHT]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.DIFFERENCE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.EXCLUSION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.HUE]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.SATURATION]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.COLOR]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.LUMINOSITY]=[s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.NONE]=[0,0],t[Mt.NORMAL_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_ALPHA,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.ADD_NPM]=[s.SRC_ALPHA,s.ONE,s.ONE,s.ONE],t[Mt.SCREEN_NPM]=[s.SRC_ALPHA,s.ONE_MINUS_SRC_COLOR,s.ONE,s.ONE_MINUS_SRC_ALPHA],t[Mt.SRC_IN]=[s.DST_ALPHA,s.ZERO],t[Mt.SRC_OUT]=[s.ONE_MINUS_DST_ALPHA,s.ZERO],t[Mt.SRC_ATOP]=[s.DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[Mt.DST_OVER]=[s.ONE_MINUS_DST_ALPHA,s.ONE],t[Mt.DST_IN]=[s.ZERO,s.SRC_ALPHA],t[Mt.DST_OUT]=[s.ZERO,s.ONE_MINUS_SRC_ALPHA],t[Mt.DST_ATOP]=[s.ONE_MINUS_DST_ALPHA,s.SRC_ALPHA],t[Mt.XOR]=[s.ONE_MINUS_DST_ALPHA,s.ONE_MINUS_SRC_ALPHA],t[Mt.SUBTRACT]=[s.ONE,s.ONE,s.ONE,s.ONE,s.FUNC_REVERSE_SUBTRACT,s.FUNC_ADD],t}const CS=0,RS=1,MS=2,DS=3,OS=4,BS=5,ux=class Ud{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Mt.NONE,this._blendEq=!1,this.map=[],this.map[CS]=this.setBlend,this.map[RS]=this.setOffset,this.map[MS]=this.setCullFace,this.map[DS]=this.setDepthTest,this.map[OS]=this.setFrontFace,this.map[BS]=this.setDepthMask,this.checks=[],this.defaultState=new ir,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=wS(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let i=this.stateId^t.data,n=0;for(;i;)i&1&&this.map[n].call(this,!!(t.data&1<<n)),i=i>>1,n++;this.stateId=t.data}for(let i=0;i<this.checks.length;i++)this.checks[i](this,t)}forceState(t){t=t||this.defaultState;for(let i=0;i<this.map.length;i++)this.map[i].call(this,!!(t.data&1<<i));for(let i=0;i<this.checks.length;i++)this.checks[i](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(Ud.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(Ud.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const i=this.blendModes[t],n=this.gl;i.length===2?n.blendFunc(i[0],i[1]):n.blendFuncSeparate(i[0],i[1],i[2],i[3]),i.length===6?(this._blendEq=!0,n.blendEquationSeparate(i[4],i[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,i){this.gl.polygonOffset(t,i)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,i){const n=this.checks.indexOf(t);i&&n===-1?this.checks.push(t):!i&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,i){t.setBlendMode(i.blendMode)}static checkPolygonOffset(t,i){t.setPolygonOffset(1,i.polygonOffset)}destroy(){this.gl=null}};ux.extension={type:dt.RendererSystem,name:"state"};let NS=ux;St.add(NS);class IS extends yl{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(l=>t.systems[l]),n=[...i,...Object.keys(t.systems).filter(l=>!i.includes(l))];for(const l of n)this.addSystem(t.systems[l],l)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ui(i)})}addSystem(t,i){const n=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const l in this.runners)this.runners[l].add(n);return this}emitWithCustomOptions(t,i){const n=Object.keys(this._systemsHash);t.items.forEach(l=>{const o=n.find(h=>this._systemsHash[h]===l);l[t.name](i[o])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const hl=class au{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=au.defaultMaxIdle,this.checkCountMax=au.defaultCheckCountMax,this.mode=au.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==np.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,i=t.managedTextures;let n=!1;for(let l=0;l<i.length;l++){const o=i[l];o.resource&&this.count-o.touched>this.maxIdle&&(t.destroyTexture(o,!0),i[l]=null,n=!0)}if(n){let l=0;for(let o=0;o<i.length;o++)i[o]!==null&&(i[l++]=i[o]);i.length=l}}unload(t){const i=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&i.destroyTexture(n);for(let l=t.children.length-1;l>=0;l--)this.unload(t.children[l])}destroy(){this.renderer=null}};hl.defaultMode=np.AUTO,hl.defaultMaxIdle=3600,hl.defaultCheckCountMax=600,hl.extension={type:dt.RendererSystem,name:"textureGC"};let qn=hl;St.add(qn);class od{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=wt.UNSIGNED_BYTE,this.internalFormat=ht.RGBA,this.samplerType=0}}function US(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[s.RGB]:mt.FLOAT,[s.RGBA]:mt.FLOAT,[s.ALPHA]:mt.FLOAT,[s.LUMINANCE]:mt.FLOAT,[s.LUMINANCE_ALPHA]:mt.FLOAT,[s.R8]:mt.FLOAT,[s.R8_SNORM]:mt.FLOAT,[s.RG8]:mt.FLOAT,[s.RG8_SNORM]:mt.FLOAT,[s.RGB8]:mt.FLOAT,[s.RGB8_SNORM]:mt.FLOAT,[s.RGB565]:mt.FLOAT,[s.RGBA4]:mt.FLOAT,[s.RGB5_A1]:mt.FLOAT,[s.RGBA8]:mt.FLOAT,[s.RGBA8_SNORM]:mt.FLOAT,[s.RGB10_A2]:mt.FLOAT,[s.RGB10_A2UI]:mt.FLOAT,[s.SRGB8]:mt.FLOAT,[s.SRGB8_ALPHA8]:mt.FLOAT,[s.R16F]:mt.FLOAT,[s.RG16F]:mt.FLOAT,[s.RGB16F]:mt.FLOAT,[s.RGBA16F]:mt.FLOAT,[s.R32F]:mt.FLOAT,[s.RG32F]:mt.FLOAT,[s.RGB32F]:mt.FLOAT,[s.RGBA32F]:mt.FLOAT,[s.R11F_G11F_B10F]:mt.FLOAT,[s.RGB9_E5]:mt.FLOAT,[s.R8I]:mt.INT,[s.R8UI]:mt.UINT,[s.R16I]:mt.INT,[s.R16UI]:mt.UINT,[s.R32I]:mt.INT,[s.R32UI]:mt.UINT,[s.RG8I]:mt.INT,[s.RG8UI]:mt.UINT,[s.RG16I]:mt.INT,[s.RG16UI]:mt.UINT,[s.RG32I]:mt.INT,[s.RG32UI]:mt.UINT,[s.RGB8I]:mt.INT,[s.RGB8UI]:mt.UINT,[s.RGB16I]:mt.INT,[s.RGB16UI]:mt.UINT,[s.RGB32I]:mt.INT,[s.RGB32UI]:mt.UINT,[s.RGBA8I]:mt.INT,[s.RGBA8UI]:mt.UINT,[s.RGBA16I]:mt.INT,[s.RGBA16UI]:mt.UINT,[s.RGBA32I]:mt.INT,[s.RGBA32UI]:mt.UINT,[s.DEPTH_COMPONENT16]:mt.FLOAT,[s.DEPTH_COMPONENT24]:mt.FLOAT,[s.DEPTH_COMPONENT32F]:mt.FLOAT,[s.DEPTH_STENCIL]:mt.FLOAT,[s.DEPTH24_STENCIL8]:mt.FLOAT,[s.DEPTH32F_STENCIL8]:mt.FLOAT}:t={[s.RGB]:mt.FLOAT,[s.RGBA]:mt.FLOAT,[s.ALPHA]:mt.FLOAT,[s.LUMINANCE]:mt.FLOAT,[s.LUMINANCE_ALPHA]:mt.FLOAT,[s.DEPTH_STENCIL]:mt.FLOAT},t}function LS(s){let t;return"WebGL2RenderingContext"in globalThis&&s instanceof globalThis.WebGL2RenderingContext?t={[wt.UNSIGNED_BYTE]:{[ht.RGBA]:s.RGBA8,[ht.RGB]:s.RGB8,[ht.RG]:s.RG8,[ht.RED]:s.R8,[ht.RGBA_INTEGER]:s.RGBA8UI,[ht.RGB_INTEGER]:s.RGB8UI,[ht.RG_INTEGER]:s.RG8UI,[ht.RED_INTEGER]:s.R8UI,[ht.ALPHA]:s.ALPHA,[ht.LUMINANCE]:s.LUMINANCE,[ht.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[wt.BYTE]:{[ht.RGBA]:s.RGBA8_SNORM,[ht.RGB]:s.RGB8_SNORM,[ht.RG]:s.RG8_SNORM,[ht.RED]:s.R8_SNORM,[ht.RGBA_INTEGER]:s.RGBA8I,[ht.RGB_INTEGER]:s.RGB8I,[ht.RG_INTEGER]:s.RG8I,[ht.RED_INTEGER]:s.R8I},[wt.UNSIGNED_SHORT]:{[ht.RGBA_INTEGER]:s.RGBA16UI,[ht.RGB_INTEGER]:s.RGB16UI,[ht.RG_INTEGER]:s.RG16UI,[ht.RED_INTEGER]:s.R16UI,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT16},[wt.SHORT]:{[ht.RGBA_INTEGER]:s.RGBA16I,[ht.RGB_INTEGER]:s.RGB16I,[ht.RG_INTEGER]:s.RG16I,[ht.RED_INTEGER]:s.R16I},[wt.UNSIGNED_INT]:{[ht.RGBA_INTEGER]:s.RGBA32UI,[ht.RGB_INTEGER]:s.RGB32UI,[ht.RG_INTEGER]:s.RG32UI,[ht.RED_INTEGER]:s.R32UI,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT24},[wt.INT]:{[ht.RGBA_INTEGER]:s.RGBA32I,[ht.RGB_INTEGER]:s.RGB32I,[ht.RG_INTEGER]:s.RG32I,[ht.RED_INTEGER]:s.R32I},[wt.FLOAT]:{[ht.RGBA]:s.RGBA32F,[ht.RGB]:s.RGB32F,[ht.RG]:s.RG32F,[ht.RED]:s.R32F,[ht.DEPTH_COMPONENT]:s.DEPTH_COMPONENT32F},[wt.HALF_FLOAT]:{[ht.RGBA]:s.RGBA16F,[ht.RGB]:s.RGB16F,[ht.RG]:s.RG16F,[ht.RED]:s.R16F},[wt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:s.RGB565},[wt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:s.RGBA4},[wt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:s.RGB5_A1},[wt.UNSIGNED_INT_2_10_10_10_REV]:{[ht.RGBA]:s.RGB10_A2,[ht.RGBA_INTEGER]:s.RGB10_A2UI},[wt.UNSIGNED_INT_10F_11F_11F_REV]:{[ht.RGB]:s.R11F_G11F_B10F},[wt.UNSIGNED_INT_5_9_9_9_REV]:{[ht.RGB]:s.RGB9_E5},[wt.UNSIGNED_INT_24_8]:{[ht.DEPTH_STENCIL]:s.DEPTH24_STENCIL8},[wt.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[ht.DEPTH_STENCIL]:s.DEPTH32F_STENCIL8}}:t={[wt.UNSIGNED_BYTE]:{[ht.RGBA]:s.RGBA,[ht.RGB]:s.RGB,[ht.ALPHA]:s.ALPHA,[ht.LUMINANCE]:s.LUMINANCE,[ht.LUMINANCE_ALPHA]:s.LUMINANCE_ALPHA},[wt.UNSIGNED_SHORT_5_6_5]:{[ht.RGB]:s.RGB},[wt.UNSIGNED_SHORT_4_4_4_4]:{[ht.RGBA]:s.RGBA},[wt.UNSIGNED_SHORT_5_5_5_1]:{[ht.RGBA]:s.RGBA}},t}class hx{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new It,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=LS(t),this.samplerTypes=US(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let l=0;l<i;l++)this.boundTextures[l]=null;this.emptyTextures={};const n=new od(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new od(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let l=0;l<6;l++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+l,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let l=0;l<this.boundTextures.length;l++)this.bind(null,l)}bind(t,i=0){const{gl:n}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const l=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(t.target,l.texture)),l.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(t)):l.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let l=0;l<n.length;l++)n[l]===this.unknownTexture&&this.bind(null,l)}for(let l=0;l<n.length;l++)n[l]===t&&(this.currentLocation!==l&&(i.activeTexture(i.TEXTURE0+l),this.currentLocation=l),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[l]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:n,CONTEXT_UID:l}=this;if(n)for(let o=t-1;o>=0;--o){const h=i[o];h&&h._glTextures[l].samplerType!==mt.FLOAT&&this.renderer.texture.unbind(h)}}initTexture(t){const i=new od(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){i.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,i.samplerType=this.samplerTypes[i.internalFormat]??mt.FLOAT,this.webGLVersion===2&&t.type===wt.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const n=this.renderer;if(this.initTextureType(t,i),t.resource?.upload(n,t,i))i.samplerType!==mt.FLOAT&&(this.hasIntegerTextures=!0);else{const l=t.realWidth,o=t.realHeight,h=n.gl;(i.width!==l||i.height!==o||i.dirtyId<0)&&(i.width=l,i.height=o,h.texImage2D(t.target,0,i.internalFormat,l,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const l=this.managedTextures.indexOf(t);l!==-1&&Ks(this.managedTextures,l,1)}}updateTextureStyle(t){const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===er.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=pn.CLAMP:i.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const n=this.gl;if(i.mipmap&&t.mipmap!==er.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===wr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const l=this.renderer.context.extensions.anisotropicFiltering;if(l&&t.anisotropicLevel>0&&t.scaleMode===wr.LINEAR){const o=Math.min(t.anisotropicLevel,n.getParameter(l.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,l.TEXTURE_MAX_ANISOTROPY_EXT,o)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===wr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===wr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}hx.extension={type:dt.RendererSystem,name:"texture"};St.add(hx);class cx{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,l)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:n,renderer:l}=this;i&&l.shader.bind(i),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:n,CONTEXT_UID:l}=this,o=i.createTransformFeedback();t._glTransformFeedbacks[l]=o,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,o);for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];c&&(n.buffer.update(c),c._glBuffers[l].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,h,c._glBuffers[l].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),o}disposeTransformFeedback(t,i){const n=t._glTransformFeedbacks[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this);const o=this.renderer.buffer;if(o)for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];if(!c)continue;const p=c._glBuffers[this.CONTEXT_UID];p&&(p.refCount--,p.refCount===0&&!i&&o.dispose(c,i))}n&&(i||l.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}cx.extension={type:dt.RendererSystem,name:"transformFeedback"};St.add(cx);class _u{constructor(t){this.renderer=t}init(t){this.screen=new Ut(0,0,t.width,t.height),this.element=t.view||gt.ADAPTER.createCanvas(),this.resolution=t.resolution||gt.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const n=this.element.width/this.resolution,l=this.element.height/this.resolution;this.screen.width=n,this.screen.height=l,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${l}px`),this.renderer.emit("resize",n,l),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}_u.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},_u.extension={type:[dt.RendererSystem,dt.CanvasRendererSystem],name:"_view"};St.add(_u);gt.PREFER_ENV=Qn.WEBGL2;gt.STRICT_TEXTURE_CACHE=!1;gt.RENDER_OPTIONS={...yu.defaultOptions,...gu.defaultOptions,..._u.defaultOptions,...vu.defaultOptions};Object.defineProperties(gt,{WRAP_MODE:{get(){return It.defaultOptions.wrapMode},set(s){zt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),It.defaultOptions.wrapMode=s}},SCALE_MODE:{get(){return It.defaultOptions.scaleMode},set(s){zt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),It.defaultOptions.scaleMode=s}},MIPMAP_TEXTURES:{get(){return It.defaultOptions.mipmap},set(s){zt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),It.defaultOptions.mipmap=s}},ANISOTROPIC_LEVEL:{get(){return It.defaultOptions.anisotropicLevel},set(s){zt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),It.defaultOptions.anisotropicLevel=s}},FILTER_RESOLUTION:{get(){return zt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),je.defaultResolution},set(s){je.defaultResolution=s}},FILTER_MULTISAMPLE:{get(){return zt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),je.defaultMultisample},set(s){je.defaultMultisample=s}},SPRITE_MAX_TEXTURES:{get(){return jn.defaultMaxTextures},set(s){zt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),jn.defaultMaxTextures=s}},SPRITE_BATCH_SIZE:{get(){return jn.defaultBatchSize},set(s){zt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),jn.defaultBatchSize=s}},CAN_UPLOAD_SAME_BUFFER:{get(){return jn.canUploadSameBuffer},set(s){zt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),jn.canUploadSameBuffer=s}},GC_MODE:{get(){return qn.defaultMode},set(s){zt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),qn.defaultMode=s}},GC_MAX_IDLE:{get(){return qn.defaultMaxIdle},set(s){zt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),qn.defaultMaxIdle=s}},GC_MAX_CHECK_COUNT:{get(){return qn.defaultCheckCountMax},set(s){zt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),qn.defaultCheckCountMax=s}},PRECISION_VERTEX:{get(){return Mr.defaultVertexPrecision},set(s){zt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Mr.defaultVertexPrecision=s}},PRECISION_FRAGMENT:{get(){return Mr.defaultFragmentPrecision},set(s){zt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Mr.defaultFragmentPrecision=s}}});var Kn=(s=>(s[s.INTERACTION=50]="INTERACTION",s[s.HIGH=25]="HIGH",s[s.NORMAL=0]="NORMAL",s[s.LOW=-25]="LOW",s[s.UTILITY=-50]="UTILITY",s))(Kn||{});class ud{constructor(t,i=null,n=0,l=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=n,this.once=l}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const fx=class ui{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new ud(null,null,1/0),this.deltaMS=1/ui.targetFPMS,this.elapsedMS=1/ui.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,i,n=Kn.NORMAL){return this._addListener(new ud(t,i,n))}addOnce(t,i,n=Kn.NORMAL){return this._addListener(new ud(t,i,n,!0))}_addListener(t){let i=this._head.next,n=this._head;if(!i)t.connect(n);else{for(;i;){if(t.priority>i.priority){t.connect(n);break}n=i,i=i.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,i){let n=this._head.next;for(;n;)n.match(t,i)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,i=this._head;for(;i=i.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let i;if(t>this.lastTime){if(i=this.elapsedMS=t-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const o=t-this._lastFrame|0;if(o<this._minElapsedMS)return;this._lastFrame=t-o%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*ui.targetFPMS;const n=this._head;let l=n.next;for(;l;)l=l.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const i=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,i)/1e3,ui.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const i=Math.max(this.minFPS,t);this._minElapsedMS=1/(i/1e3)}}static get shared(){if(!ui._shared){const t=ui._shared=new ui;t.autoStart=!0,t._protected=!0}return ui._shared}static get system(){if(!ui._system){const t=ui._system=new ui;t.autoStart=!0,t._protected=!0}return ui._system}};fx.targetFPMS=.06;let hi=fx;Object.defineProperties(gt,{TARGET_FPMS:{get(){return hi.targetFPMS},set(s){zt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),hi.targetFPMS=s}}});class dx{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Kn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?hi.shared:new hi,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}dx.extension=dt.Application;St.add(dx);const px=[];St.handleByList(dt.Renderer,px);function PS(s){for(const t of px)if(t.test(s))return new t(s);throw new Error("Unable to auto-detect a suitable renderer.")}var FS=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,GS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const zS=FS,mx=GS;class gx{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}i>=Se.HIGH?this.multisample=Se.HIGH:i>=Se.MEDIUM?this.multisample=Se.MEDIUM:i>=Se.LOW?this.multisample=Se.LOW:this.multisample=Se.NONE}destroy(){}}gx.extension={type:dt.RendererSystem,name:"_multisample"};St.add(gx);class HS{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class yx{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,l.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:n,CONTEXT_UID:l}=this;if(this.boundBufferBases[i]!==t){const o=t._glBuffers[l]||this.createGLBuffer(t);this.boundBufferBases[i]=t,n.bindBufferBase(n.UNIFORM_BUFFER,i,o.buffer)}}bindBufferRange(t,i,n){const{gl:l,CONTEXT_UID:o}=this;n=n||0;const h=t._glBuffers[o]||this.createGLBuffer(t);l.bindBufferRange(l.UNIFORM_BUFFER,i||0,h.buffer,n*256,256)}update(t){const{gl:i,CONTEXT_UID:n}=this,l=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==l.updateID)if(l.updateID=t._updateID,i.bindBuffer(t.type,l.buffer),l.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const o=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;l.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,o)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],l=this.gl;t.disposeRunner.remove(this),n&&(i||l.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let n=0;n<i.length;n++)this.dispose(this.managedBuffers[i[n]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:n}=this;return t._glBuffers[i]=new HS(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}yx.extension={type:dt.RendererSystem,name:"buffer"};St.add(yx);class vx{constructor(t){this.renderer=t}render(t,i){const n=this.renderer;let l,o,h,c;if(i&&(l=i.renderTexture,o=i.clear,h=i.transform,c=i.skipUpdateTransform),this.renderingToScreen=!l,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=h,!n.context.isLost){if(l||(this.lastObjectRendered=t),!c){const p=t.enableTempParent();t.updateTransform(),t.disableTempParent(p)}n.renderTexture.bind(l),n.batch.currentRenderer.start(),(o??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),l&&(i.blit&&n.framebuffer.blit(),l.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}vx.extension={type:dt.RendererSystem,name:"objectRenderer"};St.add(vx);const lu=class Ld extends IS{constructor(t){super(),this.type=b_.WEBGL,t=Object.assign({},gt.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Li({projectionMatrix:new ae},!0);const i={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:Ld.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(i),"useContextAlpha"in t&&(zt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=Ld.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t?.forceCanvas?!1:hT()}render(t,i){this.objectRenderer.render(t,i)}resize(t,i){this._view.resizeView(t,i)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return zt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return zt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return zt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return zt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){zt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return zt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){zt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return zt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,i){return this.textureGenerator.generateTexture(t,i)}};lu.extension={type:dt.Renderer,priority:1},lu.__plugins={},lu.__systems={};let hp=lu;St.handleByMap(dt.RendererPlugin,hp.__plugins);St.handleByMap(dt.RendererSystem,hp.__systems);St.add(hp);class _x extends gl{constructor(t,i){const{width:n,height:l}=i||{};super(n,l),this.items=[],this.itemDirtyIds=[];for(let o=0;o<t;o++){const h=new It;this.items.push(h),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof gl?this.addResourceAt(t[n],n):this.addResourceAt(P_(t[n],i),n))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const t=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(t).then(()=>{const{realWidth:i,realHeight:n}=this.items[0];return this.resize(i,n),this.update(),Promise.resolve(this)}),this._load}}class kS extends _x{constructor(t,i){const{width:n,height:l}=i||{};let o,h;Array.isArray(t)?(o=t,h=t.length):h=t,super(h,{width:n,height:l}),o&&this.initFromArray(o,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Zs.TEXTURE_2D_ARRAY}upload(t,i,n){const{length:l,itemDirtyIds:o,items:h}=this,{gl:c}=t;n.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,l,0,i.format,n.type,null);for(let p=0;p<l;p++){const m=h[p];o[p]<m.dirtyId&&(o[p]=m.dirtyId,m.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,p,m.resource.width,m.resource.height,1,i.format,n.type,m.resource.source))}return!0}}class XS extends Or{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const xx=class cl extends _x{constructor(t,i){const{width:n,height:l,autoLoad:o,linkBaseTexture:h}=i||{};if(t&&t.length!==cl.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:l});for(let c=0;c<cl.SIDES;c++)this.items[c].target=Zs.TEXTURE_CUBE_MAP_POSITIVE_X+c;this.linkBaseTexture=h!==!1,t&&this.initFromArray(t,i),o!==!1&&this.load()}bind(t){super.bind(t),t.target=Zs.TEXTURE_CUBE_MAP}addBaseTextureAt(t,i,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[i])throw new Error(`Index ${i} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=Zs.TEXTURE_CUBE_MAP_POSITIVE_X+i,t.parentTextureArray=this.baseTexture,this.items[i]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[i]=t,this}upload(t,i,n){const l=this.itemDirtyIds;for(let o=0;o<cl.SIDES;o++){const h=this.items[o];(l[o]<h.dirtyId||n.dirtyId<i.dirtyId)&&(h.valid&&h.resource?(h.resource.upload(t,h,n),l[o]=h.dirtyId):l[o]<-1&&(t.gl.texImage2D(h.target,0,n.internalFormat,i.realWidth,i.realHeight,0,i.format,n.type,null),l[o]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===cl.SIDES}};xx.SIDES=6;let VS=xx;class Ws extends Or{constructor(t,i){i=i||{};let n,l,o;typeof t=="string"?(n=Ws.EMPTY,l=t,o=!0):(n=t,l=null,o=!1),super(n),this.url=l,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.ownsImageBitmap=i.ownsImageBitmap??o,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const n=await gt.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const l=await n.blob();if(this.destroyed)return;const o=await createImageBitmap(l,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Je.UNPACK?"premultiply":"none"});if(this.destroyed){o.close();return}this.source=o,this.update(),t(this)}catch(n){if(this.destroyed)return;i(n),this.onError.emit(n)}}),this._load)}upload(t,i,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,n)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Ws._EMPTY=Ws._EMPTY??gt.ADAPTER.createCanvas(0,0),Ws._EMPTY}}const Pd=class ou extends Or{constructor(t,i){i=i||{},super(gt.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=i.scale||1,this._overrideWidth=i.width,this._overrideHeight=i.height,this._resolve=null,this._crossorigin=i.crossorigin,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.update(),t(this)},ou.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Or.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=i=>{this._resolve&&(t.onerror=null,this.onError.emit(i))},t.onload=()=>{if(!this._resolve)return;const i=t.width,n=t.height;if(!i||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let l=i*this.scale,o=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(l=this._overrideWidth||this._overrideHeight/n*i,o=this._overrideHeight||this._overrideWidth/i*n),l=Math.round(l),o=Math.round(o);const h=this.source;h.width=l,h.height=o,h._pixiId=`canvas_${Zn()}`,h.getContext("2d").drawImage(t,0,0,i,n,0,0,l,o),this._resolve(),this._resolve=null}}static getSize(t){const i=ou.SVG_SIZE.exec(t),n={};return i&&(n[i[1]]=Math.round(parseFloat(i[3])),n[i[5]]=Math.round(parseFloat(i[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,i){return i==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&ou.SVG_XML.test(t)}};Pd.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Pd.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Fd=Pd;class jS extends Or{constructor(t){super(t)}static test(t){return!!globalThis.VideoFrame&&t instanceof globalThis.VideoFrame}}const Gd=class zd extends Or{constructor(t,i){if(i=i||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");i.autoLoad!==!1&&n.setAttribute("preload","auto"),i.playsinline!==!1&&(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","")),i.muted===!0&&(n.setAttribute("muted",""),n.muted=!0),i.loop===!0&&n.setAttribute("loop",""),i.autoPlay!==!1&&n.setAttribute("autoplay",""),typeof t=="string"&&(t=[t]);const l=t[0].src||t[0];Or.crossOrigin(n,l,i.crossorigin);for(let o=0;o<t.length;++o){const h=document.createElement("source");let{src:c,mime:p}=t[o];if(c=c||t[o],c.startsWith("data:"))p=c.slice(5,c.indexOf(";"));else if(!c.startsWith("blob:")){const m=c.split("?").shift().toLowerCase(),g=m.slice(m.lastIndexOf(".")+1);p=p||zd.MIME_TYPES[g]||`video/${g}`}h.src=c,p&&(h.type=p),n.appendChild(h)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=i.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=i.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),i.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){if(this._updateFPS){const i=hi.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-i)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((i,n)=>{this.valid?i(this):(this._resolve=i,this._reject=n,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const i=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!i&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._configureAutoUpdate();const t=this.source;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(hi.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(hi.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(hi.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t,i){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||zd.TYPES.includes(i)}};Gd.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Gd.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let bx=Gd;wd.push(Ws,q_,XS,bx,jS,Fd,Mu,VS,kS);class xu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?Ut.EMPTY:(t=t||new Ut(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:n,b:l,c:o,d:h,tx:c,ty:p}=t,m=n*i.x+o*i.y+c,g=l*i.x+h*i.y+p;this.minX=Math.min(this.minX,m),this.maxX=Math.max(this.maxX,m),this.minY=Math.min(this.minY,g),this.maxY=Math.max(this.maxY,g)}addQuad(t){let i=this.minX,n=this.minY,l=this.maxX,o=this.maxY,h=t[0],c=t[1];i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[2],c=t[3],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[4],c=t[5],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,h=t[6],c=t[7],i=h<i?h:i,n=c<n?c:n,l=h>l?h:l,o=c>o?c:o,this.minX=i,this.minY=n,this.maxX=l,this.maxY=o}addFrame(t,i,n,l,o){this.addFrameMatrix(t.worldTransform,i,n,l,o)}addFrameMatrix(t,i,n,l,o){const h=t.a,c=t.b,p=t.c,m=t.d,g=t.tx,y=t.ty;let _=this.minX,x=this.minY,b=this.maxX,w=this.maxY,S=h*i+p*n+g,C=c*i+m*n+y;_=S<_?S:_,x=C<x?C:x,b=S>b?S:b,w=C>w?C:w,S=h*l+p*n+g,C=c*l+m*n+y,_=S<_?S:_,x=C<x?C:x,b=S>b?S:b,w=C>w?C:w,S=h*i+p*o+g,C=c*i+m*o+y,_=S<_?S:_,x=C<x?C:x,b=S>b?S:b,w=C>w?C:w,S=h*l+p*o+g,C=c*l+m*o+y,_=S<_?S:_,x=C<x?C:x,b=S>b?S:b,w=C>w?C:w,this.minX=_,this.minY=x,this.maxX=b,this.maxY=w}addVertexData(t,i,n){let l=this.minX,o=this.minY,h=this.maxX,c=this.maxY;for(let p=i;p<n;p+=2){const m=t[p],g=t[p+1];l=m<l?m:l,o=g<o?g:o,h=m>h?m:h,c=g>c?g:c}this.minX=l,this.minY=o,this.maxX=h,this.maxY=c}addVertices(t,i,n,l){this.addVerticesMatrix(t.worldTransform,i,n,l)}addVerticesMatrix(t,i,n,l,o=0,h=o){const c=t.a,p=t.b,m=t.c,g=t.d,y=t.tx,_=t.ty;let x=this.minX,b=this.minY,w=this.maxX,S=this.maxY;for(let C=n;C<l;C+=2){const U=i[C],O=i[C+1],P=c*U+m*O+y,B=g*O+p*U+_;x=Math.min(x,P-o),w=Math.max(w,P+o),b=Math.min(b,B-h),S=Math.max(S,B+h)}this.minX=x,this.minY=b,this.maxX=w,this.maxY=S}addBounds(t){const i=this.minX,n=this.minY,l=this.maxX,o=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>l?t.maxX:l,this.maxY=t.maxY>o?t.maxY:o}addBoundsMask(t,i){const n=t.minX>i.minX?t.minX:i.minX,l=t.minY>i.minY?t.minY:i.minY,o=t.maxX<i.maxX?t.maxX:i.maxX,h=t.maxY<i.maxY?t.maxY:i.maxY;if(n<=o&&l<=h){const c=this.minX,p=this.minY,m=this.maxX,g=this.maxY;this.minX=n<c?n:c,this.minY=l<p?l:p,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const n=t.minX>i.x?t.minX:i.x,l=t.minY>i.y?t.minY:i.y,o=t.maxX<i.x+i.width?t.maxX:i.x+i.width,h=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(n<=o&&l<=h){const c=this.minX,p=this.minY,m=this.maxX,g=this.maxY;this.minX=n<c?n:c,this.minY=l<p?l:p,this.maxX=o>m?o:m,this.maxY=h>g?h:g}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,n,l,o,h){t-=o,i-=h,n+=o,l+=h,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>l?this.maxY:l}}class ce extends yl{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new op,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new xu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let n=0;n<i.length;++n){const l=i[n];Object.defineProperty(ce.prototype,l,Object.getOwnPropertyDescriptor(t,l))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new Ut),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._localBounds||(this._localBounds=new xu);const i=this.transform,n=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=n?.worldAlpha??1,this.transform=this._tempDisplayObjectParent.transform;const l=this._bounds,o=this._boundsID;this._bounds=this._localBounds;const h=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=l,this._bounds.updateID+=this._boundsID-o,h}toGlobal(t,i,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,n,l){return i&&(t=i.toGlobal(t,n,l)),l||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,i=0,n=1,l=1,o=0,h=0,c=0,p=0,m=0){return this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=l||1,this.rotation=o,this.skew.x=h,this.skew.y=c,this.pivot.x=p,this.pivot.y=m,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new qS),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*FT}set angle(t){this.transform.rotation=t*GT}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class qS extends ce{constructor(){super(...arguments),this.sortDirty=null}}ce.prototype.displayObjectUpdateTransform=ce.prototype.updateTransform;const YS=new ae;function $S(s,t){return s.zIndex===t.zIndex?s._lastSortedIndex-t._lastSortedIndex:s.zIndex-t.zIndex}const Ex=class Hd extends ce{constructor(){super(),this.children=[],this.sortableChildren=Hd.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let i=0;i<t.length;i++)this.addChild(t[i]);else{const i=t[0];i.parent&&i.parent.removeChild(i),i.parent=this,this.sortDirty=!0,i.transform._parentID=-1,this.children.push(i),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",i,this,this.children.length-1),i.emit("added",this)}return t[0]}addChildAt(t,i){if(i<0||i>this.children.length)throw new Error(`${t}addChildAt: The index ${i} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(i,0,t),this._boundsID++,this.onChildrenChange(i),t.emit("added",this),this.emit("childAdded",t,this,i),t}swapChildren(t,i){if(t===i)return;const n=this.getChildIndex(t),l=this.getChildIndex(i);this.children[n]=i,this.children[l]=t,this.onChildrenChange(n<l?n:l)}getChildIndex(t){const i=this.children.indexOf(t);if(i===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return i}setChildIndex(t,i){if(i<0||i>=this.children.length)throw new Error(`The index ${i} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);Ks(this.children,n,1),this.children.splice(i,0,t),this.onChildrenChange(i)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let i=0;i<t.length;i++)this.removeChild(t[i]);else{const i=t[0],n=this.children.indexOf(i);if(n===-1)return null;i.parent=null,i.transform._parentID=-1,Ks(this.children,n,1),this._boundsID++,this.onChildrenChange(n),i.emit("removed",this),this.emit("childRemoved",i,this,n)}return t[0]}removeChildAt(t){const i=this.getChildAt(t);return i.parent=null,i.transform._parentID=-1,Ks(this.children,t,1),this._boundsID++,this.onChildrenChange(t),i.emit("removed",this),this.emit("childRemoved",i,this,t),i}removeChildren(t=0,i=this.children.length){const n=t,l=i,o=l-n;let h;if(o>0&&o<=l){h=this.children.splice(n,o);for(let c=0;c<h.length;++c)h[c].parent=null,h[c].transform&&(h[c].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let c=0;c<h.length;++c)h[c].emit("removed",this),this.emit("childRemoved",h[c],this,c);return h}else if(o===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let i=0,n=this.children.length;i<n;++i){const l=this.children[i];l._lastSortedIndex=i,!t&&l.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort($S),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const i=this.children[t];if(!(!i.visible||!i.renderable))if(i.calculateBounds(),i._mask){const n=i._mask.isMaskData?i._mask.maskObject:i._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(i._bounds,n._bounds)):this._bounds.addBounds(i._bounds)}else i.filterArea?this._bounds.addBoundsArea(i._bounds,i.filterArea):this._bounds.addBounds(i._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,i=!1){const n=super.getLocalBounds(t);if(!i)for(let l=0,o=this.children.length;l<o;++l){const h=this.children[l];h.visible&&h.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const i=t.renderTexture.sourceFrame;if(!(i.width>0&&i.height>0))return;let n,l;this.cullArea?(n=this.cullArea,l=this.worldTransform):this._render!==Hd.prototype._render&&(n=this.getBounds(!0));const o=t.projection.transform;if(o&&(l?(l=YS.copyFrom(l),l.prepend(o)):l=o),n&&i.intersects(n,l))this._render(t);else if(this.cullArea)return;for(let h=0,c=this.children.length;h<c;++h){const p=this.children[h],m=p.cullable;p.cullable=m||!this.cullArea,p.render(t),p.cullable=m}}render(t){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(t)}}renderAdvanced(t){const i=this.filters,n=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}const l=i&&this._enabledFilters?.length||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==we.NONE));if(l&&t.batch.flush(),i&&this._enabledFilters?.length&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let o=0,h=this.children.length;o<h;++o)this.children[o].render(t)}l&&t.batch.flush(),n&&t.mask.pop(this),i&&this._enabledFilters?.length&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const i=typeof t=="boolean"?t:t?.children,n=this.removeChildren(0,this.children.length);if(i)for(let l=0;l<n.length;++l)n[l].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const i=this.getLocalBounds().width;i!==0?this.scale.x=t/i:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const i=this.getLocalBounds().height;i!==0?this.scale.y=t/i:this.scale.y=1,this._height=t}};Ex.defaultSortableChildren=!1;let Pi=Ex;Pi.prototype.containerUpdateTransform=Pi.prototype.updateTransform;Object.defineProperties(gt,{SORTABLE_CHILDREN:{get(){return Pi.defaultSortableChildren},set(s){zt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Pi.defaultSortableChildren=s}}});const sl=new Vt,WS=new Uint16Array([0,1,2,0,2,3]);class na extends Pi{constructor(t){super(),this._anchor=new Rr(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new se(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Mt.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||Tt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=WS,this.pluginName="batch",this.isSprite=!0,this._roundPixels=gt.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=fn(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=fn(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,n=i.a,l=i.b,o=i.c,h=i.d,c=i.tx,p=i.ty,m=this.vertexData,g=t.trim,y=t.orig,_=this._anchor;let x=0,b=0,w=0,S=0;if(g?(b=g.x-_._x*y.width,x=b+g.width,S=g.y-_._y*y.height,w=S+g.height):(b=-_._x*y.width,x=b+y.width,S=-_._y*y.height,w=S+y.height),m[0]=n*b+o*S+c,m[1]=h*S+l*b+p,m[2]=n*x+o*S+c,m[3]=h*S+l*x+p,m[4]=n*x+o*w+c,m[5]=h*w+l*x+p,m[6]=n*b+o*w+c,m[7]=h*w+l*b+p,this._roundPixels){const C=gt.RESOLUTION;for(let U=0;U<m.length;++U)m[U]=Math.round(m[U]*C)/C}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,n=t.orig,l=this._anchor,o=this.transform.worldTransform,h=o.a,c=o.b,p=o.c,m=o.d,g=o.tx,y=o.ty,_=-l._x*n.width,x=_+n.width,b=-l._y*n.height,w=b+n.height;if(i[0]=h*_+p*b+g,i[1]=m*b+c*_+y,i[2]=h*x+p*b+g,i[3]=m*b+c*x+y,i[4]=h*x+p*w+g,i[5]=m*w+c*x+y,i[6]=h*_+p*w+g,i[7]=m*w+c*_+y,this._roundPixels){const S=gt.RESOLUTION;for(let C=0;C<i.length;++C)i[C]=Math.round(i[C]*S)/S}}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new xu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new Ut),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,sl);const i=this._texture.orig.width,n=this._texture.orig.height,l=-i*this.anchor.x;let o=0;return sl.x>=l&&sl.x<l+i&&(o=-n*this.anchor.y,sl.y>=o&&sl.y<o+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const i=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(t,i){const n=t instanceof Tt?t:Tt.from(t,i);return new na(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=fn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=fn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||Tt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const Tx=new ae;ce.prototype._cacheAsBitmap=!1;ce.prototype._cacheData=null;ce.prototype._cacheAsBitmapResolution=null;ce.prototype._cacheAsBitmapMultisample=null;class ZS{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ce.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(s){s!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(s){s!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=s,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(s){if(this._cacheAsBitmap===s)return;this._cacheAsBitmap=s;let t;s?(this._cacheData||(this._cacheData=new ZS),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});ce.prototype._renderCached=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(s),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(s))};ce.prototype._initCachedDisplayObject=function(s){if(this._cacheData?.sprite)return;const t=this.alpha;this.alpha=1,s.batch.flush();const i=this.getLocalBounds(new Ut,!0);if(this.filters?.length){const _=this.filters[0].padding;i.pad(_)}const n=this.cacheAsBitmapResolution||s.resolution;i.ceil(n),i.width=Math.max(i.width,1/n),i.height=Math.max(i.height,1/n);const l=s.renderTexture.current,o=s.renderTexture.sourceFrame.clone(),h=s.renderTexture.destinationFrame.clone(),c=s.projection.transform,p=Jn.create({width:i.width,height:i.height,resolution:n,multisample:this.cacheAsBitmapMultisample??s.multisample}),m=`cacheAsBitmap_${Zn()}`;this._cacheData.textureCacheId=m,It.addToCache(p.baseTexture,m),Tt.addToCache(p,m);const g=this.transform.localTransform.copyTo(Tx).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,s.render(this,{renderTexture:p,clear:!0,transform:g,skipUpdateTransform:!1}),s.framebuffer.blit(),s.projection.transform=c,s.renderTexture.bind(l,o,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=t;const y=new na(p);y.transform.worldTransform=this.transform.worldTransform,y.anchor.x=-(i.x/i.width),y.anchor.y=-(i.y/i.height),y.alpha=t,y._bounds=this._bounds,this._cacheData.sprite=y,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=y.containsPoint.bind(y)};ce.prototype._renderCachedCanvas=function(s){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(s),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(s))};ce.prototype._initCachedDisplayObjectCanvas=function(s){if(this._cacheData?.sprite)return;const t=this.getLocalBounds(new Ut,!0),i=this.alpha;this.alpha=1;const n=s.canvasContext.activeContext,l=s._projTransform,o=this.cacheAsBitmapResolution||s.resolution;t.ceil(o),t.width=Math.max(t.width,1/o),t.height=Math.max(t.height,1/o);const h=Jn.create({width:t.width,height:t.height,resolution:o}),c=`cacheAsBitmap_${Zn()}`;this._cacheData.textureCacheId=c,It.addToCache(h.baseTexture,c),Tt.addToCache(h,c);const p=Tx;this.transform.localTransform.copyTo(p),p.invert(),p.tx-=t.x,p.ty-=t.y,this.renderCanvas=this._cacheData.originalRenderCanvas,s.render(this,{renderTexture:h,clear:!0,transform:p,skipUpdateTransform:!1}),s.canvasContext.activeContext=n,s._projTransform=l,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const m=new na(h);m.transform.worldTransform=this.transform.worldTransform,m.anchor.x=-(t.x/t.width),m.anchor.y=-(t.y/t.height),m.alpha=i,m._bounds=this._bounds,this._cacheData.sprite=m,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=s._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=m.containsPoint.bind(m)};ce.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ce.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ce.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,It.removeFromCache(this._cacheData.textureCacheId),Tt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ce.prototype._cacheAsBitmapDestroy=function(s){this.cacheAsBitmap=!1,this.destroy(s)};ce.prototype.name=null;Pi.prototype.getChildByName=function(s,t){for(let i=0,n=this.children.length;i<n;i++)if(this.children[i].name===s)return this.children[i];if(t)for(let i=0,n=this.children.length;i<n;i++){const l=this.children[i];if(!l.getChildByName)continue;const o=l.getChildByName(s,!0);if(o)return o}return null};ce.prototype.getGlobalPosition=function(s=new Vt,t=!1){return this.parent?this.parent.toGlobal(this.position,s,t):(s.x=this.position.x,s.y=this.position.y),s};var KS=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class QS extends je{constructor(t=1){super(zS,KS,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const JS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},tA=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function eA(s){const t=JS[s],i=t.length;let n=tA,l="";const o="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let h;for(let c=0;c<s;c++){let p=o.replace("%index%",c.toString());h=c,c>=i&&(h=s-c-1),p=p.replace("%value%",t[h].toString()),l+=p,l+=`
`}return n=n.replace("%blur%",l),n=n.replace("%size%",s.toString()),n}const iA=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function rA(s,t){const i=Math.ceil(s/2);let n=iA,l="",o;t?o="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":o="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let h=0;h<s;h++){let c=o.replace("%index%",h.toString());c=c.replace("%sampleIndex%",`${h-(i-1)}.0`),l+=c,l+=`
`}return n=n.replace("%blur%",l),n=n.replace("%size%",s.toString()),n}class kd extends je{constructor(t,i=8,n=4,l=je.defaultResolution,o=5){const h=rA(o,t),c=eA(o);super(h,c),this.horizontal=t,this.resolution=l,this._quality=0,this.quality=n,this.blur=i}apply(t,i,n,l){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,l);else{const o=t.getFilterTexture(),h=t.renderer;let c=i,p=o;this.state.blend=!1,t.applyFilter(this,c,p,Ki.CLEAR);for(let m=1;m<this.passes-1;m++){t.bindAndClear(c,Ki.BLIT),this.uniforms.uSampler=p;const g=p;p=c,c=g,h.shader.bind(this),h.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,p,n,l),t.returnFilterTexture(o)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class nA extends je{constructor(t=8,i=4,n=je.defaultResolution,l=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new kd(!0,t,i,n,l),this.blurYFilter=new kd(!1,t,i,n,l),this.resolution=n,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,n,l){const o=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(o&&h){const c=t.getFilterTexture();this.blurXFilter.apply(t,i,c,Ki.CLEAR),this.blurYFilter.apply(t,c,n,l),t.returnFilterTexture(c)}else h?this.blurYFilter.apply(t,i,n,l):this.blurXFilter.apply(t,i,n,l)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var sA=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Xd extends je{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(mx,sA,t),this.alpha=1}_loadMatrix(t,i=!1){let n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(t,i){const[n,l,o]=se.shared.setValue(t).toArray(),h=[n,0,0,0,0,0,l,0,0,0,0,0,o,0,0,0,0,0,1,0];this._loadMatrix(h,i)}greyscale(t,i){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const n=Math.cos(t),l=Math.sin(t),o=Math.sqrt,h=1/3,c=o(h),p=n+(1-n)*h,m=h*(1-n)-c*l,g=h*(1-n)+c*l,y=h*(1-n)+c*l,_=n+h*(1-n),x=h*(1-n)-c*l,b=h*(1-n)-c*l,w=h*(1-n)+c*l,S=n+h*(1-n),C=[p,m,g,0,0,y,_,x,0,0,b,w,S,0,0,0,0,0,1,0];this._loadMatrix(C,i)}contrast(t,i){const n=(t||0)+1,l=-.5*(n-1),o=[n,0,0,0,l,0,n,0,0,l,0,0,n,0,l,0,0,0,1,0];this._loadMatrix(o,i)}saturate(t=0,i){const n=t*2/3+1,l=(n-1)*-.5,o=[n,l,l,0,0,l,n,l,0,0,l,l,n,0,0,0,0,0,1,0];this._loadMatrix(o,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,n,l,o){t=t||.2,i=i||.15,n=n||16770432,l=l||3375104;const h=se.shared,[c,p,m]=h.setValue(n).toArray(),[g,y,_]=h.setValue(l).toArray(),x=[.3,.59,.11,0,0,c,p,m,t,0,g,y,_,i,0,c-g,p-y,m-_,0,0];this._loadMatrix(x,o)}night(t,i){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(t,i){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}Xd.prototype.grayscale=Xd.prototype.greyscale;var aA=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,lA=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class oA extends je{constructor(t,i){const n=new ae;t.renderable=!1,super(lA,aA,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,i==null&&(i=20),this.scale=new Vt(i,i)}apply(t,i,n,l){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const o=this.maskSprite.worldTransform,h=Math.sqrt(o.a*o.a+o.b*o.b),c=Math.sqrt(o.c*o.c+o.d*o.d);h!==0&&c!==0&&(this.uniforms.rotation[0]=o.a/h,this.uniforms.rotation[1]=o.b/h,this.uniforms.rotation[2]=o.c/c,this.uniforms.rotation[3]=o.d/c),t.applyFilter(this,i,n,l)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var uA=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,hA=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class cA extends je{constructor(){super(hA,uA)}}var fA=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class dA extends je{constructor(t=.5,i=Math.random()){super(mx,fA,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const $0={AlphaFilter:QS,BlurFilter:nA,BlurFilterPass:kd,ColorMatrixFilter:Xd,DisplacementFilter:oA,FXAAFilter:cA,NoiseFilter:dA};Object.entries($0).forEach(([s,t])=>{Object.defineProperty($0,s,{get(){return zt("7.1.0",`filters.${s} has moved to ${s}`),t}})});class pA{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(hi.system.add(this.tickerUpdate,this,Kn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(hi.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const cn=new pA;class vl{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=vl.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Vt,this.page=new Vt,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,n,l,o){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class bu extends vl{constructor(){super(...arguments),this.client=new Vt,this.movement=new Vt,this.offset=new Vt,this.global=new Vt,this.screen=new Vt}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,n){return t.worldTransform.applyInverse(n||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,n,l,o,h,c,p,m,g,y,_,x,b,w){throw new Error("Method not implemented.")}}class Ni extends bu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Js extends bu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Js.DOM_DELTA_PIXEL=0,Js.DOM_DELTA_LINE=1,Js.DOM_DELTA_PAGE=2;const mA=2048,gA=new Vt,hd=new Vt;class yA{constructor(t){this.dispatch=new yl,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((n,l)=>n.priority-l.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let n=0,l=i.length;n<l;n++)i[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){cn.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",l=this[n](this.rootTarget,this.rootTarget.eventMode,gA.set(t,i),this.hitTestFn,this.hitPruneFn);return l&&l[0]}propagate(t,i){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let l=0,o=n.length-1;l<o;l++)if(t.currentTarget=n[l],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let l=n.length-2;l>=0;l--)if(t.currentTarget=n[l],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,n=this._allInteractiveElements){if(n.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const l=Array.isArray(i)?i:[i];for(let o=n.length-1;o>=0;o--)l.forEach(h=>{t.currentTarget=n[o],this.notifyTarget(t,h)})}propagationPath(t){const i=[t];for(let n=0;n<mA&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,n,l,o,h=!1){let c=!1;if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(cn.pauseUpdate=!1),t.interactiveChildren&&t.children){const g=t.children;for(let y=g.length-1;y>=0;y--){const _=g[y],x=this.hitTestMoveRecursive(_,this._isInteractive(i)?i:_.eventMode,n,l,o,h||o(t,n));if(x){if(x.length>0&&!x[x.length-1].parent)continue;const b=t.isInteractive();(x.length>0||b)&&(b&&this._allInteractiveElements.push(t),x.push(t)),this._hitElements.length===0&&(this._hitElements=x),c=!0}}}const p=this._isInteractive(i),m=t.isInteractive();return p&&m&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:c?this._hitElements:p&&!o(t,n)&&l(t,n)?m?[t]:[]:null}hitTestRecursive(t,i,n,l,o){if(this._interactivePrune(t)||o(t,n))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(cn.pauseUpdate=!1),t.interactiveChildren&&t.children){const p=t.children;for(let m=p.length-1;m>=0;m--){const g=p[m],y=this.hitTestRecursive(g,this._isInteractive(i)?i:g.eventMode,n,l,o);if(y){if(y.length>0&&!y[y.length-1].parent)continue;const _=t.isInteractive();return(y.length>0||_)&&y.push(t),y}}}const h=this._isInteractive(i),c=t.isInteractive();return h&&l(t,n)?c?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){if(t.hitArea&&(t.worldTransform.applyInverse(i,hd),!t.hitArea.contains(hd.x,hd.y)))return!0;if(t._mask){const n=t._mask.isMaskData?t._mask.maskObject:t._mask;if(n&&!n.containsPoint?.(i))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){i=i??t.type;const n=`on${i}`;t.currentTarget[n]?.(t);const l=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,l),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.dispatchEvent(i,l?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const n=i.pointerType==="mouse"||i.pointerType==="pen",l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.overTargets);if(l.overTargets?.length>0&&o!==i.target){const p=t.type==="mousemove"?"mouseout":"pointerout",m=this.createPointerEvent(t,p,o);if(this.dispatchEvent(m,"pointerout"),n&&this.dispatchEvent(m,"mouseout"),!i.composedPath().includes(o)){const g=this.createPointerEvent(t,"pointerleave",o);for(g.eventPhase=g.AT_TARGET;g.target&&!i.composedPath().includes(g.target);)g.currentTarget=g.target,this.notifyTarget(g),n&&this.notifyTarget(g,"mouseleave"),g.target=g.target.parent;this.freeEvent(g)}this.freeEvent(m)}if(o!==i.target){const p=t.type==="mousemove"?"mouseover":"pointerover",m=this.clonePointerEvent(i,p);this.dispatchEvent(m,"pointerover"),n&&this.dispatchEvent(m,"mouseover");let g=o?.parent;for(;g&&g!==this.rootTarget.parent&&g!==i.target;)g=g.parent;if(!g||g===this.rootTarget.parent){const y=this.clonePointerEvent(i,"pointerenter");for(y.eventPhase=y.AT_TARGET;y.target&&y.target!==o&&y.target!==this.rootTarget.parent;)y.currentTarget=y.target,this.notifyTarget(y),n&&this.notifyTarget(y,"mouseenter"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(m)}const h=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(i,"pointermove"),c&&h.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),c&&h.push("globaltouchmove")),n&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),c&&h.push("globalmousemove"),this.cursor=i.target?.cursor),h.length>0&&this.all(i,h),this._allInteractiveElements.length=0,this._hitElements.length=0,l.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.createPointerEvent(t),l=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),l&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=n.target?.cursor);const o=this.clonePointerEvent(n,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),l&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(o)}mapPointerOut(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",l=this.findMountedTarget(i.overTargets),o=this.createPointerEvent(t,"pointerout",l);this.dispatchEvent(o),n&&this.dispatchEvent(o,"mouseout");const h=this.createPointerEvent(t,"pointerleave",l);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),n&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;i.overTargets=null,this.freeEvent(o),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const c=n.button===2;this.dispatchEvent(n,c?"rightup":"mouseup")}const l=this.trackingData(t.pointerId),o=this.findMountedTarget(l.pressTargetsByButton[t.button]);let h=o;if(o&&!n.composedPath().includes(o)){let c=o;for(;c&&!n.composedPath().includes(c);){if(n.currentTarget=c,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const p=n.button===2;this.notifyTarget(n,p?"rightupoutside":"mouseupoutside")}c=c.parent}delete l.pressTargetsByButton[t.button],h=c}if(h){const c=this.clonePointerEvent(n,"click");c.target=h,c.path=null,l.clicksByButton[t.button]||(l.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:i});const p=l.clicksByButton[t.button];if(p.target===c.target&&i-p.timeStamp<200?++p.clickCount:p.clickCount=1,p.target=c.target,p.timeStamp=i,c.detail=p.clickCount,c.pointerType==="mouse"){const m=c.button===2;this.dispatchEvent(c,m?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof Ni)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[t.button]),l=this.createPointerEvent(t);if(n){let o=n;for(;o;)l.currentTarget=o,this.notifyTarget(l,"pointerupoutside"),l.pointerType==="touch"?this.notifyTarget(l,"touchendoutside"):(l.pointerType==="mouse"||l.pointerType==="pen")&&this.notifyTarget(l,l.button===2?"rightupoutside":"mouseupoutside"),o=o.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(l)}mapWheel(t){if(!(t instanceof Js)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let n=1;n<t.length&&t[n].parent===i;n++)i=t[n];return i}createPointerEvent(t,i,n){const l=this.allocateEvent(Ni);return this.copyPointerData(t,l),this.copyMouseData(t,l),this.copyData(t,l),l.nativeEvent=t.nativeEvent,l.originalEvent=t,l.target=n??this.hitTest(l.global.x,l.global.y)??this._hitElements[0],typeof i=="string"&&(l.type=i),l}createWheelEvent(t){const i=this.allocateEvent(Js);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const n=this.allocateEvent(Ni);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=i??n.type,n}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof Ni&&i instanceof Ni&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof bu&&i instanceof bu&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const n=t.currentTarget._events[i];if(n&&t.currentTarget.isInteractive())if("fn"in n)n.once&&t.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let l=0,o=n.length;l<o&&!t.propagationImmediatelyStopped;l++)n[l].once&&t.currentTarget.removeListener(i,n[l].fn,void 0,!0),n[l].fn.call(n[l].context,t)}}const vA=1,_A={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Vd=class jd{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new yA(null),cn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Ni(null),this.rootWheelEvent=new Js(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...jd.defaultEventFeatures},{set:(i,n,l)=>(n==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=l),i[n]=l,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:i,resolution:n}=this.renderer;this.setTargetElement(i),this.resolution=n,jd._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(t);this.autoPreventDefault&&i[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,l=i.length;n<l;n++){const o=i[n],h=this.bootstrapEvent(this.rootPointerEvent,o);this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,cn.pointerMoved();const i=this.normalizeToPointerData(t);for(let n=0,l=i.length;n<l;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let i=t.target;t.composedPath&&t.composedPath().length>0&&(i=t.composedPath()[0]);const n=i!==this.domElement?"outside":"",l=this.normalizeToPointerData(t);for(let o=0,h=l.length;o<h;o++){const c=this.bootstrapEvent(this.rootPointerEvent,l[o]);c.type+=n,this.rootBoundary.mapEvent(c)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const i=this.normalizeToPointerData(t);for(let n=0,l=i.length;n<l;n++){const o=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const i=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(t){this.removeEvents(),this.domElement=t,cn.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;cn.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;cn.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,i,n){const l=this.domElement.isConnected?this.domElement.getBoundingClientRect():{width:this.domElement.width,height:this.domElement.height,left:0,top:0},o=1/this.resolution;t.x=(i-l.left)*(this.domElement.width/l.width)*o,t.y=(n-l.top)*(this.domElement.height/l.height)*o}normalizeToPointerData(t){const i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,l=t.changedTouches.length;n<l;n++){const o=t.changedTouches[n];typeof o.button>"u"&&(o.button=0),typeof o.buttons>"u"&&(o.buttons=1),typeof o.isPrimary>"u"&&(o.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof o.width>"u"&&(o.width=o.radiusX||1),typeof o.height>"u"&&(o.height=o.radiusY||1),typeof o.tiltX>"u"&&(o.tiltX=0),typeof o.tiltY>"u"&&(o.tiltY=0),typeof o.pointerType>"u"&&(o.pointerType="touch"),typeof o.pointerId>"u"&&(o.pointerId=o.identifier||0),typeof o.pressure>"u"&&(o.pressure=o.force||.5),typeof o.twist>"u"&&(o.twist=0),typeof o.tangentialPressure>"u"&&(o.tangentialPressure=0),typeof o.layerX>"u"&&(o.layerX=o.offsetX=o.clientX),typeof o.layerY>"u"&&(o.layerY=o.offsetY=o.clientY),o.isNormalized=!0,o.type=t.type,i.push(o)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=vA),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(t);return i}normalizeWheelEvent(t){const i=this.rootWheelEvent;return this.transferMouseData(i,t),i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ,i.deltaMode=t.deltaMode,this.mapPositionToPoint(i.screen,t.clientX,t.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=t,i.type=t.type,i}bootstrapEvent(t,i){return t.originalEvent=null,t.nativeEvent=i,t.pointerId=i.pointerId,t.width=i.width,t.height=i.height,t.isPrimary=i.isPrimary,t.pointerType=i.pointerType,t.pressure=i.pressure,t.tangentialPressure=i.tangentialPressure,t.tiltX=i.tiltX,t.tiltY=i.tiltY,t.twist=i.twist,this.transferMouseData(t,i),this.mapPositionToPoint(t.screen,i.clientX,i.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=_A[t.type]||t.type),t}transferMouseData(t,i){t.isTrusted=i.isTrusted,t.srcElement=i.srcElement,t.timeStamp=performance.now(),t.type=i.type,t.altKey=i.altKey,t.button=i.button,t.buttons=i.buttons,t.client.x=i.clientX,t.client.y=i.clientY,t.ctrlKey=i.ctrlKey,t.metaKey=i.metaKey,t.movement.x=i.movementX,t.movement.y=i.movementY,t.page.x=i.pageX,t.page.y=i.pageY,t.relatedTarget=null,t.shiftKey=i.shiftKey}};Vd.extension={name:"events",type:[dt.RendererSystem,dt.CanvasRendererSystem]},Vd.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let qd=Vd;St.add(qd);function W0(s){return s==="dynamic"||s==="static"}const xA={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??W0(qd.defaultEventMode)},set interactive(s){zt("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=s,this.eventMode=s?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??qd.defaultEventMode},set eventMode(s){this._internalInteractive=W0(s),this._internalEventMode=s},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(s,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,l=typeof i=="object"?i.signal:void 0,o=typeof i=="object"?i.once===!0:!1,h=typeof t=="function"?void 0:t;s=n?`${s}capture`:s;const c=typeof t=="function"?t:t.handleEvent,p=this;l&&l.addEventListener("abort",()=>{p.off(s,c,h)}),o?p.once(s,c,h):p.on(s,c,h)},removeEventListener(s,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,l=typeof t=="function"?void 0:t;s=n?`${s}capture`:s,t=typeof t=="function"?t:t.handleEvent,this.off(s,t,l)},dispatchEvent(s){if(!(s instanceof vl))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return s.defaultPrevented=!1,s.path=null,s.target=this,s.manager.dispatchEvent(s),!s.defaultPrevented}};ce.mixin(xA);const bA={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ce.mixin(bA);const EA=9,$o=100,TA=0,SA=0,Z0=2,K0=1,AA=-1e3,wA=-1e3,CA=2;class Sx{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Cr.tablet||Cr.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${$o}px`,i.style.height=`${$o}px`,i.style.position="absolute",i.style.top=`${TA}px`,i.style.left=`${SA}px`,i.style.zIndex=Z0.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${K0}px`,t.style.height=`${K0}px`,t.style.position="absolute",t.style.top=`${AA}px`,t.style.left=`${wA}px`,t.style.zIndex=CA.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let n=0;n<i.length;n++)this.updateAccessibleObjects(i[n])}update(){const t=performance.now();if(Cr.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:n,width:l,height:o}=this.renderer.view.getBoundingClientRect(),{width:h,height:c,resolution:p}=this.renderer,m=l/h*p,g=o/c*p;let y=this.div;y.style.left=`${i}px`,y.style.top=`${n}px`,y.style.width=`${h}px`,y.style.height=`${c}px`;for(let _=0;_<this.children.length;_++){const x=this.children[_];if(x.renderId!==this.renderId)x._accessibleActive=!1,Ks(this.children,_,1),this.div.removeChild(x._accessibleDiv),this.pool.push(x._accessibleDiv),x._accessibleDiv=null,_--;else{y=x._accessibleDiv;let b=x.hitArea;const w=x.worldTransform;x.hitArea?(y.style.left=`${(w.tx+b.x*w.a)*m}px`,y.style.top=`${(w.ty+b.y*w.d)*g}px`,y.style.width=`${b.width*w.a*m}px`,y.style.height=`${b.height*w.d*g}px`):(b=x.getBounds(),this.capHitArea(b),y.style.left=`${b.x*m}px`,y.style.top=`${b.y*g}px`,y.style.width=`${b.width*m}px`,y.style.height=`${b.height*g}px`,y.title!==x.accessibleTitle&&x.accessibleTitle!==null&&(y.title=x.accessibleTitle),y.getAttribute("aria-label")!==x.accessibleHint&&x.accessibleHint!==null&&y.setAttribute("aria-label",x.accessibleHint)),(x.accessibleTitle!==y.title||x.tabIndex!==y.tabIndex)&&(y.title=x.accessibleTitle,y.tabIndex=x.tabIndex,this.debug&&this.updateDebugHTML(y))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:n}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${$o}px`,i.style.height=`${$o}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=Z0.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:n}=t.target,l=this.renderer.events.rootBoundary,o=Object.assign(new vl(l),{target:n});l.rootTarget=this.renderer.lastObjectRendered,i.forEach(h=>l.dispatchEvent(o,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===EA&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Sx.extension={name:"accessibility",type:[dt.RendererPlugin,dt.CanvasRendererPlugin]};St.add(Sx);const Ax=class Yd{constructor(t){this.stage=new Pi,t=Object.assign({forceCanvas:!1},t),this.renderer=PS(t),Yd._plugins.forEach(i=>{i.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer?.view}get screen(){return this.renderer?.screen}destroy(t,i){const n=Yd._plugins.slice(0);n.reverse(),n.forEach(l=>{l.destroy.call(this)}),this.stage.destroy(i),this.stage=null,this.renderer.destroy(t),this.renderer=null}};Ax._plugins=[];let wx=Ax;St.handleByList(dt.Application,wx._plugins);class Cx{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:l,clientHeight:o}=this._resizeTo;i=l,n=o}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}Cx.extension=dt.Application;St.add(Cx);const Q0={loader:dt.LoadParser,resolver:dt.ResolveParser,cache:dt.CacheParser,detection:dt.DetectionParser};St.handle(dt.Asset,s=>{const t=s.ref;Object.entries(Q0).filter(([i])=>!!t[i]).forEach(([i,n])=>St.add(Object.assign(t[i],{extension:t[i].extension??n})))},s=>{const t=s.ref;Object.keys(Q0).filter(i=>!!t[i]).forEach(i=>St.remove(t[i]))});class RA{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function sa(s,t){if(Array.isArray(t)){for(const i of t)if(s.startsWith(`data:${i}`))return!0;return!1}return s.startsWith(`data:${t}`)}function yn(s,t){const i=s.split("?")[0],n=Oe.extname(i).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const Ii=(s,t,i=!1)=>(Array.isArray(s)||(s=[s]),t?s.map(n=>typeof n=="string"||i?t(n):n):s),$d=(s,t)=>{const i=t.split("?")[1];return i&&(s+=`?${i}`),s};function Rx(s,t,i,n,l){const o=t[i];for(let h=0;h<o.length;h++){const c=o[h];i<t.length-1?Rx(s.replace(n[i],c),t,i+1,n,l):l.push(s.replace(n[i],c))}}function MA(s){const t=/\{(.*?)\}/g,i=s.match(t),n=[];if(i){const l=[];i.forEach(o=>{const h=o.substring(1,o.length-1).split(",");l.push(h)}),Rx(s,l,0,i,n)}else n.push(s);return n}const Eu=s=>!Array.isArray(s);class DA{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const n=Ii(t);let l;for(let c=0;c<this.parsers.length;c++){const p=this.parsers[c];if(p.test(i)){l=p.getCacheableAssets(n,i);break}}l||(l={},n.forEach(c=>{l[c]=i}));const o=Object.keys(l),h={cacheKeys:o,keys:n};if(n.forEach(c=>{this._cacheMap.set(c,h)}),o.forEach(c=>{const p=l?l[c]:i;this._cache.has(c)&&this._cache.get(c)!==p&&console.warn("[Cache] already has key:",c),this._cache.set(c,l[c])}),i instanceof Tt){const c=i;n.forEach(p=>{c.baseTexture!==Tt.EMPTY.baseTexture&&It.addToCache(c.baseTexture,p),Tt.addToCache(c,p)})}}remove(t){if(!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Yn=new DA;class OA{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,n)=>(this._parsersValidated=!1,t[i]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const n={promise:null,parser:null};return n.promise=(async()=>{let l=null,o=null;if(i.loadParser&&(o=this._parserHash[i.loadParser],o||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!o){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&c.test?.(t,i,this)){o=c;break}}if(!o)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}l=await o.load(t,i,this),n.parser=o;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await c.testParse?.(l,i,this)&&(l=await c.parse(l,i,this)||l,n.parser=c)}return l})(),n}async load(t,i){this._parsersValidated||this._validateParsers();let n=0;const l={},o=Eu(t),h=Ii(t,m=>({alias:[m],src:m})),c=h.length,p=h.map(async m=>{const g=Oe.toAbsolute(m.src);if(!l[m.src])try{this.promiseCache[g]||(this.promiseCache[g]=this._getLoadPromiseAndParser(g,m)),l[m.src]=await this.promiseCache[g].promise,i&&i(++n/c)}catch(y){throw delete this.promiseCache[g],delete l[m.src],new Error(`[Loader.load] Failed to load ${g}.
${y}`)}});return await Promise.all(p),o?l[h[0].src]:l}async unload(t){const i=Ii(t,n=>({alias:[n],src:n})).map(async n=>{const l=Oe.toAbsolute(n.src),o=this.promiseCache[l];if(o){const h=await o.promise;delete this.promiseCache[l],o.parser?.unload?.(h,n,this)}});await Promise.all(i)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var Fi=(s=>(s[s.Low=0]="Low",s[s.Normal=1]="Normal",s[s.High=2]="High",s))(Fi||{});const BA=".json",NA="application/json",IA={extension:{type:dt.LoadParser,priority:Fi.Low},name:"loadJson",test(s){return sa(s,NA)||yn(s,BA)},async load(s){return await(await gt.ADAPTER.fetch(s)).json()}};St.add(IA);const UA=".txt",LA="text/plain",PA={name:"loadTxt",extension:{type:dt.LoadParser,priority:Fi.Low},test(s){return sa(s,LA)||yn(s,UA)},async load(s){return await(await gt.ADAPTER.fetch(s)).text()}};St.add(PA);const FA=["normal","bold","100","200","300","400","500","600","700","800","900"],GA=[".ttf",".otf",".woff",".woff2"],zA=["font/ttf","font/otf","font/woff","font/woff2"],HA=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function kA(s){const t=Oe.extname(s),i=Oe.basename(s,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1));let n=i.length>0;for(const o of i)if(!o.match(HA)){n=!1;break}let l=i.join(" ");return n||(l=`"${l.replace(/[\\"]/g,"\\$&")}"`),l}const XA=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function VA(s){return XA.test(s)?s:encodeURI(s)}const jA={extension:{type:dt.LoadParser,priority:Fi.Low},name:"loadWebFont",test(s){return sa(s,zA)||yn(s,GA)},async load(s,t){const i=gt.ADAPTER.getFontFaceSet();if(i){const n=[],l=t.data?.family??kA(s),o=t.data?.weights?.filter(c=>FA.includes(c))??["normal"],h=t.data??{};for(let c=0;c<o.length;c++){const p=o[c],m=new FontFace(l,`url(${VA(s)})`,{...h,weight:p});await m.load(),i.add(m),n.push(m)}return n.length===1?n[0]:n}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(s){(Array.isArray(s)?s:[s]).forEach(t=>gt.ADAPTER.getFontFaceSet().delete(t))}};St.add(jA);const qA=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let ta=null,Wd=class{constructor(){ta||(ta=URL.createObjectURL(new Blob([qA],{type:"application/javascript"}))),this.worker=new Worker(ta)}};Wd.revokeObjectURL=function(){ta&&(URL.revokeObjectURL(ta),ta=null)};const YA=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let ea=null;class Mx{constructor(){ea||(ea=URL.createObjectURL(new Blob([YA],{type:"application/javascript"}))),this.worker=new Worker(ea)}}Mx.revokeObjectURL=function(){ea&&(URL.revokeObjectURL(ea),ea=null)};let J0=0,cd;class $A{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const{worker:i}=new Wd;i.addEventListener("message",n=>{i.terminate(),Wd.revokeObjectURL(),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){cd===void 0&&(cd=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<cd&&(this._createdWorkers++,t=new Mx().worker,t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const n=new Promise((l,o)=>{this.queue.push({id:t,arguments:i,resolve:l,reject:o})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),n=i.id;this.resolveHash[J0]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:J0++,id:n})}}const t_=new $A;function _l(s,t,i){s.resource.internal=!0;const n=new Tt(s),l=()=>{delete t.promiseCache[i],Yn.has(i)&&Yn.remove(i)};return n.baseTexture.once("destroyed",()=>{i in t.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),l())}),n.once("destroyed",()=>{s.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),l())}),n}const WA=[".jpeg",".jpg",".png",".webp",".avif"],ZA=["image/jpeg","image/png","image/webp","image/avif"];async function KA(s){const t=await gt.ADAPTER.fetch(s);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${s}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const Iu={name:"loadTextures",extension:{type:dt.LoadParser,priority:Fi.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(s){return sa(s,ZA)||yn(s,WA)},async load(s,t,i){const n=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let l;n?this.config.preferWorkers&&await t_.isImageBitmapSupported()?l=await t_.loadImageBitmap(s):l=await KA(s):l=await new Promise((c,p)=>{const m=new Image;m.crossOrigin=this.config.crossOrigin,m.src=s,m.complete?c(m):(m.onload=()=>c(m),m.onerror=g=>p(g))});const o={...t.data};o.resolution??(o.resolution=Dr(s)),n&&o.resourceOptions?.ownsImageBitmap===void 0&&(o.resourceOptions={...o.resourceOptions},o.resourceOptions.ownsImageBitmap=!0);const h=new It(l,o);return h.resource.src=s,_l(h,i,s)},unload(s){s.destroy(!0)}};St.add(Iu);const QA=".svg",JA="image/svg+xml",tw={extension:{type:dt.LoadParser,priority:Fi.High},name:"loadSVG",test(s){return sa(s,JA)||yn(s,QA)},async testParse(s){return Fd.test(s)},async parse(s,t,i){const n=new Fd(s,t?.data?.resourceOptions);await n.load();const l=new It(n,{resolution:Dr(s),...t?.data});return l.resource.src=t.src,_l(l,i,t.src)},async load(s,t){return(await gt.ADAPTER.fetch(s)).text()},unload:Iu.unload};St.add(tw);const ew=[".mp4",".m4v",".webm",".ogv"],iw=["video/mp4","video/webm","video/ogg"],rw={name:"loadVideo",extension:{type:dt.LoadParser,priority:Fi.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(s){return sa(s,iw)||yn(s,ew)},async load(s,t,i){let n;const l=await(await gt.ADAPTER.fetch(s)).blob(),o=URL.createObjectURL(l);try{const h={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...t?.data?.resourceOptions,autoLoad:!0},c=new bx(o,h);await c.load();const p=new It(c,{alphaMode:await uT(),resolution:Dr(s),...t?.data});p.resource.src=s,n=_l(p,i,s),n.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(o)})}catch(h){throw URL.revokeObjectURL(o),h}return n},unload(s){s.destroy(!0)}};St.add(rw);class nw{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}getAlias(t){const{alias:i,name:n,src:l,srcs:o}=t;return Ii(i||n||l||o,h=>typeof h=="string"?h:Array.isArray(h)?h.map(c=>c?.src??c?.srcs??c):h?.src||h?.srcs?h.src??h.srcs:h,!0)}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const n=[];Array.isArray(i)?i.forEach(l=>{const o=l.src??l.srcs,h=l.alias??l.name;let c;if(typeof h=="string"){const p=this._createBundleAssetId(t,h);n.push(p),c=[h,p]}else{const p=h.map(m=>this._createBundleAssetId(t,m));n.push(...p),c=[...h,...p]}this.add({...l,alias:c,src:o})}):Object.keys(i).forEach(l=>{const o=[l,this._createBundleAssetId(t,l)];if(typeof i[l]=="string")this.add({alias:o,src:i[l]});else if(Array.isArray(i[l]))this.add({alias:o,src:i[l]});else{const h=i[l],c=h.src??h.srcs;this.add({...h,alias:o,src:Array.isArray(c)?c:[c]})}n.push(...o)}),this._bundles[t]=n}add(t,i,n,l,o){const h=[];typeof t=="string"||Array.isArray(t)&&typeof t[0]=="string"?(zt("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),h.push({alias:t,src:i,data:n,format:l,loadParser:o})):Array.isArray(t)?h.push(...t):h.push(t);let c;c=p=>{this.hasKey(p)&&console.warn(`[Resolver] already has key: ${p} overwriting`)},Ii(h).forEach(p=>{const{src:m,srcs:g}=p;let{data:y,format:_,loadParser:x}=p;const b=Ii(m||g).map(C=>typeof C=="string"?MA(C):Array.isArray(C)?C:[C]),w=this.getAlias(p);Array.isArray(w)?w.forEach(c):c(w);const S=[];b.forEach(C=>{C.forEach(U=>{let O={};if(typeof U!="object"){O.src=U;for(let P=0;P<this._parsers.length;P++){const B=this._parsers[P];if(B.test(U)){O=B.parse(U);break}}}else y=U.data??y,_=U.format??_,x=U.loadParser??x,O={...O,...U};if(!w)throw new Error(`[Resolver] alias is undefined for this asset: ${O.src}`);O=this.buildResolvedAsset(O,{aliases:w,data:y,format:_,loadParser:x}),S.push(O)})}),w.forEach(C=>{this._assetMap[C]=S})})}resolveBundle(t){const i=Eu(t);t=Ii(t);const n={};return t.forEach(l=>{const o=this._bundles[l];if(o){const h=this.resolve(o),c={};for(const p in h){const m=h[p];c[this._extractAssetIdFromBundle(l,p)]=m}n[l]=c}}),i?n[t[0]]:n}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const n={};for(const l in i)n[l]=i[l].src;return n}return i.src}resolve(t){const i=Eu(t);t=Ii(t);const n={};return t.forEach(l=>{if(!this._resolverHash[l])if(this._assetMap[l]){let o=this._assetMap[l];const h=o[0],c=this._getPreferredOrder(o);c?.priority.forEach(p=>{c.params[p].forEach(m=>{const g=o.filter(y=>y[p]?y[p]===m:!1);g.length&&(o=g)})}),this._resolverHash[l]=o[0]??h}else this._resolverHash[l]=this.buildResolvedAsset({alias:[l],src:l},{});n[l]=this._resolverHash[l]}),i?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const n=t[0],l=this._preferredOrder.find(o=>o.params.format.includes(n.format));if(l)return l}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}buildResolvedAsset(t,i){const{aliases:n,data:l,loadParser:o,format:h}=i;return(this._basePath||this._rootPath)&&(t.src=Oe.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=n??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...l||{},...t.data},t.loadParser=o??t.loadParser,t.format=h??t.format??Oe.extname(t.src).slice(1),t.srcs=t.src,t.name=t.alias,t}}class sw{constructor(){this._detections=[],this._initialized=!1,this.resolver=new nw,this.loader=new OA,this.cache=Yn,this._backgroundLoader=new RA(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let o=t.manifest;typeof o=="string"&&(o=await this.load(o)),this.resolver.addManifest(o)}const i=t.texturePreference?.resolution??1,n=typeof i=="number"?[i]:i,l=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:l,resolution:n}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,n,l,o){this.resolver.add(t,i,n,l,o)}async load(t,i){this._initialized||await this.init();const n=Eu(t),l=Ii(t).map(c=>{if(typeof c!="string"){const p=this.resolver.getAlias(c);return p.some(m=>!this.resolver.hasKey(m))&&this.add(c),Array.isArray(p)?p[0]:p}return this.resolver.hasKey(c)||this.add({alias:c,src:c}),c}),o=this.resolver.resolve(l),h=await this._mapLoadToResolve(o,i);return n?h[l[0]]:h}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const l=this.resolver.resolveBundle(t),o={},h=Object.keys(l);let c=0,p=0;const m=()=>{i?.(++c/p)},g=h.map(y=>{const _=l[y];return p+=Object.keys(_).length,this._mapLoadToResolve(_,m).then(x=>{o[y]=x})});return await Promise.all(g),n?o[t[0]]:o}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Yn.get(t);const i={};for(let n=0;n<t.length;n++)i[n]=Yn.get(t[n]);return i}async _mapLoadToResolve(t,i){const n=Object.values(t),l=Object.keys(t);this._backgroundLoader.active=!1;const o=await this.loader.load(n,i);this._backgroundLoader.active=!0;const h={};return n.forEach((c,p)=>{const m=o[c.src],g=[c.src];c.alias&&g.push(...c.alias),h[l[p]]=m,Yn.set(g,m)}),h}async unload(t){this._initialized||await this.init();const i=Ii(t).map(l=>typeof l!="string"?l.src:l),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=Ii(t);const i=this.resolver.resolveBundle(t),n=Object.keys(i).map(l=>this._unloadFromResolved(i[l]));await Promise.all(n)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(n=>{Yn.remove(n.src)}),await this.loader.unload(i)}async _detectFormats(t){let i=[];t.preferredFormats&&(i=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const n of t.detections)t.skipDetections||await n.test()?i=await n.add(i):t.skipDetections||(i=await n.remove(i));return i=i.filter((n,l)=>i.indexOf(n)===l),i}get detections(){return this._detections}get preferWorkers(){return Iu.config.preferWorkers}set preferWorkers(t){zt("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(n=>n in t).forEach(n=>{i.config[n]=t[n]})})}}const Wo=new sw;St.handleByList(dt.LoadParser,Wo.loader.parsers).handleByList(dt.ResolveParser,Wo.resolver.parsers).handleByList(dt.CacheParser,Wo.cache.parsers).handleByList(dt.DetectionParser,Wo.detections);const aw={extension:dt.CacheParser,test:s=>Array.isArray(s)&&s.every(t=>t instanceof Tt),getCacheableAssets:(s,t)=>{const i={};return s.forEach(n=>{t.forEach((l,o)=>{i[n+(o===0?"":o+1)]=l})}),i}};St.add(aw);async function Dx(s){if("Image"in globalThis)return new Promise(t=>{const i=new Image;i.onload=()=>{t(!0)},i.onerror=()=>{t(!1)},i.src=s});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const t=await(await fetch(s)).blob();await createImageBitmap(t)}catch{return!1}return!0}return!1}const lw={extension:{type:dt.DetectionParser,priority:1},test:async()=>Dx("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async s=>[...s,"avif"],remove:async s=>s.filter(t=>t!=="avif")};St.add(lw);const ow={extension:{type:dt.DetectionParser,priority:0},test:async()=>Dx("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async s=>[...s,"webp"],remove:async s=>s.filter(t=>t!=="webp")};St.add(ow);const e_=["png","jpg","jpeg"],uw={extension:{type:dt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async s=>[...s,...e_],remove:async s=>s.filter(t=>!e_.includes(t))};St.add(uw);const hw="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function cp(s){return hw?!1:document.createElement("video").canPlayType(s)!==""}const cw={extension:{type:dt.DetectionParser,priority:0},test:async()=>cp("video/webm"),add:async s=>[...s,"webm"],remove:async s=>s.filter(t=>t!=="webm")};St.add(cw);const fw={extension:{type:dt.DetectionParser,priority:0},test:async()=>cp("video/mp4"),add:async s=>[...s,"mp4","m4v"],remove:async s=>s.filter(t=>t!=="mp4"&&t!=="m4v")};St.add(fw);const dw={extension:{type:dt.DetectionParser,priority:0},test:async()=>cp("video/ogg"),add:async s=>[...s,"ogv"],remove:async s=>s.filter(t=>t!=="ogv")};St.add(dw);const pw={extension:dt.ResolveParser,test:Iu.test,parse:s=>({resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:Oe.extname(s).slice(1),src:s})};St.add(pw);var Fe=(s=>(s[s.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",s[s.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",s[s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",s[s.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",s[s.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",s[s.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",s[s.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",s[s.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",s[s.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",s[s.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",s[s.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",s[s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",s[s.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",s[s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",s[s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",s[s.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",s[s.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",s[s.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",s[s.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",s[s.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",s[s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",s[s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",s[s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",s))(Fe||{});const Tu={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let $i,qs;function i_(){qs={bptc:$i.getExtension("EXT_texture_compression_bptc"),astc:$i.getExtension("WEBGL_compressed_texture_astc"),etc:$i.getExtension("WEBGL_compressed_texture_etc"),s3tc:$i.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:$i.getExtension("WEBGL_compressed_texture_s3tc_srgb"),pvrtc:$i.getExtension("WEBGL_compressed_texture_pvrtc")||$i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),etc1:$i.getExtension("WEBGL_compressed_texture_etc1"),atc:$i.getExtension("WEBGL_compressed_texture_atc")}}const mw={extension:{type:dt.DetectionParser,priority:2},test:async()=>{const s=gt.ADAPTER.createCanvas().getContext("webgl");return s?($i=s,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async s=>{qs||i_();const t=[];for(const i in qs)qs[i]&&t.push(i);return[...t,...s]},remove:async s=>(qs||i_(),s.filter(t=>!(t in qs)))};St.add(mw);class gw extends Mu{constructor(t,i={width:1,height:1,autoLoad:!0}){let n,l;typeof t=="string"?(n=t,l=new Uint8Array):(n=null,l=t),super(l,i),this.origin=n,this.buffer=l?new Ad(l):null,this._load=null,this.loaded=!1,this.origin!==null&&i.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(t=>t.blob()).then(t=>t.arrayBuffer()).then(t=>(this.data=new Uint32Array(t),this.buffer=new Ad(t),this.loaded=!0,this.onBlobLoaded(t),this.update(),this)),this._load)}}class Wn extends gw{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Wn._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Wn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,n){const l=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;l.pixelStorei(l.UNPACK_ALIGNMENT,4);for(let o=0,h=this.levels;o<h;o++){const{levelID:c,levelWidth:p,levelHeight:m,levelBuffer:g}=this._levelBuffers[o];l.compressedTexImage2D(l.TEXTURE_2D,c,this.format,p,m,0,g)}return!0}onBlobLoaded(){this._levelBuffers=Wn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=35916&&t<=35919)return"s3tc_sRGB";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t===36196)return"etc1";if(t===35986||t===35987||t===34798)return"atc";if(t>=36492&&t<=36495)return"bptc";if(t===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${t}`)}static _createLevelBuffers(t,i,n,l,o,h,c){const p=new Array(n);let m=t.byteOffset,g=h,y=c,_=g+l-1&~(l-1),x=y+o-1&~(o-1),b=_*x*Tu[i];for(let w=0;w<n;w++)p[w]={levelID:w,levelWidth:n>1?g:_,levelHeight:n>1?y:x,levelBuffer:new Uint8Array(t.buffer,m,b)},m+=b,g=g>>1||1,y=y>>1||1,_=g+l-1&~(l-1),x=y+o-1&~(o-1),b=_*x*Tu[i];return p}}const fd=4,Zo=124,yw=32,r_=20,vw=542327876,Ko={HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},_w={FOURCC:2},Qo={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3},xw=1,bw=2,Ew=4,Tw=64,Sw=512,Aw=131072,ww=827611204,Cw=861165636,Rw=894720068,Mw=808540228,Dw=4,Ow={[ww]:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Cw]:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Rw]:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT},Bw={70:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:Fe.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:Fe.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:Fe.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:Fe.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:Fe.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:Fe.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:Fe.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:Fe.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function Nw(s){const t=new Uint32Array(s);if(t[0]!==vw)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(s,0,Zo/Uint32Array.BYTES_PER_ELEMENT),n=i[Ko.HEIGHT],l=i[Ko.WIDTH],o=i[Ko.MIPMAP_COUNT],h=new Uint32Array(s,Ko.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,yw/Uint32Array.BYTES_PER_ELEMENT),c=h[xw];if(c&Ew){const p=h[_w.FOURCC];if(p!==Mw){const U=Ow[p],O=fd+Zo,P=new Uint8Array(s,O);return[new Wn(P,{format:U,width:l,height:n,levels:o})]}const m=fd+Zo,g=new Uint32Array(t.buffer,m,r_/Uint32Array.BYTES_PER_ELEMENT),y=g[Qo.DXGI_FORMAT],_=g[Qo.RESOURCE_DIMENSION],x=g[Qo.MISC_FLAG],b=g[Qo.ARRAY_SIZE],w=Bw[y];if(w===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${y}`);if(x===Dw)throw new Error("DDSParser does not support cubemap textures");if(_===6)throw new Error("DDSParser does not supported 3D texture data");const S=new Array,C=fd+Zo+r_;if(b===1)S.push(new Uint8Array(s,C));else{const U=Tu[w];let O=0,P=l,B=n;for(let D=0;D<o;D++){const $=Math.max(1,P+3&-4),nt=Math.max(1,B+3&-4),lt=$*nt*U;O+=lt,P=P>>>1,B=B>>>1}let j=C;for(let D=0;D<b;D++)S.push(new Uint8Array(s,j,O)),j+=O}return S.map(U=>new Wn(U,{format:w,width:l,height:n,levels:o}))}throw c&Tw?new Error("DDSParser does not support uncompressed texture data."):c&Sw?new Error("DDSParser does not supported YUV uncompressed texture data."):c&Aw?new Error("DDSParser does not support single-channel (lumninance) texture data!"):c&bw?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const n_=[171,75,84,88,32,49,49,187,13,10,26,10],Iw=67305985,Oi={ENDIANNESS:12,GL_TYPE:16,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Zd=64,s_={[wt.UNSIGNED_BYTE]:1,[wt.UNSIGNED_SHORT]:2,[wt.INT]:4,[wt.UNSIGNED_INT]:4,[wt.FLOAT]:4,[wt.HALF_FLOAT]:8},Uw={[ht.RGBA]:4,[ht.RGB]:3,[ht.RG]:2,[ht.RED]:1,[ht.LUMINANCE]:1,[ht.LUMINANCE_ALPHA]:2,[ht.ALPHA]:1},Lw={[wt.UNSIGNED_SHORT_4_4_4_4]:2,[wt.UNSIGNED_SHORT_5_5_5_1]:2,[wt.UNSIGNED_SHORT_5_6_5]:2};function Pw(s,t,i=!1){const n=new DataView(t);if(!Fw(s,n))return null;const l=n.getUint32(Oi.ENDIANNESS,!0)===Iw,o=n.getUint32(Oi.GL_TYPE,l),h=n.getUint32(Oi.GL_FORMAT,l),c=n.getUint32(Oi.GL_INTERNAL_FORMAT,l),p=n.getUint32(Oi.PIXEL_WIDTH,l),m=n.getUint32(Oi.PIXEL_HEIGHT,l)||1,g=n.getUint32(Oi.PIXEL_DEPTH,l)||1,y=n.getUint32(Oi.NUMBER_OF_ARRAY_ELEMENTS,l)||1,_=n.getUint32(Oi.NUMBER_OF_FACES,l),x=n.getUint32(Oi.NUMBER_OF_MIPMAP_LEVELS,l),b=n.getUint32(Oi.BYTES_OF_KEY_VALUE_DATA,l);if(m===0||g!==1)throw new Error("Only 2D textures are supported");if(_!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(y!==1)throw new Error("WebGL does not support array textures");const w=4,S=4,C=p+3&-4,U=m+3&-4,O=new Array(y);let P=p*m;o===0&&(P=C*U);let B;if(o!==0?s_[o]?B=s_[o]*Uw[h]:B=Lw[o]:B=Tu[c],B===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const j=i?zw(n,b,l):null;let D=P*B,$=p,nt=m,lt=C,it=U,H=Zd+b;for(let J=0;J<x;J++){const Q=n.getUint32(H,l);let pt=H+4;for(let E=0;E<y;E++){let R=O[E];R||(R=O[E]=new Array(x)),R[J]={levelID:J,levelWidth:x>1||o!==0?$:lt,levelHeight:x>1||o!==0?nt:it,levelBuffer:new Uint8Array(t,pt,D)},pt+=D}H+=Q+4,H=H%4!==0?H+4-H%4:H,$=$>>1||1,nt=nt>>1||1,lt=$+w-1&-4,it=nt+S-1&-4,D=lt*it*B}return o!==0?{uncompressed:O.map(J=>{let Q=J[0].levelBuffer,pt=!1;return o===wt.FLOAT?Q=new Float32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4):o===wt.UNSIGNED_INT?(pt=!0,Q=new Uint32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)):o===wt.INT&&(pt=!0,Q=new Int32Array(J[0].levelBuffer.buffer,J[0].levelBuffer.byteOffset,J[0].levelBuffer.byteLength/4)),{resource:new Mu(Q,{width:J[0].levelWidth,height:J[0].levelHeight}),type:o,format:pt?Gw(h):h}}),kvData:j}:{compressed:O.map(J=>new Wn(null,{format:c,width:p,height:m,levels:x,levelBuffers:J})),kvData:j}}function Fw(s,t){for(let i=0;i<n_.length;i++)if(t.getUint8(i)!==n_[i])return console.error(`${s} is not a valid *.ktx file!`),!1;return!0}function Gw(s){switch(s){case ht.RGBA:return ht.RGBA_INTEGER;case ht.RGB:return ht.RGB_INTEGER;case ht.RG:return ht.RG_INTEGER;case ht.RED:return ht.RED_INTEGER;default:return s}}function zw(s,t,i){const n=new Map;let l=0;for(;l<t;){const o=s.getUint32(Zd+l,i),h=Zd+l+4,c=3-(o+3)%4;if(o===0||o>t-l){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let p=0;for(;p<o&&s.getUint8(h+p)!==0;p++);if(p===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const m=new TextDecoder().decode(new Uint8Array(s.buffer,h,p)),g=new DataView(s.buffer,h+p+1,o-p-1);n.set(m,g),l+=4+o+c}return n}const Hw={extension:{type:dt.LoadParser,priority:Fi.High},name:"loadDDS",test(s){return yn(s,".dds")},async load(s,t,i){const n=await(await gt.ADAPTER.fetch(s)).arrayBuffer(),l=Nw(n).map(o=>{const h=new It(o,{mipmap:er.OFF,alphaMode:Je.NO_PREMULTIPLIED_ALPHA,resolution:Dr(s),...t.data});return _l(h,i,s)});return l.length===1?l[0]:l},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};St.add(Hw);const kw={extension:{type:dt.LoadParser,priority:Fi.High},name:"loadKTX",test(s){return yn(s,".ktx")},async load(s,t,i){const n=await(await gt.ADAPTER.fetch(s)).arrayBuffer(),{compressed:l,uncompressed:o,kvData:h}=Pw(s,n),c=l??o,p={mipmap:er.OFF,alphaMode:Je.NO_PREMULTIPLIED_ALPHA,resolution:Dr(s),...t.data},m=c.map(g=>{c===o&&Object.assign(p,{type:g.type,format:g.format});const y=g.resource??g,_=new It(y,p);return _.ktxKeyValueData=h,_l(_,i,s)});return m.length===1?m[0]:m},unload(s){Array.isArray(s)?s.forEach(t=>t.destroy(!0)):s.destroy(!0)}};St.add(kw);const Xw=["s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"],Vw={extension:dt.ResolveParser,test:s=>{const t=Oe.extname(s).slice(1);return["basis","ktx","dds"].includes(t)},parse:s=>{const t=s.split("."),i=t.pop();if(["ktx","dds"].includes(i)){const n=t.pop();if(Xw.includes(n))return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:n,src:s}}return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:i,src:s}}};St.add(Vw);const Jo=new Ut,jw=4,Ox=class fl{constructor(t){this.renderer=t,this._rendererPremultipliedAlpha=!1}contextChange(){const t=this.renderer?.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}async image(t,i,n,l){const o=new Image;return o.src=await this.base64(t,i,n,l),o}async base64(t,i,n,l){const o=this.canvas(t,l);if(o.toBlob!==void 0)return new Promise((h,c)=>{o.toBlob(p=>{if(!p){c(new Error("ICanvas.toBlob failed!"));return}const m=new FileReader;m.onload=()=>h(m.result),m.onerror=c,m.readAsDataURL(p)},i,n)});if(o.toDataURL!==void 0)return o.toDataURL(i,n);if(o.convertToBlob!==void 0){const h=await o.convertToBlob({type:i,quality:n});return new Promise((c,p)=>{const m=new FileReader;m.onload=()=>c(m.result),m.onerror=p,m.readAsDataURL(h)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,i){const{pixels:n,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,i);h&&fl._flipY(n,l,o),c&&fl._unpremultiplyAlpha(n);const p=new AT(l,o,1),m=new ImageData(new Uint8ClampedArray(n.buffer),l,o);return p.context.putImageData(m,0,0),p.canvas}pixels(t,i){const{pixels:n,width:l,height:o,flipY:h,premultipliedAlpha:c}=this._rawPixels(t,i);return h&&fl._flipY(n,l,o),c&&fl._unpremultiplyAlpha(n),n}_rawPixels(t,i){const n=this.renderer;if(!n)throw new Error("The Extract has already been destroyed");let l,o=!1,h=!1,c,p=!1;t&&(t instanceof Jn?c=t:(c=n.generateTexture(t,{region:i,resolution:n.resolution,multisample:n.multisample}),p=!0,i&&(Jo.width=i.width,Jo.height=i.height,i=Jo)));const m=n.gl;if(c){if(l=c.baseTexture.resolution,i=i??c.frame,o=!1,h=c.baseTexture.alphaMode>0&&c.baseTexture.format===ht.RGBA,!p){n.renderTexture.bind(c);const x=c.framebuffer.glFramebuffers[n.CONTEXT_UID];x.blitFramebuffer&&n.framebuffer.bind(x.blitFramebuffer)}}else l=n.resolution,i||(i=Jo,i.width=n.width/l,i.height=n.height/l),o=!0,h=this._rendererPremultipliedAlpha,n.renderTexture.bind();const g=Math.max(Math.round(i.width*l),1),y=Math.max(Math.round(i.height*l),1),_=new Uint8Array(jw*g*y);return m.readPixels(Math.round(i.x*l),Math.round(i.y*l),g,y,m.RGBA,m.UNSIGNED_BYTE,_),p&&c?.destroy(!0),{pixels:_,width:g,height:y,flipY:o,premultipliedAlpha:h}}destroy(){this.renderer=null}static _flipY(t,i,n){const l=i<<2,o=n>>1,h=new Uint8Array(l);for(let c=0;c<o;c++){const p=c*l,m=(n-c-1)*l;h.set(t.subarray(p,p+l)),t.copyWithin(p,m,m+l),t.set(h,m)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const i=t.length;for(let n=0;n<i;n+=4){const l=t[n+3];if(l!==0){const o=255.001/l;t[n]=t[n]*o+.5,t[n+1]=t[n+1]*o+.5,t[n+2]=t[n+2]*o+.5}}}};Ox.extension={name:"extract",type:dt.RendererSystem};let qw=Ox;St.add(qw);const Su={build(s){const t=s.points;let i,n,l,o,h,c;if(s.type===Ge.CIRC){const b=s.shape;i=b.x,n=b.y,h=c=b.radius,l=o=0}else if(s.type===Ge.ELIP){const b=s.shape;i=b.x,n=b.y,h=b.width,c=b.height,l=o=0}else{const b=s.shape,w=b.width/2,S=b.height/2;i=b.x+w,n=b.y+S,h=c=Math.max(0,Math.min(b.radius,Math.min(w,S))),l=w-h,o=S-c}if(!(h>=0&&c>=0&&l>=0&&o>=0)){t.length=0;return}const p=Math.ceil(2.3*Math.sqrt(h+c)),m=p*8+(l?4:0)+(o?4:0);if(t.length=m,m===0)return;if(p===0){t.length=8,t[0]=t[6]=i+l,t[1]=t[3]=n+o,t[2]=t[4]=i-l,t[5]=t[7]=n-o;return}let g=0,y=p*4+(l?2:0)+2,_=y,x=m;{const b=l+h,w=o,S=i+b,C=i-b,U=n+w;if(t[g++]=S,t[g++]=U,t[--y]=U,t[--y]=C,o){const O=n-w;t[_++]=C,t[_++]=O,t[--x]=O,t[--x]=S}}for(let b=1;b<p;b++){const w=Math.PI/2*(b/p),S=l+Math.cos(w)*h,C=o+Math.sin(w)*c,U=i+S,O=i-S,P=n+C,B=n-C;t[g++]=U,t[g++]=P,t[--y]=P,t[--y]=O,t[_++]=O,t[_++]=B,t[--x]=B,t[--x]=U}{const b=l,w=o+c,S=i+b,C=i-b,U=n+w,O=n-w;t[g++]=S,t[g++]=U,t[--x]=O,t[--x]=S,l&&(t[g++]=C,t[g++]=U,t[--x]=O,t[--x]=C)}},triangulate(s,t){const i=s.points,n=t.points,l=t.indices;if(i.length===0)return;let o=n.length/2;const h=o;let c,p;if(s.type!==Ge.RREC){const g=s.shape;c=g.x,p=g.y}else{const g=s.shape;c=g.x+g.width/2,p=g.y+g.height/2}const m=s.matrix;n.push(s.matrix?m.a*c+m.c*p+m.tx:c,s.matrix?m.b*c+m.d*p+m.ty:p),o++,n.push(i[0],i[1]);for(let g=2;g<i.length;g+=2)n.push(i[g],i[g+1]),l.push(o++,h,o);l.push(h+1,h,o)}};function a_(s,t=!1){const i=s.length;if(i<6)return;let n=0;for(let l=0,o=s[i-2],h=s[i-1];l<i;l+=2){const c=s[l],p=s[l+1];n+=(c-o)*(p+h),o=c,h=p}if(!t&&n>0||t&&n<=0){const l=i/2;for(let o=l+l%2;o<i;o+=2){const h=i-o-2,c=i-o-1,p=o,m=o+1;[s[h],s[p]]=[s[p],s[h]],[s[c],s[m]]=[s[m],s[c]]}}}const Bx={build(s){s.points=s.shape.points.slice()},triangulate(s,t){let i=s.points;const n=s.holes,l=t.points,o=t.indices;if(i.length>=6){a_(i,!1);const h=[];for(let m=0;m<n.length;m++){const g=n[m];a_(g.points,!0),h.push(i.length/2),i=i.concat(g.points)}const c=TE(i,h,2);if(!c)return;const p=l.length/2;for(let m=0;m<c.length;m+=3)o.push(c[m]+p),o.push(c[m+1]+p),o.push(c[m+2]+p);for(let m=0;m<i.length;m++)l.push(i[m])}}},Yw={build(s){const t=s.shape,i=t.x,n=t.y,l=t.width,o=t.height,h=s.points;h.length=0,l>=0&&o>=0&&h.push(i,n,i+l,n,i+l,n+o,i,n+o)},triangulate(s,t){const i=s.points,n=t.points;if(i.length===0)return;const l=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(l,l+1,l+2,l+1,l+2,l+3)}},$w={build(s){Su.build(s)},triangulate(s,t){Su.triangulate(s,t)}};var Ti=(s=>(s.MITER="miter",s.BEVEL="bevel",s.ROUND="round",s))(Ti||{}),dn=(s=>(s.BUTT="butt",s.ROUND="round",s.SQUARE="square",s))(dn||{});const ia={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(s,t=20){if(!this.adaptive||!s||isNaN(s))return t;let i=Math.ceil(s/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class l_{static curveTo(t,i,n,l,o,h){const c=h[h.length-2],p=h[h.length-1]-i,m=c-t,g=l-i,y=n-t,_=Math.abs(p*y-m*g);if(_<1e-8||o===0)return(h[h.length-2]!==t||h[h.length-1]!==i)&&h.push(t,i),null;const x=p*p+m*m,b=g*g+y*y,w=p*g+m*y,S=o*Math.sqrt(x)/_,C=o*Math.sqrt(b)/_,U=S*w/x,O=C*w/b,P=S*y+C*m,B=S*g+C*p,j=m*(C+U),D=p*(C+U),$=y*(S+O),nt=g*(S+O),lt=Math.atan2(D-B,j-P),it=Math.atan2(nt-B,$-P);return{cx:P+t,cy:B+i,radius:o,startAngle:lt,endAngle:it,anticlockwise:m*g>y*p}}static arc(t,i,n,l,o,h,c,p,m){const g=c-h,y=ia._segmentsCount(Math.abs(g)*o,Math.ceil(Math.abs(g)/mu)*40),_=g/(y*2),x=_*2,b=Math.cos(_),w=Math.sin(_),S=y-1,C=S%1/S;for(let U=0;U<=S;++U){const O=U+C*U,P=_+h+x*O,B=Math.cos(P),j=-Math.sin(P);m.push((b*B+w*j)*o+n,(b*-j+w*B)*o+l)}}}class Ww{constructor(){this.reset()}begin(t,i,n){this.reset(),this.style=t,this.start=i,this.attribStart=n}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class fp{static curveLength(t,i,n,l,o,h,c,p){let m=0,g=0,y=0,_=0,x=0,b=0,w=0,S=0,C=0,U=0,O=0,P=t,B=i;for(let j=1;j<=10;++j)g=j/10,y=g*g,_=y*g,x=1-g,b=x*x,w=b*x,S=w*t+3*b*g*n+3*x*y*o+_*c,C=w*i+3*b*g*l+3*x*y*h+_*p,U=P-S,O=B-C,P=S,B=C,m+=Math.sqrt(U*U+O*O);return m}static curveTo(t,i,n,l,o,h,c){const p=c[c.length-2],m=c[c.length-1];c.length-=2;const g=ia._segmentsCount(fp.curveLength(p,m,t,i,n,l,o,h));let y=0,_=0,x=0,b=0,w=0;c.push(p,m);for(let S=1,C=0;S<=g;++S)C=S/g,y=1-C,_=y*y,x=_*y,b=C*C,w=b*C,c.push(x*p+3*_*C*t+3*y*b*n+w*o,x*m+3*_*C*i+3*y*b*l+w*h)}}function o_(s,t,i,n,l,o,h,c){const p=s-i*l,m=t-n*l,g=s+i*o,y=t+n*o;let _,x;h?(_=n,x=-i):(_=-n,x=i);const b=p+_,w=m+x,S=g+_,C=y+x;return c.push(b,w,S,C),2}function zn(s,t,i,n,l,o,h,c){const p=i-s,m=n-t;let g=Math.atan2(p,m),y=Math.atan2(l-s,o-t);c&&g<y?g+=Math.PI*2:!c&&g>y&&(y+=Math.PI*2);let _=g;const x=y-g,b=Math.abs(x),w=Math.sqrt(p*p+m*m),S=(15*b*Math.sqrt(w)/Math.PI>>0)+1,C=x/S;if(_+=C,c){h.push(s,t,i,n);for(let U=1,O=_;U<S;U++,O+=C)h.push(s,t,s+Math.sin(O)*w,t+Math.cos(O)*w);h.push(s,t,l,o)}else{h.push(i,n,s,t);for(let U=1,O=_;U<S;U++,O+=C)h.push(s+Math.sin(O)*w,t+Math.cos(O)*w,s,t);h.push(l,o,s,t)}return S*2}function Zw(s,t){const i=s.shape;let n=s.points||i.points.slice();const l=t.closePointEps;if(n.length===0)return;const o=s.lineStyle,h=new Vt(n[0],n[1]),c=new Vt(n[n.length-2],n[n.length-1]),p=i.type!==Ge.POLY||i.closeStroke,m=Math.abs(h.x-c.x)<l&&Math.abs(h.y-c.y)<l;if(p){n=n.slice(),m&&(n.pop(),n.pop(),c.set(n[n.length-2],n[n.length-1]));const R=(h.x+c.x)*.5,M=(c.y+h.y)*.5;n.unshift(R,M),n.push(R,M)}const g=t.points,y=n.length/2;let _=n.length;const x=g.length/2,b=o.width/2,w=b*b,S=o.miterLimit*o.miterLimit;let C=n[0],U=n[1],O=n[2],P=n[3],B=0,j=0,D=-(U-P),$=C-O,nt=0,lt=0,it=Math.sqrt(D*D+$*$);D/=it,$/=it,D*=b,$*=b;const H=o.alignment,J=(1-H)*2,Q=H*2;p||(o.cap===dn.ROUND?_+=zn(C-D*(J-Q)*.5,U-$*(J-Q)*.5,C-D*J,U-$*J,C+D*Q,U+$*Q,g,!0)+2:o.cap===dn.SQUARE&&(_+=o_(C,U,D,$,J,Q,!0,g))),g.push(C-D*J,U-$*J,C+D*Q,U+$*Q);for(let R=1;R<y-1;++R){C=n[(R-1)*2],U=n[(R-1)*2+1],O=n[R*2],P=n[R*2+1],B=n[(R+1)*2],j=n[(R+1)*2+1],D=-(U-P),$=C-O,it=Math.sqrt(D*D+$*$),D/=it,$/=it,D*=b,$*=b,nt=-(P-j),lt=O-B,it=Math.sqrt(nt*nt+lt*lt),nt/=it,lt/=it,nt*=b,lt*=b;const M=O-C,z=U-P,I=O-B,T=j-P,N=M*I+z*T,F=z*I-T*M,X=F<0;if(Math.abs(F)<.001*Math.abs(N)){g.push(O-D*J,P-$*J,O+D*Q,P+$*Q),N>=0&&(o.join===Ti.ROUND?_+=zn(O,P,O-D*J,P-$*J,O-nt*J,P-lt*J,g,!1)+4:_+=2,g.push(O-nt*Q,P-lt*Q,O+nt*J,P+lt*J));continue}const tt=(-D+C)*(-$+P)-(-D+O)*(-$+U),at=(-nt+B)*(-lt+P)-(-nt+O)*(-lt+j),ot=(M*at-I*tt)/F,ft=(T*tt-z*at)/F,ct=(ot-O)*(ot-O)+(ft-P)*(ft-P),ut=O+(ot-O)*J,vt=P+(ft-P)*J,xt=O-(ot-O)*Q,Dt=P-(ft-P)*Q,Ot=Math.min(M*M+z*z,I*I+T*T),_t=X?J:Q,bt=Ot+_t*_t*w,oe=ct<=bt;let fe=o.join;if(fe===Ti.MITER&&ct/w>S&&(fe=Ti.BEVEL),oe)switch(fe){case Ti.MITER:{g.push(ut,vt,xt,Dt);break}case Ti.BEVEL:{X?g.push(ut,vt,O+D*Q,P+$*Q,ut,vt,O+nt*Q,P+lt*Q):g.push(O-D*J,P-$*J,xt,Dt,O-nt*J,P-lt*J,xt,Dt),_+=2;break}case Ti.ROUND:{X?(g.push(ut,vt,O+D*Q,P+$*Q),_+=zn(O,P,O+D*Q,P+$*Q,O+nt*Q,P+lt*Q,g,!0)+4,g.push(ut,vt,O+nt*Q,P+lt*Q)):(g.push(O-D*J,P-$*J,xt,Dt),_+=zn(O,P,O-D*J,P-$*J,O-nt*J,P-lt*J,g,!1)+4,g.push(O-nt*J,P-lt*J,xt,Dt));break}}else{switch(g.push(O-D*J,P-$*J,O+D*Q,P+$*Q),fe){case Ti.MITER:{X?g.push(xt,Dt,xt,Dt):g.push(ut,vt,ut,vt),_+=2;break}case Ti.ROUND:{X?_+=zn(O,P,O+D*Q,P+$*Q,O+nt*Q,P+lt*Q,g,!0)+2:_+=zn(O,P,O-D*J,P-$*J,O-nt*J,P-lt*J,g,!1)+2;break}}g.push(O-nt*J,P-lt*J,O+nt*Q,P+lt*Q),_+=2}}C=n[(y-2)*2],U=n[(y-2)*2+1],O=n[(y-1)*2],P=n[(y-1)*2+1],D=-(U-P),$=C-O,it=Math.sqrt(D*D+$*$),D/=it,$/=it,D*=b,$*=b,g.push(O-D*J,P-$*J,O+D*Q,P+$*Q),p||(o.cap===dn.ROUND?_+=zn(O-D*(J-Q)*.5,P-$*(J-Q)*.5,O-D*J,P-$*J,O+D*Q,P+$*Q,g,!1)+2:o.cap===dn.SQUARE&&(_+=o_(O,P,D,$,J,Q,!1,g)));const pt=t.indices,E=ia.epsilon*ia.epsilon;for(let R=x;R<_+x-2;++R)C=g[R*2],U=g[R*2+1],O=g[(R+1)*2],P=g[(R+1)*2+1],B=g[(R+2)*2],j=g[(R+2)*2+1],!(Math.abs(C*(P-j)+O*(j-U)+B*(U-P))<E)&&pt.push(R,R+1,R+2)}function Kw(s,t){let i=0;const n=s.shape,l=s.points||n.points,o=n.type!==Ge.POLY||n.closeStroke;if(l.length===0)return;const h=t.points,c=t.indices,p=l.length/2,m=h.length/2;let g=m;for(h.push(l[0],l[1]),i=1;i<p;i++)h.push(l[i*2],l[i*2+1]),c.push(g,g+1),g++;o&&c.push(g,m)}function u_(s,t){s.lineStyle.native?Kw(s,t):Zw(s,t)}class dp{static curveLength(t,i,n,l,o,h){const c=t-2*n+o,p=i-2*l+h,m=2*n-2*t,g=2*l-2*i,y=4*(c*c+p*p),_=4*(c*m+p*g),x=m*m+g*g,b=2*Math.sqrt(y+_+x),w=Math.sqrt(y),S=2*y*w,C=2*Math.sqrt(x),U=_/w;return(S*b+w*_*(b-C)+(4*x*y-_*_)*Math.log((2*w+U+b)/(U+C)))/(4*S)}static curveTo(t,i,n,l,o){const h=o[o.length-2],c=o[o.length-1],p=ia._segmentsCount(dp.curveLength(h,c,t,i,n,l));let m=0,g=0;for(let y=1;y<=p;++y){const _=y/p;m=h+(t-h)*_,g=c+(i-c)*_,o.push(m+(t+(n-t)*_-m)*_,g+(i+(l-i)*_-g)*_)}}}const dd={[Ge.POLY]:Bx,[Ge.CIRC]:Su,[Ge.ELIP]:Su,[Ge.RECT]:Yw,[Ge.RREC]:$w},h_=[],tu=[];class Au{constructor(t,i=null,n=null,l=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=i,this.matrix=l,this.type=t.type}clone(){return new Au(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ks=new Vt,Nx=class Ix extends F_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new xu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),tu.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const i=this.batches[t];i.reset(),h_.push(i)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,i=null,n=null,l=null){const o=new Au(t,i,n,l);return this.graphicsData.push(o),this.dirty++,this}drawHole(t,i=null){if(!this.graphicsData.length)return null;const n=new Au(t,null,null,i),l=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=l.lineStyle,l.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const i=this.graphicsData;for(let n=0;n<i.length;++n){const l=i[n];if(l.fillStyle.visible&&l.shape&&(l.matrix?l.matrix.applyInverse(t,ks):ks.copyFrom(t),l.shape.contains(ks.x,ks.y))){let o=!1;if(l.holes){for(let h=0;h<l.holes.length;h++)if(l.holes[h].shape.contains(ks.x,ks.y)){o=!0;break}}if(!o)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,i=this.graphicsData;let n=null,l=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],l=n.style);for(let p=this.shapeIndex;p<i.length;p++){this.shapeIndex++;const m=i[p],g=m.fillStyle,y=m.lineStyle;dd[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(g.visible||y.visible)&&this.processHoles(m.holes);for(let _=0;_<2;_++){const x=_===0?g:y;if(!x.visible)continue;const b=x.texture.baseTexture,w=this.indices.length,S=this.points.length/2;b.wrapMode=pn.REPEAT,_===0?this.processFill(m):this.processLine(m);const C=this.points.length/2-S;C!==0&&(n&&!this._compareStyles(l,x)&&(n.end(w,S),n=null),n||(n=h_.pop()||new Ww,n.begin(x,w,S),this.batches.push(n),l=x),this.addUvs(this.points,t,x.texture,S,C,x.matrix))}}const o=this.indices.length,h=this.points.length/2;if(n&&n.end(o,h),this.batches.length===0){this.batchable=!0;return}const c=h>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&c===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=c?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,i){return!(!t||!i||t.texture.baseTexture!==i.texture.baseTexture||t.color+t.alpha!==i.color+i.alpha||!!t.native!=!!i.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,i=this.graphicsData.length;t<i;t++){const n=this.graphicsData[t],l=n.fillStyle,o=n.lineStyle;if(l&&!l.texture.baseTexture.valid||o&&!o.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let i=0,n=t.length;i<n;i++){const l=t[i];for(let o=0;o<l.size;o++){const h=l.start+o;this.indicesUint16[h]=this.indicesUint16[h]-l.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let i=0;i<t.length;i++)if(t[i].style.native)return!1;return this.points.length<Ix.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++It._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),tu.push(this.drawCalls[y]);this.drawCalls.length=0;const i=this.colors,n=this.textureIds;let l=tu.pop();l||(l=new Rd,l.texArray=new Bd),l.texArray.count=0,l.start=0,l.size=0,l.type=Qi.TRIANGLES;let o=0,h=null,c=0,p=!1,m=Qi.TRIANGLES,g=0;this.drawCalls.push(l);for(let y=0;y<this.batches.length;y++){const _=this.batches[y],x=8,b=_.style,w=b.texture.baseTexture;p!==!!b.native&&(p=!!b.native,m=p?Qi.LINES:Qi.TRIANGLES,h=null,o=x,t++),h!==w&&(h=w,w._batchEnabled!==t&&(o===x&&(t++,o=0,l.size>0&&(l=tu.pop(),l||(l=new Rd,l.texArray=new Bd),this.drawCalls.push(l)),l.start=g,l.size=0,l.texArray.count=0,l.type=m),w.touched=1,w._batchEnabled=t,w._batchLocation=o,w.wrapMode=pn.REPEAT,l.texArray.elements[l.texArray.count++]=w,o++)),l.size+=_.size,g+=_.size,c=w._batchLocation,this.addColors(i,b.color,b.alpha,_.attribSize,_.attribStart),this.addTextureIds(n,c,_.attribSize,_.attribStart)}It._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,i=this.uvs,n=this.colors,l=this.textureIds,o=new ArrayBuffer(t.length*3*4),h=new Float32Array(o),c=new Uint32Array(o);let p=0;for(let m=0;m<t.length/2;m++)h[p++]=t[m*2],h[p++]=t[m*2+1],h[p++]=i[m*2],h[p++]=i[m*2+1],c[p++]=n[m],h[p++]=l[m];this._buffer.update(o),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Bx.triangulate(t,this):dd[t.type].triangulate(t,this)}processLine(t){u_(t,this);for(let i=0;i<t.holes.length;i++)u_(t.holes[i],this)}processHoles(t){for(let i=0;i<t.length;i++){const n=t[i];dd[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,i){for(let n=0;n<t.length/2;n++){const l=t[n*2],o=t[n*2+1];t[n*2]=i.a*l+i.c*o+i.tx,t[n*2+1]=i.b*l+i.d*o+i.ty}}addColors(t,i,n,l,o=0){const h=se.shared.setValue(i).toLittleEndianNumber(),c=se.shared.setValue(h).toPremultiplied(n);t.length=Math.max(t.length,o+l);for(let p=0;p<l;p++)t[o+p]=c}addTextureIds(t,i,n,l=0){t.length=Math.max(t.length,l+n);for(let o=0;o<n;o++)t[l+o]=i}addUvs(t,i,n,l,o,h=null){let c=0;const p=i.length,m=n.frame;for(;c<o;){let y=t[(l+c)*2],_=t[(l+c)*2+1];if(h){const x=h.a*y+h.c*_+h.tx;_=h.b*y+h.d*_+h.ty,y=x}c++,i.push(y/m.width,_/m.height)}const g=n.baseTexture;(m.width<g.width||m.height<g.height)&&this.adjustUvs(i,n,p,o)}adjustUvs(t,i,n,l){const o=i.baseTexture,h=1e-6,c=n+l*2,p=i.frame,m=p.width/o.width,g=p.height/o.height;let y=p.x/p.width,_=p.y/p.height,x=Math.floor(t[n]+h),b=Math.floor(t[n+1]+h);for(let w=n+2;w<c;w+=2)x=Math.min(x,Math.floor(t[w]+h)),b=Math.min(b,Math.floor(t[w+1]+h));y-=x,_-=b;for(let w=n;w<c;w+=2)t[w]=(t[w]+y)*m,t[w+1]=(t[w+1]+_)*g}};Nx.BATCHABLE_SIZE=100;let Qw=Nx;class Uu{constructor(){this.color=16777215,this.alpha=1,this.texture=Tt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new Uu;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=Tt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class pp extends Uu{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=dn.BUTT,this.join=Ti.MITER,this.miterLimit=10}clone(){const t=new pp;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=dn.BUTT,this.join=Ti.MITER,this.miterLimit=10}}const pd={},Kd=class uu extends Pi{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Uu,this._lineStyle=new pp,this._matrix=null,this._holeMode=!1,this.state=ir.for2d(),this._geometry=t||new Qw,this._geometry.refCount++,this._transformID=-1,this._tintColor=new se(16777215),this.blendMode=Mt.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new uu(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,i=0,n,l=.5,o=!1){return typeof t=="number"&&(t={width:t,color:i,alpha:n,alignment:l,native:o}),this.lineTextureStyle(t)}lineTextureStyle(t){const i={width:0,texture:Tt.WHITE,color:t?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:dn.BUTT,join:Ti.MITER,miterLimit:10};t=Object.assign(i,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.width>0&&t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:n},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,i=this.currentPath.points.length;i>2&&(this.drawShape(this.currentPath),this.currentPath=new $n,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[i-2],t[i-1]))}else this.currentPath=new $n,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,i){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=i,this}lineTo(t,i){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,l=n[n.length-2],o=n[n.length-1];return(l!==t||o!==i)&&n.push(t,i),this}_initCurve(t=0,i=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,i]):this.moveTo(t,i)}quadraticCurveTo(t,i,n,l){this._initCurve();const o=this.currentPath.points;return o.length===0&&this.moveTo(0,0),dp.curveTo(t,i,n,l,o),this}bezierCurveTo(t,i,n,l,o,h){return this._initCurve(),fp.curveTo(t,i,n,l,o,h,this.currentPath.points),this}arcTo(t,i,n,l,o){this._initCurve(t,i);const h=this.currentPath.points,c=l_.curveTo(t,i,n,l,o,h);if(c){const{cx:p,cy:m,radius:g,startAngle:y,endAngle:_,anticlockwise:x}=c;this.arc(p,m,g,y,_,x)}return this}arc(t,i,n,l,o,h=!1){if(l===o)return this;if(!h&&o<=l?o+=mu:h&&l<=o&&(l+=mu),o-l===0)return this;const c=t+Math.cos(l)*n,p=i+Math.sin(l)*n,m=this._geometry.closePointEps;let g=this.currentPath?this.currentPath.points:null;if(g){const y=Math.abs(g[g.length-2]-c),_=Math.abs(g[g.length-1]-p);y<m&&_<m||g.push(c,p)}else this.moveTo(c,p),g=this.currentPath.points;return l_.arc(c,p,t,i,n,l,o,h,g),this}beginFill(t=0,i){return this.beginTextureFill({texture:Tt.WHITE,color:t,alpha:i})}normalizeColor(t){const i=se.shared.setValue(t.color??0);t.color=i.toNumber(),t.alpha??(t.alpha=i.alpha)}beginTextureFill(t){const i={texture:Tt.WHITE,color:16777215,matrix:null};t=Object.assign(i,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const n=t.alpha>0;return n?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:n},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,i,n,l){return this.drawShape(new Ut(t,i,n,l))}drawRoundedRect(t,i,n,l,o){return this.drawShape(new Bu(t,i,n,l,o))}drawCircle(t,i,n){return this.drawShape(new Du(t,i,n))}drawEllipse(t,i,n,l){return this.drawShape(new Ou(t,i,n,l))}drawPolygon(...t){let i,n=!0;const l=t[0];l.points?(n=l.closeStroke,i=l.points):Array.isArray(t[0])?i=t[0]:i=t;const o=new $n(i);return o.closeStroke=n,this.drawShape(o),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Ge.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const i=this._geometry;i.updateBatches(),i.batchable?(this.batchDirty!==i.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,i=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let l=0;l<n;l++){const o=t.batches[l],h=o.style.color,c=new Float32Array(this.vertexData.buffer,o.attribStart*4*2,o.attribSize*2),p=new Float32Array(t.uvsFloat32.buffer,o.attribStart*4*2,o.attribSize*2),m=new Uint16Array(t.indicesUint16.buffer,o.start*2,o.size),g={vertexData:c,blendMode:i,indices:m,uvs:p,_batchRGB:se.shared.setValue(h).toRgbArray(),_tintRGB:h,_texture:o.style.texture,alpha:o.style.alpha,worldAlpha:1};this.batches[l]=g}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let i=0,n=this.batches.length;i<n;i++){const l=this.batches[i];l.worldAlpha=this.worldAlpha*l.alpha,t.plugins[this.pluginName].render(l)}}}_renderDirect(t){const i=this._resolveDirectShader(t),n=this._geometry,l=this.worldAlpha,o=i.uniforms,h=n.drawCalls;o.translationMatrix=this.transform.worldTransform,se.shared.setValue(this._tintColor).premultiply(l).toArray(o.tint),t.shader.bind(i),t.geometry.bind(n,i),t.state.set(this.state);for(let c=0,p=h.length;c<p;c++)this._renderDrawCallDirect(t,n.drawCalls[c])}_renderDrawCallDirect(t,i){const{texArray:n,type:l,size:o,start:h}=i,c=n.count;for(let p=0;p<c;p++)t.texture.bind(n.elements[p],p);t.geometry.draw(l,o,h)}_resolveDirectShader(t){let i=this.shader;const n=this.pluginName;if(!i){if(!pd[n]){const{maxTextures:l}=t.plugins[n],o=new Int32Array(l);for(let p=0;p<l;p++)o[p]=p;const h={tint:new Float32Array([1,1,1,1]),translationMatrix:new ae,default:Li.from({uSamplers:o},!0)},c=t.plugins[n]._shader.program;pd[n]=new tr(c,h)}i=pd[n]}return i}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:i,minY:n,maxX:l,maxY:o}=t.bounds;this._bounds.addFrame(this.transform,i,n,l,o)}containsPoint(t){return this.worldTransform.applyInverse(t,uu._TEMP_POINT),this._geometry.containsPoint(uu._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const i=this.batches[t];i._tintRGB=se.shared.setValue(this._tintColor).multiply(i._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const i=this.transform.worldTransform,n=i.a,l=i.b,o=i.c,h=i.d,c=i.tx,p=i.ty,m=this._geometry.points,g=this.vertexData;let y=0;for(let _=0;_<m.length;_+=2){const x=m[_],b=m[_+1];g[y++]=n*x+o*b+c,g[y++]=h*b+l*x+p}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};Kd.curves=ia,Kd._TEMP_POINT=new Vt;let mp=Kd;class Jw{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const md=new Vt,c_=new $n,Ux=class Lx extends Pi{constructor(t,i,n,l=Qi.TRIANGLES){super(),this.geometry=t,this.shader=i,this.state=n||ir.for2d(),this.drawMode=l,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=gt.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const i=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Qi.TRIANGLES&&i.length<Lx.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const i=this.shader;i.alpha=this.worldAlpha,i.update&&i.update(),t.batch.flush(),i.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(i),t.state.set(this.state),t.geometry.bind(this.geometry,i),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const i=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=i.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const l=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[l]),t.plugins[l].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const l=this.transform.worldTransform,o=l.a,h=l.b,c=l.c,p=l.d,m=l.tx,g=l.ty,y=this.vertexData;for(let _=0;_<y.length/2;_++){const x=i[_*2],b=i[_*2+1];y[_*2]=o*x+c*b+m,y[_*2+1]=h*x+p*b+g}if(this._roundPixels){const _=gt.RESOLUTION;for(let x=0;x<y.length;++x)y[x]=Math.round(y[x]*_)/_}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],i=this.shader;i.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new Jw(t,i.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,md);const i=this.geometry.getBuffer("aVertexPosition").data,n=c_.points,l=this.geometry.getIndex().data,o=l.length,h=this.drawMode===4?3:1;for(let c=0;c+2<o;c+=h){const p=l[c]*2,m=l[c+1]*2,g=l[c+2]*2;if(n[0]=i[p],n[1]=i[p+1],n[2]=i[m],n[3]=i[m+1],n[4]=i[g],n[5]=i[g+1],c_.contains(md.x,md.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};Ux.BATCHABLE_SIZE=100;let f_=Ux;class tC extends mn{constructor(t,i,n){super();const l=new ve(t),o=new ve(i,!0),h=new ve(n,!0,!0);this.addAttribute("aVertexPosition",l,2,!1,wt.FLOAT).addAttribute("aTextureCoord",o,2,!1,wt.FLOAT).addIndex(h),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var eC=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,iC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class d_ extends tr{constructor(t,i){const n={uSampler:t,alpha:1,uTextureMatrix:ae.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(n,i.uniforms),super(i.program||Mr.from(iC,eC),n),this._colorDirty=!1,this.uvMatrix=new Q_(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new se(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture.alphaMode;se.shared.setValue(this._tintColor).premultiply(this._alpha,t).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class p_{constructor(t,i,n){this.geometry=new mn,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let l=0;l<t.length;++l){let o=t[l];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||wt.FLOAT,offset:o.offset},i[l]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new ve(TT(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];c.offset=i,i+=c.size,this.dynamicStride+=c.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new ve(this.dynamicData,!1,!1);let l=0;this.staticStride=0;for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];c.offset=l,l+=c.size,this.staticStride+=c.size}const o=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(o),this.staticDataUint32=new Uint32Array(o),this.staticBuffer=new ve(this.staticData,!0,!1);for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===wt.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===wt.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(t,i,n){for(let l=0;l<this.dynamicProperties.length;l++){const o=this.dynamicProperties[l];o.uploadFunction(t,i,n,o.type===wt.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,n){for(let l=0;l<this.staticProperties.length;l++){const o=this.staticProperties[l];o.uploadFunction(t,i,n,o.type===wt.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,o.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var rC=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,nC=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Px extends Nu{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new ae,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:wt.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=tr.from(nC,rC,{}),this.state=ir.for2d()}render(t){const i=t.children,n=t._maxSize,l=t._batchSize,o=this.renderer;let h=i.length;if(h===0)return;h>n&&!t.autoResize&&(h=n);let c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));const p=i[0]._texture.baseTexture,m=p.alphaMode>0;this.state.blendMode=U_(t.blendMode,m),o.state.set(this.state);const g=o.gl,y=t.worldTransform.copyTo(this.tempMatrix);y.prepend(o.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=y.toArray(!0),this.shader.uniforms.uColor=se.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,m).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=p,this.renderer.shader.bind(this.shader);let _=!1;for(let x=0,b=0;x<h;x+=l,b+=1){let w=h-x;w>l&&(w=l),b>=c.length&&c.push(this._generateOneMoreBuffer(t));const S=c[b];S.uploadDynamic(i,x,w);const C=t._bufferUpdateIDs[b]||0;_=_||S._updateID<C,_&&(S._updateID=t._updateID,S.uploadStatic(i,x,w)),o.geometry.bind(S.geometry),g.drawElements(g.TRIANGLES,w*6,g.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],n=t._maxSize,l=t._batchSize,o=t._properties;for(let h=0;h<n;h+=l)i.push(new p_(this.properties,o,l));return i}_generateOneMoreBuffer(t){const i=t._batchSize,n=t._properties;return new p_(this.properties,n,i)}uploadVertices(t,i,n,l,o,h){let c=0,p=0,m=0,g=0;for(let y=0;y<n;++y){const _=t[i+y],x=_._texture,b=_.scale.x,w=_.scale.y,S=x.trim,C=x.orig;S?(p=S.x-_.anchor.x*C.width,c=p+S.width,g=S.y-_.anchor.y*C.height,m=g+S.height):(c=C.width*(1-_.anchor.x),p=C.width*-_.anchor.x,m=C.height*(1-_.anchor.y),g=C.height*-_.anchor.y),l[h]=p*b,l[h+1]=g*w,l[h+o]=c*b,l[h+o+1]=g*w,l[h+o*2]=c*b,l[h+o*2+1]=m*w,l[h+o*3]=p*b,l[h+o*3+1]=m*w,h+=o*4}}uploadPosition(t,i,n,l,o,h){for(let c=0;c<n;c++){const p=t[i+c].position;l[h]=p.x,l[h+1]=p.y,l[h+o]=p.x,l[h+o+1]=p.y,l[h+o*2]=p.x,l[h+o*2+1]=p.y,l[h+o*3]=p.x,l[h+o*3+1]=p.y,h+=o*4}}uploadRotation(t,i,n,l,o,h){for(let c=0;c<n;c++){const p=t[i+c].rotation;l[h]=p,l[h+o]=p,l[h+o*2]=p,l[h+o*3]=p,h+=o*4}}uploadUvs(t,i,n,l,o,h){for(let c=0;c<n;++c){const p=t[i+c]._texture._uvs;p?(l[h]=p.x0,l[h+1]=p.y0,l[h+o]=p.x1,l[h+o+1]=p.y1,l[h+o*2]=p.x2,l[h+o*2+1]=p.y2,l[h+o*3]=p.x3,l[h+o*3+1]=p.y3,h+=o*4):(l[h]=0,l[h+1]=0,l[h+o]=0,l[h+o+1]=0,l[h+o*2]=0,l[h+o*2+1]=0,l[h+o*3]=0,l[h+o*3+1]=0,h+=o*4)}}uploadTint(t,i,n,l,o,h){for(let c=0;c<n;++c){const p=t[i+c],m=se.shared.setValue(p._tintRGB).toPremultiplied(p.alpha,p.texture.baseTexture.alphaMode>0);l[h]=m,l[h+o]=m,l[h+o*2]=m,l[h+o*3]=m,h+=o*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Px.extension={name:"particle",type:dt.RendererPlugin};St.add(Px);var Lu=(s=>(s[s.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",s[s.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",s))(Lu||{});const eu={willReadFrequently:!0},Wi=class At{static get experimentalLetterSpacingSupported(){let t=At._experimentalLetterSpacingSupported;if(t!==void 0){const i=gt.ADAPTER.getCanvasRenderingContext2D().prototype;t=At._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return t}constructor(t,i,n,l,o,h,c,p,m){this.text=t,this.style=i,this.width=n,this.height=l,this.lines=o,this.lineWidths=h,this.lineHeight=c,this.maxLineWidth=p,this.fontProperties=m}static measureText(t,i,n,l=At._canvas){n=n??i.wordWrap;const o=i.toFontString(),h=At.measureFont(o);h.fontSize===0&&(h.fontSize=i.fontSize,h.ascent=i.fontSize);const c=l.getContext("2d",eu);c.font=o;const p=(n?At.wordWrap(t,i,l):t).split(/(?:\r\n|\r|\n)/),m=new Array(p.length);let g=0;for(let b=0;b<p.length;b++){const w=At._measureText(p[b],i.letterSpacing,c);m[b]=w,g=Math.max(g,w)}let y=g+i.strokeThickness;i.dropShadow&&(y+=i.dropShadowDistance);const _=i.lineHeight||h.fontSize+i.strokeThickness;let x=Math.max(_,h.fontSize+i.strokeThickness*2)+i.leading+(p.length-1)*(_+i.leading);return i.dropShadow&&(x+=i.dropShadowDistance),new At(t,i,y,x,p,m,_+i.leading,g,h)}static _measureText(t,i,n){let l=!1;At.experimentalLetterSpacingSupported&&(At.experimentalLetterSpacing?(n.letterSpacing=`${i}px`,n.textLetterSpacing=`${i}px`,l=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let o=n.measureText(t).width;return o>0&&(l?o-=i:o+=(At.graphemeSegmenter(t).length-1)*i),o}static wordWrap(t,i,n=At._canvas){const l=n.getContext("2d",eu);let o=0,h="",c="";const p=Object.create(null),{letterSpacing:m,whiteSpace:g}=i,y=At.collapseSpaces(g),_=At.collapseNewlines(g);let x=!y;const b=i.wordWrapWidth+m,w=At.tokenize(t);for(let S=0;S<w.length;S++){let C=w[S];if(At.isNewline(C)){if(!_){c+=At.addLine(h),x=!y,h="",o=0;continue}C=" "}if(y){const O=At.isBreakingSpace(C),P=At.isBreakingSpace(h[h.length-1]);if(O&&P)continue}const U=At.getFromCache(C,m,p,l);if(U>b)if(h!==""&&(c+=At.addLine(h),h="",o=0),At.canBreakWords(C,i.breakWords)){const O=At.wordWrapSplit(C);for(let P=0;P<O.length;P++){let B=O[P],j=B,D=1;for(;O[P+D];){const nt=O[P+D];if(!At.canBreakChars(j,nt,C,P,i.breakWords))B+=nt;else break;j=nt,D++}P+=D-1;const $=At.getFromCache(B,m,p,l);$+o>b&&(c+=At.addLine(h),x=!1,h="",o=0),h+=B,o+=$}}else{h.length>0&&(c+=At.addLine(h),h="",o=0);const O=S===w.length-1;c+=At.addLine(C,!O),x=!1,h="",o=0}else U+o>b&&(x=!1,c+=At.addLine(h),h="",o=0),(h.length>0||!At.isBreakingSpace(C)||x)&&(h+=C,o+=U)}return c+=At.addLine(h,!1),c}static addLine(t,i=!0){return t=At.trimRight(t),t=i?`${t}
`:t,t}static getFromCache(t,i,n,l){let o=n[t];return typeof o!="number"&&(o=At._measureText(t,i,l)+i,n[t]=o),o}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let i=t.length-1;i>=0;i--){const n=t[i];if(!At.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:At._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,i){return typeof t!="string"?!1:At._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const i=[];let n="";if(typeof t!="string")return i;for(let l=0;l<t.length;l++){const o=t[l],h=t[l+1];if(At.isBreakingSpace(o,h)||At.isNewline(o)){n!==""&&(i.push(n),n=""),i.push(o);continue}n+=o}return n!==""&&i.push(n),i}static canBreakWords(t,i){return i}static canBreakChars(t,i,n,l,o){return!0}static wordWrapSplit(t){return At.graphemeSegmenter(t)}static measureFont(t){if(At._fonts[t])return At._fonts[t];const i={ascent:0,descent:0,fontSize:0},n=At._canvas,l=At._context;l.font=t;const o=At.METRICS_STRING+At.BASELINE_SYMBOL,h=Math.ceil(l.measureText(o).width);let c=Math.ceil(l.measureText(At.BASELINE_SYMBOL).width);const p=Math.ceil(At.HEIGHT_MULTIPLIER*c);if(c=c*At.BASELINE_MULTIPLIER|0,h===0||p===0)return At._fonts[t]=i,i;n.width=h,n.height=p,l.fillStyle="#f00",l.fillRect(0,0,h,p),l.font=t,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(o,0,c);const m=l.getImageData(0,0,h,p).data,g=m.length,y=h*4;let _=0,x=0,b=!1;for(_=0;_<c;++_){for(let w=0;w<y;w+=4)if(m[x+w]!==255){b=!0;break}if(!b)x+=y;else break}for(i.ascent=c-_,x=g-y,b=!1,_=p;_>c;--_){for(let w=0;w<y;w+=4)if(m[x+w]!==255){b=!0;break}if(!b)x-=y;else break}return i.descent=_-c,i.fontSize=i.ascent+i.descent,At._fonts[t]=i,i}static clearMetrics(t=""){t?delete At._fonts[t]:At._fonts={}}static get _canvas(){if(!At.__canvas){let t;try{const i=new OffscreenCanvas(0,0);if(i.getContext("2d",eu)?.measureText)return At.__canvas=i,i;t=gt.ADAPTER.createCanvas()}catch{t=gt.ADAPTER.createCanvas()}t.width=t.height=10,At.__canvas=t}return At.__canvas}static get _context(){return At.__context||(At.__context=At._canvas.getContext("2d",eu)),At.__context}};Wi.METRICS_STRING="|q",Wi.BASELINE_SYMBOL="M",Wi.BASELINE_MULTIPLIER=1.4,Wi.HEIGHT_MULTIPLIER=2,Wi.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const s=new Intl.Segmenter;return t=>[...s.segment(t)].map(i=>i.segment)}return s=>[...s]})(),Wi.experimentalLetterSpacing=!1,Wi._fonts={},Wi._newlines=[10,13],Wi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let hn=Wi;const sC=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Fx=class dl{constructor(t){this.styleID=0,this.reset(),yd(this,t,t)}clone(){const t={};return yd(t,this,dl.defaultStyle),new dl(t)}reset(){yd(this,dl.defaultStyle,dl.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const i=gd(t);this._dropShadowColor!==i&&(this._dropShadowColor=i,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const i=gd(t);this._fill!==i&&(this._fill=i,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){aC(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const i=gd(t);this._stroke!==i&&(this._stroke=i,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let i=this.fontFamily;Array.isArray(this.fontFamily)||(i=this.fontFamily.split(","));for(let n=i.length-1;n>=0;n--){let l=i[n].trim();!/([\"\'])[^\'\"]+\1/.test(l)&&!sC.includes(l)&&(l=`"${l}"`),i[n]=l}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${i.join(",")}`}};Fx.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Lu.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let gn=Fx;function gd(s){const t=se.shared,i=n=>{const l=t.setValue(n);return l.alpha===1?l.toHex():l.toRgbaString()};return Array.isArray(s)?s.map(i):i(s)}function aC(s,t){if(!Array.isArray(s)||!Array.isArray(t)||s.length!==t.length)return!1;for(let i=0;i<s.length;++i)if(s[i]!==t[i])return!1;return!0}function yd(s,t,i){for(const n in i)Array.isArray(t[n])?s[n]=t[n].slice():s[n]=t[n]}const lC={texture:!0,children:!1,baseTexture:!0},Gx=class Qd extends na{constructor(t,i,n){let l=!1;n||(n=gt.ADAPTER.createCanvas(),l=!0),n.width=3,n.height=3;const o=Tt.from(n);o.orig=new Ut,o.trim=new Ut,super(o),this._ownCanvas=l,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=Qd.defaultResolution??gt.RESOLUTION,this._autoResolution=Qd.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=i,this.localStyleID=-1}static get experimentalLetterSpacing(){return hn.experimentalLetterSpacing}static set experimentalLetterSpacing(t){zt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),hn.experimentalLetterSpacing=t}updateText(t){const i=this._style;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,l=hn.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=l.width,h=l.height,c=l.lines,p=l.lineHeight,m=l.lineWidths,g=l.maxLineWidth,y=l.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+i.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,h)+i.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=i.strokeThickness,n.textBaseline=i.textBaseline,n.lineJoin=i.lineJoin,n.miterLimit=i.miterLimit;let _,x;const b=i.dropShadow?2:1;for(let w=0;w<b;++w){const S=i.dropShadow&&w===0,C=S?Math.ceil(Math.max(1,h)+i.padding*2):0,U=C*this._resolution;if(S){n.fillStyle="black",n.strokeStyle="black";const P=i.dropShadowColor,B=i.dropShadowBlur*this._resolution,j=i.dropShadowDistance*this._resolution;n.shadowColor=se.shared.setValue(P).setAlpha(i.dropShadowAlpha).toRgbaString(),n.shadowBlur=B,n.shadowOffsetX=Math.cos(i.dropShadowAngle)*j,n.shadowOffsetY=Math.sin(i.dropShadowAngle)*j+U}else n.fillStyle=this._generateFillStyle(i,c,l),n.strokeStyle=i.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let O=(p-y.fontSize)/2;p-y.fontSize<0&&(O=0);for(let P=0;P<c.length;P++)_=i.strokeThickness/2,x=i.strokeThickness/2+P*p+y.ascent+O,i.align==="right"?_+=g-m[P]:i.align==="center"&&(_+=(g-m[P])/2),i.stroke&&i.strokeThickness&&this.drawLetterSpacing(c[P],_+i.padding,x+i.padding-C,!0),i.fill&&this.drawLetterSpacing(c[P],_+i.padding,x+i.padding-C)}this.updateTexture()}drawLetterSpacing(t,i,n,l=!1){const o=this._style.letterSpacing;let h=!1;if(hn.experimentalLetterSpacingSupported&&(hn.experimentalLetterSpacing?(this.context.letterSpacing=`${o}px`,this.context.textLetterSpacing=`${o}px`,h=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),o===0||h){l?this.context.strokeText(t,i,n):this.context.fillText(t,i,n);return}let c=i;const p=hn.graphemeSegmenter(t);let m=this.context.measureText(t).width,g=0;for(let y=0;y<p.length;++y){const _=p[y];l?this.context.strokeText(_,c,n):this.context.fillText(_,c,n);let x="";for(let b=y+1;b<p.length;++b)x+=p[b];g=this.context.measureText(x).width,c+=m-g+o,m=g}}updateTexture(){const t=this.canvas;if(this._style.trim){const h=CT(t);h.data&&(t.width=h.width,t.height=h.height,this.context.putImageData(h.data,0,0))}const i=this._texture,n=this._style,l=n.trim?0:n.padding,o=i.baseTexture;i.trim.width=i._frame.width=t.width/this._resolution,i.trim.height=i._frame.height=t.height/this._resolution,i.trim.x=-l,i.trim.y=-l,i.orig.width=i._frame.width-l*2,i.orig.height=i._frame.height-l*2,this._onTextureUpdate(),o.setRealSize(t.width,t.height,this._resolution),i.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,i){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,i)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,i,n){const l=t.fill;if(Array.isArray(l)){if(l.length===1)return l[0]}else return l;let o;const h=t.dropShadow?t.dropShadowDistance:0,c=t.padding||0,p=this.canvas.width/this._resolution-h-c*2,m=this.canvas.height/this._resolution-h-c*2,g=l.slice(),y=t.fillGradientStops.slice();if(!y.length){const _=g.length+1;for(let x=1;x<_;++x)y.push(x/_)}if(g.unshift(l[0]),y.unshift(0),g.push(l[l.length-1]),y.push(1),t.fillGradientType===Lu.LINEAR_VERTICAL){o=this.context.createLinearGradient(p/2,c,p/2,m+c);const _=n.fontProperties.fontSize+t.strokeThickness;for(let x=0;x<i.length;x++){const b=n.lineHeight*(x-1)+_,w=n.lineHeight*x;let S=w;x>0&&b>w&&(S=(w+b)/2);const C=w+_,U=n.lineHeight*(x+1);let O=C;x+1<i.length&&U<C&&(O=(C+U)/2);const P=(O-S)/m;for(let B=0;B<g.length;B++){let j=0;typeof y[B]=="number"?j=y[B]:j=B/g.length;let D=Math.min(1,Math.max(0,S/m+j*P));D=Number(D.toFixed(5)),o.addColorStop(D,g[B])}}}else{o=this.context.createLinearGradient(c,m/2,p+c,m/2);const _=g.length+1;let x=1;for(let b=0;b<g.length;b++){let w;typeof y[b]=="number"?w=y[b]:w=x/_,o.addColorStop(w,g[b]),x++}}return o}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},lC,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const i=fn(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const i=fn(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof gn?this._style=t:this._style=new gn(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};Gx.defaultAutoResolution=!0;let zx=Gx;class oC{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function uC(s,t){let i=!1;if(s?._textures?.length){for(let n=0;n<s._textures.length;n++)if(s._textures[n]instanceof Tt){const l=s._textures[n].baseTexture;t.includes(l)||(t.push(l),i=!0)}}return i}function hC(s,t){if(s.baseTexture instanceof It){const i=s.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function cC(s,t){if(s._texture&&s._texture instanceof Tt){const i=s._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function fC(s,t){return t instanceof zx?(t.updateText(!0),!0):!1}function dC(s,t){if(t instanceof gn){const i=t.toFontString();return hn.measureFont(i),!0}return!1}function pC(s,t){if(s instanceof zx){t.includes(s.style)||t.push(s.style),t.includes(s)||t.push(s);const i=s._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function mC(s,t){return s instanceof gn?(t.includes(s)||t.push(s),!0):!1}const Hx=class kx{constructor(t){this.limiter=new oC(kx.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(pC),this.registerFindHook(mC),this.registerFindHook(uC),this.registerFindHook(hC),this.registerFindHook(cC),this.registerUploadHook(fC),this.registerUploadHook(dC)}upload(t){return new Promise(i=>{t&&this.add(t),this.queue.length?(this.completes.push(i),this.ticking||(this.ticking=!0,hi.system.addOnce(this.tick,this,Kn.UTILITY))):i()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let i=!1;if(t&&!t._destroyed){for(let n=0,l=this.uploadHooks.length;n<l;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),i=!0;break}}i||this.queue.shift()}if(this.queue.length)hi.system.addOnce(this.tick,this,Kn.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let i=0,n=t.length;i<n;i++)t[i]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let i=0,n=this.addHooks.length;i<n&&!this.addHooks[i](t,this.queue);i++);if(t instanceof Pi)for(let i=t.children.length-1;i>=0;i--)this.add(t.children[i]);return this}destroy(){this.ticking&&hi.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};Hx.uploadsPerFrame=4;let Jd=Hx;Object.defineProperties(gt,{UPLOADS_PER_FRAME:{get(){return Jd.uploadsPerFrame},set(s){zt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Jd.uploadsPerFrame=s}}});function Xx(s,t){return t instanceof It?(t._glTextures[s.CONTEXT_UID]||s.texture.bind(t),!0):!1}function gC(s,t){if(!(t instanceof mp))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:n}=i;for(let l=0;l<n.length;l++){const{texture:o}=n[l].style;o&&Xx(s,o.baseTexture)}return i.batchable||s.geometry.bind(i,t._resolveDirectShader(s)),!0}function yC(s,t){return s instanceof mp?(t.push(s),!0):!1}class Vx extends Jd{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(yC),this.registerUploadHook(Xx),this.registerUploadHook(gC)}}Vx.extension={name:"prepare",type:dt.RendererSystem};St.add(Vx);var vC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,_C=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,xC=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,m_=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,bC=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const iu=new ae;class jx extends Nu{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new $_,this.state=ir.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=tr.from(m_,bC,i),this.shader=t.context.webGLVersion>1?tr.from(_C,vC,i):tr.from(m_,xC,i)}render(t){const i=this.renderer,n=this.quad;let l=n.vertices;l[0]=l[6]=t._width*-t.anchor.x,l[1]=l[3]=t._height*-t.anchor.y,l[2]=l[4]=t._width*(1-t.anchor.x),l[5]=l[7]=t._height*(1-t.anchor.y);const o=t.uvRespectAnchor?t.anchor.x:0,h=t.uvRespectAnchor?t.anchor.y:0;l=n.uvs,l[0]=l[6]=-o,l[1]=l[3]=-h,l[2]=l[4]=1-o,l[5]=l[7]=1-h,n.invalidate();const c=t._texture,p=c.baseTexture,m=p.alphaMode>0,g=t.tileTransform.localTransform,y=t.uvMatrix;let _=p.isPowerOfTwo&&c.frame.width===p.width&&c.frame.height===p.height;_&&(p._glTextures[i.CONTEXT_UID]?_=p.wrapMode!==pn.CLAMP:p.wrapMode===pn.CLAMP&&(p.wrapMode=pn.REPEAT));const x=_?this.simpleShader:this.shader,b=c.width,w=c.height,S=t._width,C=t._height;iu.set(g.a*b/S,g.b*b/C,g.c*w/S,g.d*w/C,g.tx/S,g.ty/C),iu.invert(),_?iu.prepend(y.mapCoord):(x.uniforms.uMapCoord=y.mapCoord.toArray(!0),x.uniforms.uClampFrame=y.uClampFrame,x.uniforms.uClampOffset=y.uClampOffset),x.uniforms.uTransform=iu.toArray(!0),x.uniforms.uColor=se.shared.setValue(t.tint).premultiply(t.worldAlpha,m).toArray(x.uniforms.uColor),x.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),x.uniforms.uSampler=c,i.shader.bind(x),i.geometry.bind(n),this.state.blendMode=U_(t.blendMode,m),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}jx.extension={name:"tilingSprite",type:dt.RendererPlugin};St.add(jx);const qx=class pl{constructor(t,i,n){this.linkedSheets=[],(t instanceof It||t instanceof Tt)&&(t={texture:t,data:i,resolutionFilename:n});const{texture:l,data:o,resolutionFilename:h=null,cachePrefix:c=""}=t;this.cachePrefix=c,this._texture=l instanceof Tt?l:null,this.baseTexture=l instanceof It?l:this._texture.baseTexture,this.textures={},this.animations={},this.data=o;const p=this.baseTexture.resource;this.resolution=this._updateResolution(h||(p?p.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:i}=this.data.meta;let n=Dr(t,null);return n===null&&(n=typeof i=="number"?i:parseFloat(i??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=pl.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let i=t;const n=pl.BATCH_SIZE;for(;i-t<n&&i<this._frameKeys.length;){const l=this._frameKeys[i],o=this._frames[l],h=o.frame;if(h){let c=null,p=null;const m=o.trimmed!==!1&&o.sourceSize?o.sourceSize:o.frame,g=new Ut(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);o.rotated?c=new Ut(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.h)/this.resolution,Math.floor(h.w)/this.resolution):c=new Ut(Math.floor(h.x)/this.resolution,Math.floor(h.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution),o.trimmed!==!1&&o.spriteSourceSize&&(p=new Ut(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(h.w)/this.resolution,Math.floor(h.h)/this.resolution)),this.textures[l]=new Tt(this.baseTexture,c,g,p,o.rotated?2:0,o.anchor,o.borders),Tt.addToCache(this.textures[l],this.cachePrefix+l.toString())}i++}}_processAnimations(){const t=this.data.animations||{};for(const i in t){this.animations[i]=[];for(let n=0;n<t[i].length;n++){const l=t[i][n];this.animations[i].push(this.textures[l])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*pl.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*pl.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};qx.BATCH_SIZE=1e3;let g_=qx;const EC=["jpg","png","jpeg","avif","webp","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc"];function Yx(s,t,i){const n={};if(s.forEach(l=>{n[l]=t}),Object.keys(t.textures).forEach(l=>{n[`${t.cachePrefix}${l}`]=t.textures[l]}),!i){const l=Oe.dirname(s[0]);t.linkedSheets.forEach((o,h)=>{Object.assign(n,Yx([`${l}/${t.data.meta.related_multi_packs[h]}`],o,!0))})}return n}const TC={extension:dt.Asset,cache:{test:s=>s instanceof g_,getCacheableAssets:(s,t)=>Yx(s,t,!1)},resolver:{test:s=>{const t=s.split("?")[0].split("."),i=t.pop(),n=t.pop();return i==="json"&&EC.includes(n)},parse:s=>{const t=s.split(".");return{resolution:parseFloat(gt.RETINA_PREFIX.exec(s)?.[1]??"1"),format:t[t.length-2],src:s}}},loader:{name:"spritesheetLoader",extension:{type:dt.LoadParser,priority:Fi.Normal},async testParse(s,t){return Oe.extname(t.src).toLowerCase()===".json"&&!!s.frames},async parse(s,t,i){const{texture:n,imageFilename:l,cachePrefix:o}=t?.data??{};let h=Oe.dirname(t.src);h&&h.lastIndexOf("/")!==h.length-1&&(h+="/");let c;if(n&&n.baseTexture)c=n;else{const g=$d(h+(l??s.meta.image),t.src);c=(await i.load([g]))[g]}const p=new g_({texture:c.baseTexture,data:s,resolutionFilename:t.src,cachePrefix:o});await p.parse();const m=s?.meta?.related_multi_packs;if(Array.isArray(m)){const g=[];for(const _ of m){if(typeof _!="string")continue;let x=h+_;t.data?.ignoreMultiPack||(x=$d(x,t.src),g.push(i.load({src:x,data:{ignoreMultiPack:!0}})))}const y=await Promise.all(g);p.linkedSheets=y,y.forEach(_=>{_.linkedSheets=[p].concat(p.linkedSheets.filter(x=>x!==_))})}return p},unload(s){s.destroy(!0)}}};St.add(TC);class wu{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class hu{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const o in i){const h=i[o].match(/^[a-z]+/gm)[0],c=i[o].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),p={};for(const m in c){const g=c[m].split("="),y=g[0],_=g[1].replace(/"/gm,""),x=parseFloat(_),b=isNaN(x)?_:x;p[y]=b}n[h].push(p)}const l=new wu;return n.info.forEach(o=>l.info.push({face:o.face,size:parseInt(o.size,10)})),n.common.forEach(o=>l.common.push({lineHeight:parseInt(o.lineHeight,10)})),n.page.forEach(o=>l.page.push({id:parseInt(o.id,10),file:o.file})),n.char.forEach(o=>l.char.push({id:parseInt(o.id,10),page:parseInt(o.page,10),x:parseInt(o.x,10),y:parseInt(o.y,10),width:parseInt(o.width,10),height:parseInt(o.height,10),xoffset:parseInt(o.xoffset,10),yoffset:parseInt(o.yoffset,10),xadvance:parseInt(o.xadvance,10)})),n.kerning.forEach(o=>l.kerning.push({first:parseInt(o.first,10),second:parseInt(o.second,10),amount:parseInt(o.amount,10)})),n.distanceField.forEach(o=>l.distanceField.push({distanceRange:parseInt(o.distanceRange,10),fieldType:o.fieldType})),l}}class tp{static test(t){const i=t;return typeof t!="string"&&"getElementsByTagName"in t&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new wu,n=t.getElementsByTagName("info"),l=t.getElementsByTagName("common"),o=t.getElementsByTagName("page"),h=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning"),p=t.getElementsByTagName("distanceField");for(let m=0;m<n.length;m++)i.info.push({face:n[m].getAttribute("face"),size:parseInt(n[m].getAttribute("size"),10)});for(let m=0;m<l.length;m++)i.common.push({lineHeight:parseInt(l[m].getAttribute("lineHeight"),10)});for(let m=0;m<o.length;m++)i.page.push({id:parseInt(o[m].getAttribute("id"),10)||0,file:o[m].getAttribute("file")});for(let m=0;m<h.length;m++){const g=h[m];i.char.push({id:parseInt(g.getAttribute("id"),10),page:parseInt(g.getAttribute("page"),10)||0,x:parseInt(g.getAttribute("x"),10),y:parseInt(g.getAttribute("y"),10),width:parseInt(g.getAttribute("width"),10),height:parseInt(g.getAttribute("height"),10),xoffset:parseInt(g.getAttribute("xoffset"),10),yoffset:parseInt(g.getAttribute("yoffset"),10),xadvance:parseInt(g.getAttribute("xadvance"),10)})}for(let m=0;m<c.length;m++)i.kerning.push({first:parseInt(c[m].getAttribute("first"),10),second:parseInt(c[m].getAttribute("second"),10),amount:parseInt(c[m].getAttribute("amount"),10)});for(let m=0;m<p.length;m++)i.distanceField.push({fieldType:p[m].getAttribute("fieldType"),distanceRange:parseInt(p[m].getAttribute("distanceRange"),10)});return i}}class ep{static test(t){return typeof t=="string"&&t.includes("<font>")?tp.test(gt.ADAPTER.parseXML(t)):!1}static parse(t){return tp.parse(gt.ADAPTER.parseXML(t))}}const vd=[hu,tp,ep];function SC(s){for(let t=0;t<vd.length;t++)if(vd[t].test(s))return vd[t];return null}function AC(s,t,i,n,l,o){const h=i.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;let c;const p=i.dropShadow?i.dropShadowDistance:0,m=i.padding||0,g=s.width/n-p-m*2,y=s.height/n-p-m*2,_=h.slice(),x=i.fillGradientStops.slice();if(!x.length){const b=_.length+1;for(let w=1;w<b;++w)x.push(w/b)}if(_.unshift(h[0]),x.unshift(0),_.push(h[h.length-1]),x.push(1),i.fillGradientType===Lu.LINEAR_VERTICAL){c=t.createLinearGradient(g/2,m,g/2,y+m);let b=0;const w=(o.fontProperties.fontSize+i.strokeThickness)/y;for(let S=0;S<l.length;S++){const C=o.lineHeight*S;for(let U=0;U<_.length;U++){let O=0;typeof x[U]=="number"?O=x[U]:O=U/_.length;const P=C/y+O*w;let B=Math.max(b,P);B=Math.min(B,1),c.addColorStop(B,_[U]),b=B}}}else{c=t.createLinearGradient(m,y/2,g+m,y/2);const b=_.length+1;let w=1;for(let S=0;S<_.length;S++){let C;typeof x[S]=="number"?C=x[S]:C=w/b,c.addColorStop(C,_[S]),w++}}return c}function wC(s,t,i,n,l,o,h){const c=i.text,p=i.fontProperties;t.translate(n,l),t.scale(o,o);const m=h.strokeThickness/2,g=-(h.strokeThickness/2);if(t.font=h.toFontString(),t.lineWidth=h.strokeThickness,t.textBaseline=h.textBaseline,t.lineJoin=h.lineJoin,t.miterLimit=h.miterLimit,t.fillStyle=AC(s,t,h,o,[c],i),t.strokeStyle=h.stroke,h.dropShadow){const y=h.dropShadowColor,_=h.dropShadowBlur*o,x=h.dropShadowDistance*o;t.shadowColor=se.shared.setValue(y).setAlpha(h.dropShadowAlpha).toRgbaString(),t.shadowBlur=_,t.shadowOffsetX=Math.cos(h.dropShadowAngle)*x,t.shadowOffsetY=Math.sin(h.dropShadowAngle)*x}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;h.stroke&&h.strokeThickness&&t.strokeText(c,m,g+i.lineHeight-p.descent),h.fill&&t.fillText(c,m,g+i.lineHeight-p.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function cu(s){return s.codePointAt?s.codePointAt(0):s.charCodeAt(0)}function $x(s){return Array.from?Array.from(s):s.split("")}function CC(s){typeof s=="string"&&(s=[s]);const t=[];for(let i=0,n=s.length;i<n;i++){const l=s[i];if(Array.isArray(l)){if(l.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${l.length}.`);const o=l[0].charCodeAt(0),h=l[1].charCodeAt(0);if(h<o)throw new Error("[BitmapFont]: Invalid character range.");for(let c=o,p=h;c<=p;c++)t.push(String.fromCharCode(c))}else t.push(...$x(l))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const on=class Zi{constructor(t,i,n){const[l]=t.info,[o]=t.common,[h]=t.page,[c]=t.distanceField,p=Dr(h.file),m={};this._ownsTextures=n,this.font=l.face,this.size=l.size,this.lineHeight=o.lineHeight/p,this.chars={},this.pageTextures=m;for(let g=0;g<t.page.length;g++){const{id:y,file:_}=t.page[g];m[y]=i instanceof Array?i[g]:i[_],c?.fieldType&&c.fieldType!=="none"&&(m[y].baseTexture.alphaMode=Je.NO_PREMULTIPLIED_ALPHA,m[y].baseTexture.mipmap=er.OFF)}for(let g=0;g<t.char.length;g++){const{id:y,page:_}=t.char[g];let{x,y:b,width:w,height:S,xoffset:C,yoffset:U,xadvance:O}=t.char[g];x/=p,b/=p,w/=p,S/=p,C/=p,U/=p,O/=p;const P=new Ut(x+m[_].frame.x/p,b+m[_].frame.y/p,w,S);this.chars[y]={xOffset:C,yOffset:U,xAdvance:O,kerning:{},texture:new Tt(m[_].baseTexture,P),page:_}}for(let g=0;g<t.kerning.length;g++){let{first:y,second:_,amount:x}=t.kerning[g];y/=p,_/=p,x/=p,this.chars[_]&&(this.chars[_].kerning[y]=x)}this.distanceFieldRange=c?.distanceRange,this.distanceFieldType=c?.fieldType?.toLowerCase()??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,i,n){let l;if(t instanceof wu)l=t;else{const h=SC(t);if(!h)throw new Error("Unrecognized data format for font.");l=h.parse(t)}i instanceof Tt&&(i=[i]);const o=new Zi(l,i,n);return Zi.available[o.font]=o,o}static uninstall(t){const i=Zi.available[t];if(!i)throw new Error(`No font found named '${t}'`);i.destroy(),delete Zi.available[t]}static from(t,i,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:l,padding:o,resolution:h,textureWidth:c,textureHeight:p,...m}=Object.assign({},Zi.defaultOptions,n),g=CC(l),y=i instanceof gn?i:new gn(i),_=c,x=new wu;x.info[0]={face:y.fontFamily,size:y.fontSize},x.common[0]={lineHeight:y.fontSize};let b=0,w=0,S,C,U,O=0;const P=[];for(let j=0;j<g.length;j++){S||(S=gt.ADAPTER.createCanvas(),S.width=c,S.height=p,C=S.getContext("2d"),U=new It(S,{resolution:h,...m}),P.push(new Tt(U)),x.page.push({id:P.length-1,file:""}));const D=g[j],$=hn.measureText(D,y,!1,S),nt=$.width,lt=Math.ceil($.height),it=Math.ceil((y.fontStyle==="italic"?2:1)*nt);if(w>=p-lt*h){if(w===0)throw new Error(`[BitmapFont] textureHeight ${p}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${D}')`);--j,S=null,C=null,U=null,w=0,b=0,O=0;continue}if(O=Math.max(lt+$.fontProperties.descent,O),it*h+b>=_){if(b===0)throw new Error(`[BitmapFont] textureWidth ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${D}')`);--j,w+=O*h,w=Math.ceil(w),b=0,O=0;continue}wC(S,C,$,b,w,h,y);const H=cu($.text);x.char.push({id:H,page:P.length-1,x:b/h,y:w/h,width:it,height:lt,xoffset:0,yoffset:0,xadvance:nt-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),b+=(it+2*o)*h,b=Math.ceil(b)}if(!n?.skipKerning)for(let j=0,D=g.length;j<D;j++){const $=g[j];for(let nt=0;nt<D;nt++){const lt=g[nt],it=C.measureText($).width,H=C.measureText(lt).width,J=C.measureText($+lt).width-(it+H);J&&x.kerning.push({first:cu($),second:cu(lt),amount:J})}}const B=new Zi(x,P,!0);return Zi.available[t]!==void 0&&Zi.uninstall(t),Zi.available[t]=B,B}};on.ALPHA=[["a","z"],["A","Z"]," "],on.NUMERIC=[["0","9"]],on.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],on.ASCII=[[" ","~"]],on.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:on.ALPHANUMERIC},on.available={};let un=on;var RC=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,MC=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const y_=[],v_=[],__=[],DC=class Wx extends Pi{constructor(t,i={}){super();const{align:n,tint:l,maxWidth:o,letterSpacing:h,fontName:c,fontSize:p}=Object.assign({},Wx.styleDefaults,i);if(!un.available[c])throw new Error(`Missing BitmapFont "${c}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tintColor=new se(l),this._font=void 0,this._fontName=c,this._fontSize=p,this.text=t,this._maxWidth=o,this._maxLineHeight=0,this._letterSpacing=h,this._anchor=new Rr(()=>{this.dirty=!0},this,0,0),this._roundPixels=gt.ROUND_PIXELS,this.dirty=!0,this._resolution=gt.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const t=un.available[this._fontName],i=this.fontSize,n=i/t.size,l=new Vt,o=[],h=[],c=[],p=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=$x(p),g=this._maxWidth*t.size/i,y=t.distanceFieldType==="none"?y_:v_;let _=null,x=0,b=0,w=0,S=-1,C=0,U=0,O=0,P=0;for(let it=0;it<m.length;it++){const H=m[it],J=cu(H);if(/(?:\s)/.test(H)&&(S=it,C=x,P++),H==="\r"||H===`
`){h.push(x),c.push(-1),b=Math.max(b,x),++w,++U,l.x=0,l.y+=t.lineHeight,_=null,P=0;continue}const Q=t.chars[J];if(!Q)continue;_&&Q.kerning[_]&&(l.x+=Q.kerning[_]);const pt=__.pop()||{texture:Tt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Vt};pt.texture=Q.texture,pt.line=w,pt.charCode=J,pt.position.x=Math.round(l.x+Q.xOffset+this._letterSpacing/2),pt.position.y=Math.round(l.y+Q.yOffset),pt.prevSpaces=P,o.push(pt),x=pt.position.x+Math.max(Q.xAdvance-Q.xOffset,Q.texture.orig.width),l.x+=Q.xAdvance+this._letterSpacing,O=Math.max(O,Q.yOffset+Q.texture.height),_=J,S!==-1&&g>0&&l.x>g&&(++U,Ks(o,1+S-U,1+it-S),it=S,S=-1,h.push(C),c.push(o.length>0?o[o.length-1].prevSpaces:0),b=Math.max(b,C),w++,l.x=0,l.y+=t.lineHeight,_=null,P=0)}const B=m[m.length-1];B!=="\r"&&B!==`
`&&(/(?:\s)/.test(B)&&(x=C),h.push(x),b=Math.max(b,x),c.push(-1));const j=[];for(let it=0;it<=w;it++){let H=0;this._align==="right"?H=b-h[it]:this._align==="center"?H=(b-h[it])/2:this._align==="justify"&&(H=c[it]<0?0:(b-h[it])/c[it]),j.push(H)}const D=o.length,$={},nt=[],lt=this._activePagesMeshData;y.push(...lt);for(let it=0;it<D;it++){const H=o[it].texture,J=H.baseTexture.uid;if(!$[J]){let Q=y.pop();if(!Q){const E=new tC;let R,M;t.distanceFieldType==="none"?(R=new d_(Tt.EMPTY),M=Mt.NORMAL):(R=new d_(Tt.EMPTY,{program:Mr.from(MC,RC),uniforms:{uFWidth:0}}),M=Mt.NORMAL_NPM);const z=new f_(E,R);z.blendMode=M,Q={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:z,vertices:null,uvs:null,indices:null}}Q.index=0,Q.indexCount=0,Q.vertexCount=0,Q.uvsCount=0,Q.total=0;const{_textureCache:pt}=this;pt[J]=pt[J]||new Tt(H.baseTexture),Q.mesh.texture=pt[J],Q.mesh.tint=this._tintColor.value,nt.push(Q),$[J]=Q}$[J].total++}for(let it=0;it<lt.length;it++)nt.includes(lt[it])||this.removeChild(lt[it].mesh);for(let it=0;it<nt.length;it++)nt[it].mesh.parent!==this&&this.addChild(nt[it].mesh);this._activePagesMeshData=nt;for(const it in $){const H=$[it],J=H.total;if(!(H.indices?.length>6*J)||H.vertices.length<f_.BATCHABLE_SIZE*2)H.vertices=new Float32Array(8*J),H.uvs=new Float32Array(8*J),H.indices=new Uint16Array(6*J);else{const Q=H.total,pt=H.vertices;for(let E=Q*4*2;E<pt.length;E++)pt[E]=0}H.mesh.size=6*J}for(let it=0;it<D;it++){const H=o[it];let J=H.position.x+j[H.line]*(this._align==="justify"?H.prevSpaces:1);this._roundPixels&&(J=Math.round(J));const Q=J*n,pt=H.position.y*n,E=H.texture,R=$[E.baseTexture.uid],M=E.frame,z=E._uvs,I=R.index++;R.indices[I*6+0]=0+I*4,R.indices[I*6+1]=1+I*4,R.indices[I*6+2]=2+I*4,R.indices[I*6+3]=0+I*4,R.indices[I*6+4]=2+I*4,R.indices[I*6+5]=3+I*4,R.vertices[I*8+0]=Q,R.vertices[I*8+1]=pt,R.vertices[I*8+2]=Q+M.width*n,R.vertices[I*8+3]=pt,R.vertices[I*8+4]=Q+M.width*n,R.vertices[I*8+5]=pt+M.height*n,R.vertices[I*8+6]=Q,R.vertices[I*8+7]=pt+M.height*n,R.uvs[I*8+0]=z.x0,R.uvs[I*8+1]=z.y0,R.uvs[I*8+2]=z.x1,R.uvs[I*8+3]=z.y1,R.uvs[I*8+4]=z.x2,R.uvs[I*8+5]=z.y2,R.uvs[I*8+6]=z.x3,R.uvs[I*8+7]=z.y3}this._textWidth=b*n,this._textHeight=(l.y+t.lineHeight)*n;for(const it in $){const H=$[it];if(this.anchor.x!==0||this.anchor.y!==0){let E=0;const R=this._textWidth*this.anchor.x,M=this._textHeight*this.anchor.y;for(let z=0;z<H.total;z++)H.vertices[E++]-=R,H.vertices[E++]-=M,H.vertices[E++]-=R,H.vertices[E++]-=M,H.vertices[E++]-=R,H.vertices[E++]-=M,H.vertices[E++]-=R,H.vertices[E++]-=M}this._maxLineHeight=O*n;const J=H.mesh.geometry.getBuffer("aVertexPosition"),Q=H.mesh.geometry.getBuffer("aTextureCoord"),pt=H.mesh.geometry.getIndex();J.data=H.vertices,Q.data=H.uvs,pt.data=H.indices,J.update(),Q.update(),pt.update()}for(let it=0;it<o.length;it++)__.push(o[it]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:i,distanceFieldType:n,size:l}=un.available[this._fontName];if(n!=="none"){const{a:o,b:h,c,d:p}=this.worldTransform,m=Math.sqrt(o*o+h*h),g=Math.sqrt(c*c+p*p),y=(Math.abs(m)+Math.abs(g))/2,_=this.fontSize/l,x=t._view.resolution;for(const b of this._activePagesMeshData)b.mesh.shader.uniforms.uFWidth=y*i*_*x}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=un.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let i=0;i<this._activePagesMeshData.length;i++)this._activePagesMeshData[i].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!un.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??un.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:i}=this,n=un.available[this._fontName].distanceFieldType==="none"?y_:v_;n.push(...this._activePagesMeshData);for(const l of this._activePagesMeshData)this.removeChild(l.mesh);this._activePagesMeshData=[],n.filter(l=>i[l.mesh.texture.baseTexture.uid]).forEach(l=>{l.mesh.texture=Tt.EMPTY});for(const l in i)i[l].destroy(),delete i[l];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};DC.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const OC=[".xml",".fnt"],BC={extension:{type:dt.LoadParser,priority:Fi.Normal},name:"loadBitmapFont",test(s){return OC.includes(Oe.extname(s).toLowerCase())},async testParse(s){return hu.test(s)||ep.test(s)},async parse(s,t,i){const n=hu.test(s)?hu.parse(s):ep.parse(s),{src:l}=t,{page:o}=n,h=[];for(let m=0;m<o.length;++m){const g=o[m].file;let y=Oe.join(Oe.dirname(l),g);y=$d(y,l),h.push(y)}const c=await i.load(h),p=h.map(m=>c[m]);return un.install(n,p,!0)},async load(s,t){return(await gt.ADAPTER.fetch(s)).text()},unload(s){s.destroy()}};St.add(BC);const ip=class Ys extends gn{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Ys(Object.keys(Ys.defaultOptions).reduce((i,n)=>({...i,[n]:t[n]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Ys.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,i={}){const{availableFonts:n}=Ys;if(n[t]){const l=n[t];return this._fonts.push(l),l.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return gt.ADAPTER.fetch(t).then(l=>l.blob()).then(async l=>new Promise((o,h)=>{const c=URL.createObjectURL(l),p=new FileReader;p.onload=()=>o([c,p.result]),p.onerror=h,p.readAsDataURL(l)})).then(async([l,o])=>{const h=Object.assign({family:Oe.basename(t,Oe.extname(t)),weight:"normal",style:"normal",display:"auto",src:l,dataSrc:o,refs:1,originalUrl:t,fontFace:null},i);n[t]=h,this._fonts.push(h),this.styleID++;const c=new FontFace(h.family,`url(${h.src})`,{weight:h.weight,style:h.style,display:h.display});h.fontFace=c,await c.load(),document.fonts.add(c),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const i=t.filter(n=>!this._overrides.includes(n));i.length>0&&(this._overrides.push(...i),this.styleID++)}removeOverride(...t){const i=t.filter(n=>this._overrides.includes(n));i.length>0&&(this._overrides=this._overrides.filter(n=>!i.includes(n)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,i)=>`${t}
            @font-face {
                font-family: "${i.family}";
                src: url('${i.dataSrc}');
                font-weight: ${i.weight};
                font-style: ${i.style};
                font-display: ${i.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=bT(t)),typeof t=="number"?xT(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const i=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),l=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&i<1&&(t+=(i*255|0).toString(16).padStart(2,"0"));const o=`${n}px ${l}px`;return this.dropShadowBlur>0?`text-shadow: ${o} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${o} ${t}`}reset(){Object.assign(this,Ys.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(i=>setTimeout(i,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=gt.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};ip.availableFonts={},ip.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let _d=ip;const ru=class $s extends na{constructor(t="",i={}){super(Tt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const n=new Image,l=Tt.from(n,{scaleMode:gt.SCALE_MODE,resourceOptions:{autoLoad:!1}});l.orig=new Ut,l.trim=new Ut,this.texture=l;const o="http://www.w3.org/2000/svg",h="http://www.w3.org/1999/xhtml",c=document.createElementNS(o,"svg"),p=document.createElementNS(o,"foreignObject"),m=document.createElementNS(h,"div"),g=document.createElementNS(h,"style");p.setAttribute("width","10000"),p.setAttribute("height","10000"),p.style.overflow="hidden",c.appendChild(p),this.maxWidth=$s.defaultMaxWidth,this.maxHeight=$s.defaultMaxHeight,this._domElement=m,this._styleElement=g,this._svgRoot=c,this._foreignObject=p,this._foreignObject.appendChild(g),this._foreignObject.appendChild(m),this._image=n,this._loadImage=new Image,this._autoResolution=$s.defaultAutoResolution,this._resolution=$s.defaultResolution??gt.RESOLUTION,this.text=t,this.style=i}measureText(t){const{text:i,style:n,resolution:l}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:i,style:n.toCSS(l)}),this._styleElement.textContent=n.toGlobalCSS(),document.body.appendChild(this._svgRoot);const o=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:h,height:c}=o;(h>this.maxWidth||c>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const p=Math.min(this.maxWidth,Math.ceil(h)),m=Math.min(this.maxHeight,Math.ceil(c));return this._svgRoot.setAttribute("width",p.toString()),this._svgRoot.setAttribute("height",m.toString()),i!==this._text&&(this._domElement.innerHTML=this._text),n!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(l)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:p+n.padding*2,height:m+n.padding*2}}async updateText(t=!0){const{style:i,_image:n,_loadImage:l}=this;if(this.localStyleID!==i.styleID&&(this.dirty=!0,this.localStyleID=i.styleID),!this.dirty&&t)return;const{width:o,height:h}=this.measureText();n.width=l.width=Math.ceil(Math.max(1,o)),n.height=l.height=Math.ceil(Math.max(1,h)),this._updateID++;const c=this._updateID;await new Promise(p=>{l.onload=async()=>{if(c<this._updateID){p();return}await i.onBeforeDraw(),n.src=l.src,l.onload=null,l.src="",this.updateTexture(),p()};const m=new XMLSerializer().serializeToString(this._svgRoot);l.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m)}`})}get source(){return this._image}updateTexture(){const{style:t,texture:i,_image:n,resolution:l}=this,{padding:o}=t,{baseTexture:h}=i;i.trim.width=i._frame.width=n.width/l,i.trim.height=i._frame.height=n.height/l,i.trim.x=-o,i.trim.y=-o,i.orig.width=i._frame.width-o*2,i.orig.height=i._frame.height-o*2,this._onTextureUpdate(),h.setRealSize(n.width,n.height,l),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},$s.defaultDestroyOptions,t),super.destroy(t);const i=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=i,this._svgRoot?.remove(),this._svgRoot=i,this._domElement?.remove(),this._domElement=i,this._foreignObject?.remove(),this._foreignObject=i,this._styleElement?.remove(),this._styleElement=i,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=i,this._image.src="",this._image=i}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const i=fn(this.scale.x)||1;this.scale.x=i*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const i=fn(this.scale.y)||1;this.scale.y=i*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof _d?(this.ownsStyle=!1,this._style=t):t instanceof gn?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=_d.from(t)):(this.ownsStyle=!0,this._style=new _d(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};ru.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},ru.defaultMaxWidth=2024,ru.defaultMaxHeight=2024,ru.defaultAutoResolution=!0;class NC{static createRandomShape(t,i){const n=["triangle","rect","pentagon","hexagon","circle","ellipse","random"],l=n[Math.floor(Math.random()*n.length)],o=Math.floor(Math.random()*16777215),h=25+Math.random()*25,c=new mp;c.beginFill(o),c.lineStyle(1,0,.5);let p=0;switch(l){case"circle":c.drawCircle(0,0,h),p=Math.PI*h*h;break;case"ellipse":const m=h,g=h*.6;c.drawEllipse(0,0,m,g),p=Math.PI*m*g;break;case"rect":c.drawRect(-h,-h,h*2,h*2),p=(h*2)**2;break;case"random":c.moveTo(0,-h),c.bezierCurveTo(h,-h,h,h,0,h),c.bezierCurveTo(-h,h,-h,-h,0,-h),p=Math.PI*h*h*.8;break;default:const y=l==="triangle"?3:l==="pentagon"?5:6,_=[];for(let x=0;x<y;x++){const b=Math.PI*2*x/y-Math.PI/2;_.push(Math.cos(b)*h,Math.sin(b)*h)}c.drawPolygon(_),p=y*h*h*Math.sin(2*Math.PI/y)/2;break}return c.endFill(),c.x=t,c.y=i,c.eventMode="static",c.cursor="pointer",{graphics:c,area:p,type:l}}}class IC{app;shapes=[];gravity=2;shapesPerSec=1;timeSinceSpawn=0;onStatsUpdate;constructor(t,i,n,l){this.onStatsUpdate=l,this.app=new wx({width:i,height:n,backgroundColor:16777215,resolution:window.devicePixelRatio||1,antialias:!0,autoDensity:!0}),t.appendChild(this.app.view),this.app.stage.eventMode="static",this.app.stage.hitArea=this.app.screen,this.app.stage.on("pointerdown",o=>{this.spawnShape(o.global.x,o.global.y)}),this.app.ticker.add(o=>this.update(o))}update(t){if(!this.app||!this.app.stage)return;const i=16.66;this.timeSinceSpawn+=i*t;const n=1e3/this.shapesPerSec;if(this.timeSinceSpawn>n){const o=Math.random()*this.app.screen.width;this.spawnShape(o,-60),this.timeSinceSpawn=0}const l=[];this.shapes.forEach(o=>{o.graphics.y+=this.gravity*t,this.app&&o.graphics.y>this.app.screen.height+100&&l.push(o.id)}),l.forEach(o=>this.removeShape(o)),this.broadcastStats()}spawnShape(t,i){if(!this.app)return;const{graphics:n,area:l,type:o}=NC.createRandomShape(t,i),h=Date.now()+Math.random();n.on("pointerdown",c=>{c.stopPropagation(),this.removeShape(h)}),this.app.stage.addChild(n),this.shapes.push({id:h,graphics:n,area:l,type:o,dy:0}),this.broadcastStats()}removeShape(t){if(!this.app)return;const i=this.shapes.findIndex(n=>n.id===t);if(i!==-1){const n=this.shapes[i];n.graphics.destroyed||(this.app.stage.removeChild(n.graphics),n.graphics.destroy()),this.shapes.splice(i,1),this.broadcastStats()}}setGravity(t){this.gravity=Math.max(.5,t),this.broadcastStats()}getGravity(){return this.gravity}setSpawnRate(t){this.shapesPerSec=Math.max(.5,t),this.broadcastStats()}getSpawnRate(){return this.shapesPerSec}resize(t,i){this.app&&(this.app.renderer.resize(t,i),this.app.stage.hitArea=new Ut(0,0,t,i))}destroy(){this.app&&this.app.destroy(!0,{children:!0})}broadcastStats(){const t=this.shapes.reduce((i,n)=>i+n.area,0);this.onStatsUpdate({shapeCount:this.shapes.length,areaOccupied:Math.round(t),gravity:this.gravity,shapesPerSec:this.shapesPerSec})}}const UC=({stats:s,onRateChange:t,onGravityChange:i})=>ue.jsxs(ue.Fragment,{children:[ue.jsxs("div",{style:Ei.topPanel,children:[ue.jsxs("div",{style:Ei.box,children:["Shapes: ",ue.jsx("strong",{children:s.shapeCount})]}),ue.jsxs("div",{style:Ei.box,children:["Area: ",ue.jsxs("strong",{children:[s.areaOccupied," px"]})]})]}),ue.jsxs("div",{style:Ei.bottomPanel,children:[ue.jsxs("div",{style:Ei.controlGroup,children:[ue.jsxs("span",{style:Ei.label,children:["Shapes/sec: ",ue.jsx("strong",{children:s.shapesPerSec.toFixed(1)})]}),ue.jsx("button",{onClick:()=>t(-.5),style:Ei.btn,children:"-"}),ue.jsx("button",{onClick:()=>t(.5),style:Ei.btn,children:"+"})]}),ue.jsxs("div",{style:Ei.controlGroup,children:[ue.jsxs("span",{style:Ei.label,children:["Gravity: ",ue.jsx("strong",{children:s.gravity.toFixed(1)})]}),ue.jsx("button",{onClick:()=>i(-.5),style:Ei.btn,children:"-"}),ue.jsx("button",{onClick:()=>i(.5),style:Ei.btn,children:"+"})]})]})]}),Ei={topPanel:{position:"absolute",top:20,left:20,display:"flex",gap:20},bottomPanel:{position:"absolute",bottom:20,left:20,display:"flex",gap:20},box:{background:"rgba(255,255,255,0.9)",padding:"10px 20px",borderRadius:8,boxShadow:"0 2px 5px rgba(0,0,0,0.2)",fontFamily:"sans-serif"},controlGroup:{background:"rgba(255,255,255,0.9)",padding:"10px",borderRadius:30,display:"flex",alignItems:"center",gap:10,boxShadow:"0 2px 5px rgba(0,0,0,0.2)",fontFamily:"sans-serif"},btn:{width:30,height:30,borderRadius:"50%",border:"none",background:"#007bff",color:"white",fontSize:18,cursor:"pointer"},label:{marginRight:5}};function LC(){const s=al.useRef(null),t=al.useRef(null),[i,n]=al.useState({shapeCount:0,areaOccupied:0,gravity:2,shapesPerSec:1});al.useEffect(()=>{if(!s.current||t.current)return;const h=new IC(s.current,window.innerWidth,window.innerHeight,p=>n(p));t.current=h;const c=()=>{t.current&&t.current.resize(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),t.current&&(t.current.destroy(),t.current=null)}},[]);const l=h=>{t.current&&t.current.setSpawnRate(t.current.getSpawnRate()+h)},o=h=>{t.current&&t.current.setGravity(t.current.getGravity()+h)};return ue.jsxs("div",{style:{width:"100vw",height:"100vh",overflow:"hidden",position:"relative"},children:[ue.jsx("div",{ref:s,style:{width:"100%",height:"100%"}}),ue.jsx(UC,{stats:i,onRateChange:l,onGravityChange:o})]})}mE.createRoot(document.getElementById("root")).render(ue.jsx(al.StrictMode,{children:ue.jsx(LC,{})}));
